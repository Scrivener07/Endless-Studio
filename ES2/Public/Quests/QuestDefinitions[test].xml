<?xml version="1.0" encoding="utf-8" ?>
<Datatable xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xsi:noNamespaceSchemaLocation="../Schemas/QuestDefinition.xsd">

    <QuestDefinition Name="TestQuestMarker" Category="" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="1"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="1"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$Constellation">
                <Any>
                    <From Source="$Constellations"/>
                </Any>
            </Var>
            <Var VarName="$System">
                <Any>
                    <From Source="$Constellation.$StarSystems"/>
                </Any>
            </Var>
            <Var VarName="$SystemGUID">
                <From Source="$System.$GUID"/>
            </Var>
            <Var VarName="$Marker"/>
        </Vars>      

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <StartActions>
                        <Action_AddQuestMarkers RevealsLocation="true">
                            <Input_TargetGUIDs VarName="$SystemGUID"/>
                            <Input_Empires VarName="$CurrentEmpire"/>
                            <Output_Markers VarName="$Marker"/>
                        </Action_AddQuestMarkers>
                    </StartActions>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                            <Action_RemoveQuestMarkers>
                                <Input_Markers VarName="$Marker"/>
                            </Action_RemoveQuestMarkers>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>

    </QuestDefinition>
    
    <QuestDefinition Name="TestPlanetQuestMarker" Category="" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="1"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="1"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$Constellation">
                <Any>
                    <From Source="$Constellations"/>
                </Any>
            </Var>
            <Var VarName="$HomeSystem">
                <Any>
                    <From Source="$Empire.$HomeStarSystem"/>
                </Any>
            </Var>
            <Var VarName="$Planet">
                <Any>
                    <From Source="$HomeSystem.$Planets"/>
                </Any>
            </Var>
            <Var VarName="$Marker"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <StartActions>
                        <Action_AddQuestMarkers RevealsLocation="true">
                            <Input_Targets VarName="$Planet"/>
                            <Input_Empires VarName="$CurrentEmpire"/>
                            <Output_Markers VarName="$Marker"/>
                        </Action_AddQuestMarkers>
                    </StartActions>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                            <Action_RemoveQuestMarkers>
                                <Input_Markers VarName="$Marker"/>
                            </Action_RemoveQuestMarkers>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestColo" Category="Test" SubCategory="" MinimumTurn="2">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$RandomSystemInConstellation">
                <Any>
                    <From Source="$Empire.$HomeStarSystem.$Constellation.$StarSystems"/>
                </Any>
            </Var>
            <Var VarName="$PlanetToColonize">
                <Any>
                    <From Source="$RandomSystemInConstellation.$Planets"/>
                </Any>
            </Var>

            <Var VarName="$StarSystem"/>
            <Var VarName="$ColonizedStarSystem"/>
            <Var VarName="$Planet"/>
            <Var VarName="$One" IntValue="1"/>

            <Var VarName="$PlanetType" StringValue="PlanetTypeToundra"/>
            <Var VarName="$PlanetSize" StringValue="PlanetSizeSmall"/>
            <Var VarName="$PlanetGameplayType" StringValue="PlanetGameplayTypeGas"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">../EmpireTypeMajor,AffinitySophons</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1" StartValue="0" EndValue="$One">
                        <Sequence>
                            <!--============ Colonize 1 System ============-->
                            <Decorator_ColonizedSystem Initiator="Empire">
                                <Condition_HasSystems>
                                    <Input_Empires VarName="$CurrentEmpire"/>
                                    <Input_MinimumAmount VarName="$One"/>
                                </Condition_HasSystems>
                                <Input_System VarName="$RandomSystemInConstellation"/>
                                <Output_StarSystem VarName="$StarSystem"/>
                                <Output_ColonizedStarSystem VarName="$ColonizedStarSystem"/>
                            </Decorator_ColonizedSystem>
                            <!--Colonize 1 Planet-->
                            <Decorator_ColonizedPlanet Initiator="Empire">
                                <Condition_HasPlanets>
                                    <!--??????????????????????????-->
                                    <Input_EmpireOrSystem VarName="$StarSystem"/>
                                    <Input_MinimumAmount VarName="$One"/>
                                    <Input_PlanetType VarName="$PlanetType"/>
                                    <Input_PlanetSize VarName="$PlanetSize"/>
                                    <Input_PlanetGameplayType VarName="$PlanetGameplayType"/>
                                </Condition_HasPlanets>
                                <Condition_HasFidsi>
                                    <Input_Location VarName="$Planet"/>
                                    <Input_Food VarName="$One"/>
                                    <Input_Industry VarName="$One"/>
                                </Condition_HasFidsi>
                                <Output_Planet VarName="$Planet"/>
                                <Output_System VarName="$StarSystem"/>
                            </Decorator_ColonizedPlanet>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestColo2" Category="Test" SubCategory="" MinimumTurn="2">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>

            <Var VarName="$One" IntValue="1"/>
            <Var VarName="$HomeSystem">
                <Any>
                    <From Source="$Empire.$HomeStarSystem"/>
                </Any>
            </Var>

            <Var VarName="$PlanetType" StringValue="PlanetTypeToundra"/>
            <Var VarName="$PlanetSize" StringValue="PlanetSizeSmall"/>
            <Var VarName="$PlanetGameplayType" StringValue="PlanetGameplayTypeGas"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">../EmpireTypeMajor,AffinitySophons</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1" StartValue="0" EndValue="$One">
                        <Sequence>
                            <Decorator_ColonizedPlanet Initiator="Empire">
                                <Condition_HasPlanets>
                                    <Input_EmpireOrSystem VarName="$HomeSystem"/>
                                    <Input_MinimumAmount VarName="$One"/>
                                    <Input_PlanetType VarName="$PlanetType"/>
                                    <Input_PlanetSize VarName="$PlanetSize"/>
                                    <Input_PlanetGameplayType VarName="$PlanetGameplayType"/>
                                </Condition_HasPlanets>
                            </Decorator_ColonizedPlanet>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestSystemLevel" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$HomeSystem">
                <Any>
                    <From Source="$Empire.$HomeStarSystem"/>
                </Any>
            </Var>

            <Var VarName="$StarSystem"/>
            <Var VarName="$ColonizedStarSystem"/>
            <Var VarName="$Three" IntValue="3"/>
            <Var VarName="$One" IntValue="1"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">../EmpireTypeMajor,AffinitySophons</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_SystemLevelChanged Initiator="Empire">
                                <Condition_HasSystems>
                                    <Input_Empires VarName="$CurrentEmpire"/>
                                    <Input_MinimumAmount VarName="$One"/>
                                    <Input_MinimumLevel VarName="$Three"/>
                                </Condition_HasSystems>
                                <Input_System VarName="$HomeSystem"/>
                                <Output_StarSystem VarName="$StarSystem"/>
                                <Output_ColonizedStarSystem VarName="$ColonizedStarSystem"/>
                            </Decorator_SystemLevelChanged>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestOutpost" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags>Hidden</Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$StarSystem"/>
            <Var VarName="$Planet"/>
            <Var VarName="$Three" IntValue="3"/>
            <Var VarName="$One" IntValue="1"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">../EmpireTypeMajor,AffinitySophons</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_OutpostCreated Initiator="Empire">                                   
                                <Output_StarSystem VarName="$StarSystem"/>
                                 <Output_Planet VarName="$Planet"/>
                            </Decorator_OutpostCreated>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestTechno" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>

            <Var VarName="$StarSystem"/>
            <Var VarName="$Planet"/>
            <Var VarName="$TechnoToUnlock" StringValue="TechnologyDefinitionEconomyAndTrade1"/>
            <Var VarName="$StageNumber" IntValue="1"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_TechnologyUnlocked Initiator="Empire">
                                <Input_TechnologyName VarName="$TechnoToUnlock"/>
                                <Input_TechnologyStage VarName="$StageNumber"/>
                            </Decorator_TechnologyUnlocked>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestConstruction" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>

            <Var VarName="$HomeSystem">
                <From Source="$Empire.$HomeStarSystem"/>
            </Var>

            <Var VarName="$ConstructionSubCategory" StringValue="!SubCategoryScience"/>

            <Var VarName="$OutSystem"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">../EmpireTypeMajor,AffinitySophons</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_ConstructionCompleted Initiator="Empire">
                                <Input_ConstructionSubCategory VarName="$ConstructionSubCategory"/>
                                <Output_System VarName="$OutSystem"/>
                            </Decorator_ConstructionCompleted>
                            <Action_Fail/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestConstruction2" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>


        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>

            <Var VarName="$HomeSystem">
                <From Source="$Empire.$HomeStarSystem"/>
            </Var>

            <Var VarName="$HomeColonizedStarSystem">
                <From Source="$Empire.$HomeColonizedStarSystem"/>
            </Var>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">../EmpireTypeMajor,AffinitySophons</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_ConstructionCompleted Initiator="Empire">
                                <Input_System VarName="$HomeSystem"/>
                            </Decorator_ConstructionCompleted>
                            <Action_Message Message="Bazpingo">
                                <Input_Empires VarName="$CurrentEmpire"/>
                            </Action_Message>
                            <Decorator_BeginTurn/>
                            <Decorator_ConstructionCompleted Initiator="Empire">
                                <Input_System VarName="$HomeColonizedStarSystem"/>
                            </Decorator_ConstructionCompleted>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestMothershipAttach" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>

            <Var VarName="$RandomSystemInConstellation">
                <Any>
                    <From Source="$Empire.$HomeStarSystem.$Constellation.$StarSystems"/>
                </Any>
            </Var>
        
            <Var VarName="$ColonizedStarSystem"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">../EmpireTypeMajor,AffinityVampirilis</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_MothershipAttached Initiator="Empire">
                                <Input_System VarName="$RandomSystemInConstellation"/>
                                <Output_ColonizedStarSystem VarName="$ColonizedStarSystem"/>
                            </Decorator_MothershipAttached>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestResource" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>

            <Var VarName="$HomeSystem">
                <Any>
                    <From Source="$Empire.$HomeColonizedStarSystem"/>
                </Any>
            </Var>
            <Var VarName="$Minimum" IntValue="1"/>
            <Var VarName="$ResourceName" StringValue="SystemProduction"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">../EmpireTypeMajor,AffinitySophons</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_HasResource>
                                    <Input_Location VarName="$HomeSystem"/>
                                    <Input_ResourceName VarName="$ResourceName"/>
                                    <Input_Minimum VarName="$Minimum"/>
                                </Condition_HasResource>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestExploration" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$MinimumPercent" IntValue="3"/>
            <Var VarName="$ExploredNode"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">../EmpireTypeMajor,AffinitySophons</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_ExploredNode Initiator="Empire" MinimumState="Identified" MaximumPreviousState="Owned">
                                <Input_MinimumPercentage VarName="$MinimumPercent"/>
                                <Output_Node VarName="$ExploredNode"/>
                            </Decorator_ExploredNode>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestCuriosity" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$CuriosityType" StringValue="CuriosityTypeLifeform"/>
            <Var VarName="$Planet"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">../EmpireTypeMajor,AffinitySophons</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_CuriosityDiscovered Initiator="Empire">
                                <Input_DisplayedType VarName="$CuriosityType"/>
                                <Output_Planet VarName="$Planet"/>
                            </Decorator_CuriosityDiscovered>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestSpawnCuriosity" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$CuriosityDefinition" StringValue="Curiosity_Loot_Ruins_Era1"/>
            <Var VarName="$Planets">
                <From Source="$CurrentEmpire.$ColonizedStarSystems.$StarSystem.$AnyPlanet"/>
            </Var>
            <Var VarName="$Count" IntValue="4"/>
            <Var VarName="$CuriosityGUIDs"/>
        </Vars>

        <!--============ PREREQUISITES ============-->


        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Action_SpawnCuriosity>
                                <Input_Empires VarName="$CurrentEmpire"/>
                                <Input_Planets VarName="$Planets"/>
                                <Input_Count VarName="$Count"/>
                                <Input_CuriosityDefinition VarName="$CuriosityDefinition"/>
                                <Output_CuriosityGUIDs VarName="$CuriosityGUIDs"/>
                            </Action_SpawnCuriosity>
                            <Decorator_CuriosityDiscovered Initiator="Empire">
                                <Input_CuriosityGUIDs VarName="$CuriosityGUIDs"/>
                            </Decorator_CuriosityDiscovered>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestCuriosity3" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$FleetGUID"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">../EmpireTypeMajor,AffinitySophons</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_CuriosityDiscovered Initiator="Empire">
                                <Output_FleetGUID VarName="$FleetGUID"/>
                            </Decorator_CuriosityDiscovered>
                            <Action_DestroyFleets>
                                <Input_FleetGUIDs VarName="$FleetGUID"/>
                            </Action_DestroyFleets>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestCuriosityRemove" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$Planet">
                <First>
                    <From Source="$CurrentEmpire.$HomeStarSystem.$Planets"/>
                </First>
            </Var>
            <Var VarName="$CuriosityGUID"/>
            <Var VarName="$CuriosityDefinition" StringValue="Curiosity_Quest_Sophon1"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">../EmpireTypeMajor,AffinitySophons</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <StartActions>
                        <Action_SpawnCuriosity>
                            <Input_Empires VarName="$CurrentEmpire"/>
                            <Input_Planets VarName="$Planet"/>
                            <Input_CuriosityDefinition VarName="$CuriosityDefinition"/>
                            <Output_CuriosityGUIDs VarName="$CuriosityGUID"/>
                        </Action_SpawnCuriosity>
                    </StartActions>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                            <Action_RemoveCuriosity>
                                <Input_CuriosityGUID VarName="$CuriosityGUID"/>
                            </Action_RemoveCuriosity>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestBattleEnded" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$Hero">
                <Any>
                    <From Source="$Empire.$Heroes"/>
                </Any>
            </Var>
            <Var VarName="$Ships" IntValue="1"/>
            <Var VarName="$Hull" StringValue="HullSmall03Sophons"/>
            <Var VarName="$Module" StringValue="ModuleSupportExploration1"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">../EmpireTypeMajor,AffinitySophons</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BattleEnded Status="Survived" Initiator="Empire">
                                <Condition_BattleEndedWithShips>
                                    <Input_MinimumAmount VarName="$Ships"/>
                                    <Input_HullName VarName="$Hull"/>
                                    <Input_ModuleName VarName="$Module"/>
                                </Condition_BattleEndedWithShips>
                                <Input_Hero VarName="$Hero"/>
                            </Decorator_BattleEnded>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestSystemOwned" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$HomeSystem">
                <From Source="$CurrentEmpire.$HomeStarSystem"/>
            </Var>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">../EmpireTypeMajor,AffinitySophons</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_IsSystemOwnedBy>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_System VarName="$HomeSystem"/>
                                </Condition_IsSystemOwnedBy>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestPopulation" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$HomeSystem">
                <From Source="$CurrentEmpire.$HomeStarSystem"/>
            </Var>

            <Var VarName="$MinimumAmount" IntValue="1"/>
            <Var VarName="$MinimumAmount2" IntValue="2"/>
            <Var VarName="$Affinity" StringValue="AffinitySophons"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
      
        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_HasPopulationAmount>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinimumAmount VarName="$MinimumAmount"/>
                                    <Input_Location VarName="$HomeSystem"/>
                                    <Input_PopulationAffinity VarName="$Affinity"/>
                                </Condition_HasPopulationAmount>
                               <Condition_HasPopulationDiversity>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinimumAmount VarName="$MinimumAmount2"/>
                                    <Input_Location VarName="$HomeSystem"/>
                                </Condition_HasPopulationDiversity>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestHappiness" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$HomeSystem">
                <From Source="$CurrentEmpire.$HomeStarSystem"/>
            </Var>

            <Var VarName="$MinimumAmount" IntValue="1"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">../EmpireTypeMajor,AffinitySophons</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_HasHappiness>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_System VarName="$HomeSystem"/>
                                    <Input_MinimumAmount VarName="$MinimumAmount"/>
                                </Condition_HasHappiness>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestSpawnFleet" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$HomeSystem">
                <From Source="$CurrentEmpire.$HomeStarSystem"/>
            </Var>

            <DroplistVar VarName="$FleetToSpawn" Droplist="TestFleetDroplist"/>
            <Var VarName="$GUID"/>
            <Var VarName="$SpawnedFleet"/>
            <Var VarName="$DescriptorName" StringValue="QuestEffectFleetUpkeepReduction"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">../EmpireTypeMajor,AffinitySophons</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Action_SpawnFleets LockShipsInTheFleet="true">
                                <Input_Empire VarName="$CurrentEmpire"/>
                                <Input_Locations VarName="$HomeSystem"/>
                                <Input_DroppableFleet VarName="$FleetToSpawn"/>
                                <Output_FleetGUIDs VarName="$GUID"/>
                            </Action_SpawnFleets>
                            <Decorator_EntityCreated>
                                <Input_GUID VarName="$GUID"/>
                                <Output_Entity VarName="$SpawnedFleet"/>
                            </Decorator_EntityCreated>
                            <Action_ApplyDescriptor>
                                <Input_DescriptorName VarName="$DescriptorName"/>
                                <Input_Targets VarName="$SpawnedFleet"/>
                            </Action_ApplyDescriptor>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestSpawnPopulation" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$HomeSystem">
                <From Source="$CurrentEmpire.$HomeStarSystem"/>
            </Var>
            <Var VarName="$Amount" IntValue="1"/>
            <Var VarName="$Affinity" StringValue="AffinitySophons"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">../EmpireTypeMajor,AffinitySophons</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_HasPopulationSlots>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinimumSlots VarName="$Amount"/>
                                    <Input_Location VarName="$HomeSystem"/>
                                </Condition_HasPopulationSlots>
                            </Decorator_BeginTurn>
                            <Action_SpawnPopulation>
                                <Input_Empire VarName="$CurrentEmpire"/>
                                <Input_System VarName="$HomeSystem"/>
                                <Input_Amount VarName="$Amount"/>
                                <Input_PopulationAffinity VarName="$Affinity"/>
                            </Action_SpawnPopulation>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestLevelUp" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$Hero">
                <Any>
                    <From Source="$CurrentEmpire.$Heroes"/>
                </Any>
            </Var>
            <Var VarName="$MinimumLevel" IntValue="2"/>
            <Var VarName="$HeroClass" StringValue="HeroClassAdventurer"/>
            <Var VarName="$HullName" StringValue="HullSmall03Sophons"/>
            <Var VarName="$OutputHero" />
            <Var VarName="$OutputShip" />
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">../EmpireTypeMajor,AffinitySophons</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_HeroLevelUp>
                                <Input_Hero VarName="$Hero"/>
                                <Input_HeroClass VarName="$HeroClass"/>
                                <Input_MinimumLevel VarName="$MinimumLevel"/>
                                <Output_Hero VarName="$OutputHero"/>
                            </Decorator_HeroLevelUp>
                            <Decorator_ShipLevelUp>
                                <Input_HullName VarName="$HullName"/>
                                <Input_MinimumLevel VarName="$MinimumLevel"/>
                                <Output_Ship VarName="$OutputShip"/>
                            </Decorator_ShipLevelUp>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestDefense" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$HomeColonizedSystem">
                <From Source="$CurrentEmpire.$HomeColonizedStarSystem"/>
            </Var>
            <Var VarName="$MinimumDefense" IntValue="0"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">../EmpireTypeMajor,AffinitySophons</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_HasSystemDefense>
                                    <Input_ColonizedStarSystem VarName="$HomeColonizedSystem"/>
                                    <Input_MinimumDefense VarName="$MinimumDefense"/>
                                </Condition_HasSystemDefense>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestPolitics" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$PoliticsName" StringValue="Politics02"/>
            <Var VarName="$MinimumPercentage" IntValue="20"/>
            <Var VarName="$MinimumSystemAmount" IntValue="1"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">../EmpireTypeMajor,AffinitySophons</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_HasPoliticsScore>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_PoliticsName VarName="$PoliticsName"/>
                                    <Input_MinimumPercentage VarName="$MinimumPercentage"/>
                                    <Input_MinimumSystemAmount VarName="$MinimumSystemAmount"/>
                                </Condition_HasPoliticsScore>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestDocking" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$SystemToDockOn">
                <Any>
                    <From Source="$CurrentEmpire.$HomeStarSystem.$Neighbours"/>
                </Any>
            </Var>
            <Var VarName="$MinimumAmount" IntValue="1"/>
            <Var VarName="$Hull" StringValue="HullSmall03Sophons"/>
            <Var VarName="$Module" StringValue="ModuleExplorationBase"/>
            <Var VarName="$SystemType" StringValue="StarTypeProtostar"/>
            <Var VarName="$Node"/>
            <Var VarName="$FleetToDock">
                <Any>
                    <From Source="$CurrentEmpire.$Fleets"/>
                </Any>
            </Var>
            <Var VarName="$ShipToDock">
                <Any>
                    <From Source="$FleetToDock.$Ships"/>
                </Any>
            </Var>
            <Var VarName="$Fleet"/>
            <Var VarName="$Hangar">
                <From Source="$CurrentEmpire.$HomeColonizedStarSystem.$Hangar"/>
            </Var>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">../EmpireTypeMajor,AffinitySophons</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Parallel CompletionPolicy="All">
                            <Decorator_FleetDocked> <!--ORBIT-->
                                <Input_System VarName="$SystemToDockOn"/>
                                <Input_Fleet VarName="$FleetToDock"/>
                                <Input_SystemType VarName="$SystemType"/>
                                <Output_Node VarName="$Node"/>
                                <Output_Fleet VarName="$Fleet"/>
                            </Decorator_FleetDocked>
                            <Decorator_BeginTurn>
                                <Condition_HasGarrisonComposition>
                                    <Input_Garrisons VarName="$Hangar"/>                                    
                                    <Input_MinimumAmount VarName="$MinimumAmount"/>
                                    <Input_HullName VarName="$Hull"/>
                                    <Input_ModuleName VarName="$Module"/>                                    
                                </Condition_HasGarrisonComposition>
                            </Decorator_BeginTurn>
                            <Decorator_ShipIsInGarrison>
                                <Input_Garrison VarName="$FleetToDock"/>
                                <Input_Ship VarName="$ShipToDock"/>
                            </Decorator_ShipIsInGarrison>
                        </Parallel>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestDocking2" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$FleetGUID"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">../EmpireTypeMajor,AffinitySophons</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_FleetDocked>
                                <Output_FleetGUID VarName="$FleetGUID"/>
                            </Decorator_FleetDocked>
                            <Action_DestroyFleets>
                                <Input_FleetGUIDs VarName="$FleetGUID"/>
                            </Action_DestroyFleets>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestFidsi" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$HomeColonizedSystem">
                <From Source="$CurrentEmpire.$HomeColonizedStarSystem"/>
            </Var>
            <Var VarName="$ColonizedPlanet">
                <Any>
                    <From Source="$HomeColonizedSystem.$ColonizedPlanets"/>
                </Any>
            </Var>
            <Var VarName="$Planet">
                <From Source="$ColonizedPlanet.$Planet"/>
            </Var>
            <Var VarName="$One" IntValue="1"/>
            <Var VarName="$Two" IntValue="2"/>
            <Var VarName="$Three" IntValue="3"/>
            <Var VarName="$Four" IntValue="4"/>
            <Var VarName="$Five" IntValue="5"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">../EmpireTypeMajor,AffinitySophons</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Parallel CompletionPolicy="All">
                            <Decorator_BeginTurn>
                                <Condition_HasFidsi>
                                    <Input_Location VarName="$CurrentEmpire"/>
                                    <Input_Food VarName="$One"/>
                                    <Input_Industry VarName="$Two"/>
                                    <Input_Dust VarName="$Three"/>
                                    <Input_Science VarName="$Four"/>
                                    <Input_Influence VarName="$Five"/>
                                </Condition_HasFidsi>
                            </Decorator_BeginTurn>
                            <Decorator_BeginTurn>
                                <Condition_HasFidsi>
                                    <Input_Location VarName="$HomeColonizedSystem"/>
                                    <Input_Food VarName="$One"/>
                                    <Input_Industry VarName="$Two"/>
                                    <Input_Dust VarName="$Three"/>
                                    <Input_Science VarName="$Four"/>
                                    <Input_Influence VarName="$Five"/>
                                </Condition_HasFidsi>
                            </Decorator_BeginTurn>
                            <Decorator_BeginTurn>
                                <Condition_HasFidsi>
                                    <Input_Location VarName="$ColonizedPlanet"/>
                                    <Input_Food VarName="$One"/>
                                    <Input_Industry VarName="$Two"/>
                                    <Input_Dust VarName="$Three"/>
                                    <Input_Science VarName="$Four"/>
                                    <Input_Influence VarName="$Five"/>
                                </Condition_HasFidsi>
                            </Decorator_BeginTurn>
                            <Decorator_BeginTurn>
                                <Condition_HasFidsi>
                                    <Input_Location VarName="$Planet"/>
                                    <Input_Food VarName="$One"/>
                                    <Input_Industry VarName="$Two"/>
                                    <Input_Dust VarName="$Three"/>
                                    <Input_Science VarName="$Four"/>
                                    <Input_Influence VarName="$Five"/>
                                </Condition_HasFidsi>
                            </Decorator_BeginTurn>
                        </Parallel>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestMinorRelation" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>            
            </Var>
            <Var VarName="$MinorEmpire">
                <First>
                    <From Source="$Empires">
                        <Where>
                            <PathPrerequisite Flags="Prerequisite">../EmpireTypeMinor</PathPrerequisite>
                        </Where>
                    </From>
                </First>
            </Var>
            <Var VarName="$MinimumRelationPoints" IntValue="10"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_MinorFactionRelation>
                                <Input_PlayerEmpire VarName="$CurrentEmpire"/>
                                <!--<Input_MinorEmpire VarName="$MinorEmpire"/>-->
                                <Input_MinimumRelationPoints VarName="$MinimumRelationPoints"/>
                            </Decorator_MinorFactionRelation>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestShipConstructed" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$DesignName" StringValue="ShipDesignSmall03ColonizerSophons"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <!--<Decorator_ShipConstructed>                                
                                <Input_ShipDesignName VarName="$DesignName"/>
                            </Decorator_ShipConstructed>-->
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestFleetShipCount" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$MinCount" IntValue="3"/>
            <Var VarName="$Fleet"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_FleetShipCount>
                                <Input_MinCount VarName="$MinCount"/>
                                <Output_Fleet VarName="$Fleet"/>
                            </Decorator_FleetShipCount>
                            <Action_DestroyFleets>
                                <Input_Fleets VarName="$Fleet"/>
                            </Action_DestroyFleets>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestVisitYourCraverFriend" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CraversEmpire">
                <First>
                    <From Source="$Empires">
                        <Where>
                            <PathPrerequisite Flags="Prerequisite">AffinityCravers</PathPrerequisite>
                        </Where>
                    </From>
                </First>
            </Var>
            <Var VarName="$Node">
                <First>
                    <From Source="$CraversEmpire.$HomeStarSystem"/>
                </First>
            </Var>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_ExploredNode MinimumState="Revealed" MaximumPreviousState="Owned">
                                <Input_NodeList VarName="$Node"/>                                
                            </Decorator_ExploredNode>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestCuriosityAdvancedStuff" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$Empire">
                <From Source="$Empire"/>
            </Var>
            <DroplistVar VarName="$FleetToSpawn" Droplist="TestFleetDroplist"/>
            <Var VarName="$CuriosityDefinition" StringValue="Curiosity_Loot_Ruins_Era1"/>
            <Var VarName="$Planet"/>
            <Var VarName="$Node"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_CuriosityDiscovered>                                  
                                <Output_Planet VarName="$Planet"/>                                
                                <Output_Node VarName="$Node"/>
                            </Decorator_CuriosityDiscovered>
                            <Action_SpawnFleets>
                                <Input_Empire VarName="$Empire"/>
                                <Input_Locations VarName="$Node"/>
                                <Input_DroppableFleet VarName="$FleetToSpawn"/>
                            </Action_SpawnFleets>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestFidsiMultiple" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$Empire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$NetMoney" IntValue="40"/>
            <Var VarName="$SystemCount" IntValue="2"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_SystemsHaveFidsi>
                                    <Input_Empire VarName="$Empire"/>
                                    <Input_SystemCount VarName="$SystemCount"/>
                                    <Input_NetMoney VarName="$NetMoney"/>
                                </Condition_SystemsHaveFidsi>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestSubcategory" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$TechSubcategory" StringValue="SubCategoryTechnoMilitary"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_TechnologyUnlocked>
                                <Input_TechnologySubCategory VarName="$TechSubcategory"/>
                            </Decorator_TechnologyUnlocked>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestPopulationCravers" Category="MajorQuest" SubCategory="Sophons">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>

            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$CraversSystem">
                <Any>
                    <From Source="$CurrentEmpire.$ColonizedStarSystems">
                        <Where>
                            <InterpreterPrerequisite Flags="Prerequisite">Property(Target, @'ClassColonizedStarSystem/ClassPopulationStarSystemAffinityCravers', PopulationCount) ge 2</InterpreterPrerequisite>
                        </Where>
                    </From>
                </Any>
            </Var>
            <Var VarName="$CraversSystemLocation">
                <From Source="$CraversSystem.$StarSystem"/>
            </Var>

            <Var VarName="$Cravers" StringValue="AffinityCravers"/>
            <Var VarName="$Amount" IntValue="4"/>

        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step2_1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_HasPopulationAmount>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinimumAmount VarName="$Amount"/>
                                    <Input_Location VarName="$CraversSystemLocation"/>
                                    <Input_PopulationAffinity VarName="$Cravers"/>
                                </Condition_HasPopulationAmount>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                    <Reward Droplist="DroplistPrestige" Picks="1"/>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestSortSystems" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$HomeSystem">
                <From Source="$Empire.$HomeStarSystem"/>
            </Var>
            <Var VarName="$Systems">
                <From Source="$HomeSystem.$Constellation.$StarSystems">
                    <OrderBy>
                        <SortSystemByDistance OriginVarName="$HomeSystem" SortBy="Farthest" MinimumDistance="10" MaximumDistance="15" MinimumCandidateCount="3"/>
                    </OrderBy>
                </From>
            </Var>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestFilterSystems" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$HomeSystem">
                <From Source="$Empire.$HomeColonizedStarSystem"/>
            </Var>
            <Var VarName="$System">
                <Any>
                    <From Source="$Constellations.$StarSystems">
                        <Where>
                            <FilterSystemByDistance OriginVarName="$HomeSystem" MinDistance="50"/>
                        </Where>
                    </From>
                </Any>
            </Var>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestBuildAndDestroy" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$HomeSystem">
                <From Source="$Empire.$HomeColonizedStarSystem"/>
            </Var>
            <Var VarName="$Ship"/>
            <Var VarName="$ShipRoleName" StringValue="ShipRoleExploration"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <!--<Decorator_ShipConstructed>
                                <Input_RoleName VarName="$ShipRoleName"/>
                                <Output_Ship VarName="$Ship"/>
                            </Decorator_ShipConstructed>
                            <Decorator_ShipDestroyed>
                                <Input_Ship VarName="$Ship"/>
                            </Decorator_ShipDestroyed>-->
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestDodo" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$Duration" IntValue="3"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Parallel CompletionPolicy="First">
                            <Sequence>
                                <Decorator_Wait>
                                    <Input_WaitDuration VarName="$Duration"/>
                                </Decorator_Wait>
                                <Action_Fail/>
                            </Sequence>
                            <Sequence>
                                <Decorator_ShipConstructed/>
                            </Sequence>
                        </Parallel>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestFilterSystems2" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$Empire">
                <From Source="$Empire"/>
            </Var>
            <DroplistVar VarName="$FleetToSpawn" Droplist="TestFleetDroplist"/>
            <Var VarName="$UncolonizedSystem">
                <Any>
                    <From Source="$Constellations.$StarSystems">
                        <Where>
                            <FilterSystemByStatus ColonizationState="NotColonized"/>
                        </Where>
                    </From>
                </Any>
            </Var>
            <Var VarName="$ColonizedSystem">
                <Any>
                    <From Source="$Constellations.$StarSystems">
                        <Where>
                            <FilterSystemByStatus ColonizationState="Colonized"/>
                        </Where>
                    </From>
                </Any>
            </Var>
            <Var VarName="$OwnedSystem">
                <Any>
                    <From Source="$Constellations.$StarSystems">
                        <Where>
                            <FilterSystemByStatus OwnerVarName="$Empire"/>
                        </Where>
                    </From>
                </Any>
            </Var>
            <Var VarName="$NotOwnedSystem">
                <Any>
                    <From Source="$Constellations.$StarSystems">
                        <Where>
                            <FilterSystemByStatus NonOwnerVarName="$Empire" ColonizationState="Colonized"/>
                        </Where>
                    </From>
                </Any>
            </Var>
            <Var VarName="$Outpost">
                <Any>
                    <From Source="$Constellations.$StarSystems">
                        <Where>
                            <FilterSystemByStatus StarSystemState="Outpost"/>
                        </Where>
                    </From>
                </Any>
            </Var>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <StartActions>
                        <Action_SpawnFleets>
                            <Input_Empire VarName="$Empire"/>
                            <Input_Locations VarName="$UncolonizedSystem"/>
                            <Input_DroppableFleet VarName="$FleetToSpawn"/>
                        </Action_SpawnFleets>
                        <Action_SpawnFleets>
                            <Input_Empire VarName="$Empire"/>
                            <Input_Locations VarName="$ColonizedSystem"/>
                            <Input_DroppableFleet VarName="$FleetToSpawn"/>
                        </Action_SpawnFleets>
                        <Action_SpawnFleets>
                            <Input_Empire VarName="$Empire"/>
                            <Input_Locations VarName="$OwnedSystem"/>
                            <Input_DroppableFleet VarName="$FleetToSpawn"/>
                        </Action_SpawnFleets>
                        <Action_SpawnFleets>
                            <Input_Empire VarName="$Empire"/>
                            <Input_Locations VarName="$NotOwnedSystem"/>
                            <Input_DroppableFleet VarName="$FleetToSpawn"/>
                        </Action_SpawnFleets>
                    </StartActions>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestGuard" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$FleetGUID"/>
            <Var VarName="$Empire">
                <From Source="$Empire"/>
            </Var>
            <DroplistVar VarName="$FleetToSpawn" Droplist="TestFleetDroplist"/>
            <Var VarName="$OwnedSystem">
                <Any>
                    <From Source="$Constellations.$StarSystems">
                        <Where>
                            <FilterSystemByStatus OwnerVarName="$Empire"/>
                        </Where>
                    </From>
                </Any>
            </Var>
            <Var VarName="$NotOwnedSystem">
                <Any>
                    <From Source="$Constellations.$StarSystems">
                        <Where>
                            <FilterSystemByStatus NonOwnerVarName="$Empire" ColonizationState="Colonized"/>
                        </Where>
                    </From>
                </Any>
            </Var>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <StartActions>
                        <Action_SpawnFleets>
                            <Input_Empire VarName="$Empire"/>
                            <Input_Locations VarName="$OwnedSystem"/>
                            <Input_DroppableFleet VarName="$FleetToSpawn"/>
                            <Output_FleetGUIDs VarName="$FleetGUID"/>
                        </Action_SpawnFleets>
                    </StartActions>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_GuardNode>
                                <Input_Empire VarName="$Empire"/>
                                <Input_Node VarName="$OwnedSystem"/>
                                <Input_FleetGUID VarName="$FleetGUID"/>
                            </Decorator_GuardNode>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestIntercept" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$OtherEmpire">
                <Any>
                    <From Source="$Empires">
                        <Where>
                            <IsNot EntityVarName="$CurrentEmpire"/>
                        </Where>
                    </From>
                </Any>
            </Var>
            <Var VarName="$HomeSystem">
                <From Source="$Empire.$HomeStarSystem"/>
            </Var>
            <Var VarName="$Neighbour">
                <Any>
                    <From Source="$Empire.$HomeStarSystem.$Neighbours"/>
                </Any>
            </Var>
            <DroplistVar VarName="$FleetToSpawn" Droplist="TestFleetDroplist"/>
            <Var VarName="$FleetGUID"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <StartActions>
                        <Action_SpawnFleets>
                            <Input_Empire VarName="$OtherEmpire"/>
                            <Input_Locations VarName="$Neighbour"/>
                            <Input_DroppableFleet VarName="$FleetToSpawn"/>
                            <Output_FleetGUIDs VarName="$FleetGUID"/>
                        </Action_SpawnFleets>
                    </StartActions>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_Intercept>
                                <Input_VictimFleetGUID VarName="$FleetGUID"/>
                            </Decorator_Intercept>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestIntercept2" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$OtherEmpire">
                <Any>
                    <From Source="$MajorEmpires">
                        <Where>
                            <IsNot EntityVarName="$CurrentEmpire"/>
                        </Where>
                    </From>
                </Any>
            </Var>
            <Var VarName="$HomeSystem">
                <From Source="$Empire.$HomeStarSystem"/>
            </Var>
            <Var VarName="$Neighbour">
                <Any>
                    <From Source="$Empire.$HomeStarSystem.$Neighbours"/>
                </Any>
            </Var>
            <DroplistVar VarName="$FleetToSpawn" Droplist="TestFleetDroplist"/>
            <Var VarName="$FleetGUID"/>
            <Var VarName="$OutputFleetGUID"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <StartActions>
                        <Action_SpawnFleets>
                            <Input_Empire VarName="$OtherEmpire"/>
                            <Input_Locations VarName="$Neighbour"/>
                            <Input_DroppableFleet VarName="$FleetToSpawn"/>
                            <Output_FleetGUIDs VarName="$FleetGUID"/>
                        </Action_SpawnFleets>
                    </StartActions>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_Intercept>
                                <Input_VictimFleetGUID VarName="$FleetGUID"/>
                                <Output_VictimGUID VarName="$OutputFleetGUID"/>
                            </Decorator_Intercept>
                            <Action_DestroyFleets>
                                <Input_FleetGUIDs VarName="$OutputFleetGUID"/>
                            </Action_DestroyFleets>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestNeighbours" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$HomeSystem">
                <From Source="$Empire.$HomeStarSystem"/>
            </Var>
            <Var VarName="$Neighbours">
                <From Source="$Empire.$HomeStarSystem.$Neighbours"/>
            </Var>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_FleetDocked Initiator="OtherEmpires">
                                <Input_Systems VarName="$Neighbours"/>
                            </Decorator_FleetDocked>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestSWAG" Category="Test" SubCategory="Test">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$LocationEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$LocationHomeSystem">
                <From Source="$Empire.$HomeColonizedStarSystem"/>
            </Var>
            <Var VarName="$Amount01" IntValue="50000"/>
            <Var VarName="$Amount02" IntValue="5000"/>
            <Var VarName="$ResourceName01" StringValue="EmpireMoney"/>
            <Var VarName="$ResourceName02" StringValue="SystemInfluence"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <StartActions>
                        <Action_TransferResource>
                            <Input_Location VarName="$LocationEmpire"/>
                            <Input_ResourceName VarName="$ResourceName01"/>
                            <Input_Amount VarName="$Amount01"/>
                        </Action_TransferResource>
                        <Action_TransferResource>
                            <Input_Location VarName="$LocationHomeSystem"/>
                            <Input_ResourceName VarName="$ResourceName02"/>
                            <Input_Amount VarName="$Amount02"/>
                        </Action_TransferResource>
                    </StartActions>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestResourceNeed" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$LocationEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$LocationHomeSystem">
                <From Source="$Empire.$HomeColonizedStarSystem"/>
            </Var>
            <Var VarName="$Minimum" IntValue="500"/>
            <Var VarName="$ResourceName" StringValue="EmpireMoney"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_HasResource>
                                    <Input_Location VarName="$LocationEmpire"/>
                                    <Input_ResourceName VarName="$ResourceName"/>
                                    <Input_Minimum VarName="$Minimum"/>
                                </Condition_HasResource>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestHeroInFleet" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$Fleet">
                <First>
                    <From Source="$Empire.$Fleets"/>
                </First>
            </Var>
            <Var VarName="$HeroDefinition" StringValue="HeroSophons01"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_FleetHasHero>
                                    <Input_Fleet VarName="$Fleet"/>
                                    <Input_HeroDefinitionName VarName="$HeroDefinition"/>                                    
                                </Condition_FleetHasHero>                                
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestHangarSelection" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$Hangars">
                <From Source="$Empire.$ColonizedStarSystems.$Hangar">
                </From>
            </Var>
            <Var VarName="$HeroDefinition" StringValue="HeroSophons01"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestPopulationGain" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$HomeSystem">
                <From Source="$Empire.$HomeColonizedStarSystem">
                </From>
            </Var>
            <Var VarName="$PopulationAffinity" StringValue="AffinityCravers"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_PopulationGained>                                
                                <Input_Count>2</Input_Count>
                                <Input_ColonizedStarSystem VarName="$HomeSystem"/>
                            </Decorator_PopulationGained>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestInvasion" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$OtherEmpire">
                <Any>
                    <From Source="$MajorEmpires">
                        <Where>
                            <IsNot EntityVarName="$CurrentEmpire"/>
                        </Where>
                    </From>
                </Any>
            </Var>
            <Var VarName="$HomeSystem">
                <From Source="$OtherEmpire.$HomeColonizedStarSystem">
                </From>
            </Var>
            <Var VarName="$PopulationAffinity" StringValue="AffinityCravers"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_InvadeSystem>                                  
                                <Input_Count>2</Input_Count>
                            </Decorator_InvadeSystem>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestCategoryFilter1" Category="blublu" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextMulti ParticipantsVarName="$Players"/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"
                          Cooldown="0"/>

        <CategoryRepetitionRules NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"
                          Cooldown="0"/>

        <!-- filtering by subcategory is also possible
        <SubCategoryRepetitionRules NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"
                          Cooldown="0"/>
        -->

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$Players">
                <From Source="$Empires">
                    <Where>
                        <PathPrerequisite Flags="Prerequisite">../EmpireTypeMajor,AffinitySophons</PathPrerequisite>
                    </Where>
                </From>
            </Var>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestCategoryFilter2" Category="blublu" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextMulti ParticipantsVarName="$Players"/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <CategoryRepetitionRules NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$Players">
                <From Source="$Empires">
                    <Where>
                        <PathPrerequisite Flags="Prerequisite">../EmpireTypeMajor,AffinitySophons</PathPrerequisite>
                    </Where>
                </From>
            </Var>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestTechnologyUnlock" Category="" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="1"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="1"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <Any>
                    <From Source="$Empire"/>
                </Any>
            </Var>
            <Var VarName="$TechnologyName" StringValue="TechnologyDefinitionEmpireDevelopment4"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">../EmpireTypeMajor,AffinitySophons</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <StartActions>
                        <Action_UnlockTechnology>
                            <Input_Empire VarName="$CurrentEmpire"/>
                            <Input_TechnologyName VarName="$TechnologyName"/>
                        </Action_UnlockTechnology>
                    </StartActions>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestBattleEnded_FleetDestroyed" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$FleetToDestroy">
                <Any>
                    <From Source="$CurrentEmpire.$Fleets"/>
                </Any>
            </Var>
            <Var VarName="$FleetGUID">
                <From Source="$FleetToDestroy.$GUID"/>
            </Var>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">../EmpireTypeMajor,AffinitySophons</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BattleEnded Initiator="Empire">
                                <Condition_BattleEnded_FleetDestroyed>
                                    <Input_FleetGUIDs VarName="$FleetGUID"/>
                                </Condition_BattleEnded_FleetDestroyed>
                                <Input_Empire VarName="$CurrentEmpire"/>
                            </Decorator_BattleEnded>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestBlueprintReward" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="1"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="1"/>

        <!--============ VARIABLES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
                <Reward Droplist="TestBlueprintDroplist"/>
            </Step>
        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestModuleReward" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="1"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="1"/>

        <!--============ VARIABLES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
                <Reward Droplist="TestModuleDroplist"/>
            </Step>
        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestApplyDescriptor" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="1"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="1"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$Fleets">
                <From Source="$Empire.$Fleets"/>
            </Var>
            <Var VarName="$FleetGUIDs">
                <From Source="$Fleets.$GUID"/>
            </Var>
            <Var VarName="$DescriptorName" StringValue="EmpireTypeLesser"/>
            <!-- it does not make any sense, it is just for test purpose-->
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <StartActions>
                        <Action_ApplyDescriptor>
                            <Input_DescriptorName VarName="$DescriptorName"/>
                            <Input_TargetGUIDs VarName="$FleetGUIDs"/>
                        </Action_ApplyDescriptor>
                    </StartActions>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                            <Action_ApplyDescriptor Remove="true">
                                <Input_DescriptorName VarName="$DescriptorName"/>
                                <Input_Targets VarName="$Fleets"/>
                            </Action_ApplyDescriptor>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestSpawnHero" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="1"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="1"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$HeroDefinition" StringValue="HeroSophons01"/>
            <Var VarName="$HeroLevel" IntValue="4"/>
            <Var VarName="$GUID"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <StartActions>
                        <Action_SpawnHero>
                            <Input_Empire VarName="$CurrentEmpire"/>
                            <Input_HeroDefinition VarName="$HeroDefinition"/>
                            <Input_HeroLevel VarName="$HeroLevel"/>
                            <Output_HeroGUID VarName="$GUID"/>
                        </Action_SpawnHero>
                    </StartActions>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestHealFleet" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="1"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="1"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$RandomFleet">
                <Any>
                    <From Source="$Empire.$Fleets"/>
                </Any>
            </Var>
            <Var VarName="$HP" IntValue="-5"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <StartActions>
                        <Action_HealFleets>
                            <Input_Fleets VarName="$RandomFleet"/>
                            <Input_Amount VarName="$HP"/>
                        </Action_HealFleets>
                    </StartActions>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestAddExperienceToFleet" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="1"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="1"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$RandomFleet">
                <Any>
                    <From Source="$Empire.$Fleets"/>
                </Any>
            </Var>
            <Var VarName="$XP" IntValue="5"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <StartActions>
                        <Action_AddExperienceToFleets>
                            <Input_Fleets VarName="$RandomFleet"/>
                            <Input_Amount VarName="$XP"/>
                        </Action_AddExperienceToFleets>
                    </StartActions>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestTriggerPopulationEvent" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="1"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="1"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$HomeSystem">
                <Any>
                    <From Source="$Empire.$HomeColonizedStarSystem"/>
                </Any>
            </Var>
            <Var VarName="$EventName" StringValue="PopulationPoliticalEventSystemLevelUp"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <StartActions>
                        <Action_TriggerPopulationEvent>
                            <Input_Empire VarName="$CurrentEmpire"/>
                            <Input_Target VarName="$HomeSystem"/>
                            <Input_PopulationEventDefinition VarName="$EventName"/>
                        </Action_TriggerPopulationEvent>
                    </StartActions>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestEventActionDescription" Category="Event" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="1"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="1"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$HomeSystem">
                <Any>
                    <From Source="$Empire.$HomeColonizedStarSystem"/>
                </Any>
            </Var>
            <Var VarName="$RandomFleet">
                <Any>
                    <From Source="$Empire.$Fleets"/>
                </Any>
            </Var>
            <Var VarName="$XP" IntValue="5"/>
            <Var VarName="$HP1" IntValue="-5"/>
            <Var VarName="$HP2" IntValue="5"/>
            <Var VarName="$EventName" StringValue="PopulationPoliticalEventNarrative40"/>
            <Var VarName="$HeroDefinition" StringValue="HeroSophons01"/>
            <Var VarName="$DescriptorName" StringValue="QuestEffect02"/>
            <Var VarName="$TechnologyName" StringValue="TechnologyDefinitionEmpireDevelopment1"/>
            <Var VarName="$ConstructibleName" StringValue="StarSystemImprovementIndustry3"/>
            <Var VarName="$GUID"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                        <StartActions>
                            <Action_TriggerPopulationEvent LogAction="true">
                                <Input_Empire VarName="$CurrentEmpire"/>
                                <Input_Target VarName="$HomeSystem"/>
                                <Input_PopulationEventDefinition VarName="$EventName"/>
                            </Action_TriggerPopulationEvent>
                            <Action_AddExperienceToFleets LogAction="true">
                                <Input_Fleets VarName="$RandomFleet"/>
                                <Input_Amount VarName="$XP"/>
                            </Action_AddExperienceToFleets>
                            <Action_HealFleets LogAction="true">
                                <Input_Fleets VarName="$RandomFleet"/>
                                <Input_Amount VarName="$HP1"/>
                            </Action_HealFleets>
                            <Action_HealFleets LogAction="true">
                                <Input_Fleets VarName="$RandomFleet"/>
                                <Input_Amount VarName="$HP2"/>
                            </Action_HealFleets>
                            <Action_SpawnHero LogAction="true">
                                <Input_Empire VarName="$CurrentEmpire"/>
                                <Input_HeroDefinition VarName="$HeroDefinition"/>
                                <Output_HeroGUID VarName="$GUID"/>
                            </Action_SpawnHero>
                            <Action_ApplyDescriptor LogAction="true">
                                <Input_DescriptorName VarName="$DescriptorName"/>
                                <Input_Targets VarName="$HomeSystem"/>
                            </Action_ApplyDescriptor>
                            <Action_UnlockTechnology LogAction="true">
                                <Input_Empire VarName="$CurrentEmpire"/>
                                <Input_TechnologyName VarName="$TechnologyName"/>
                            </Action_UnlockTechnology>
                            <Action_UnlockTechnology LogAction="true">
                                <Input_Empire VarName="$CurrentEmpire"/>
                                <Input_TechnologyName VarName="$TechnologyName"/>
                                <Input_ConstructibleName VarName="$ConstructibleName"/>
                            </Action_UnlockTechnology>
                        </StartActions>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestCreateFleetMission" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="1"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="1"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$OtherEmpires">
                <From Source="$MajorEmpires">
                    <Where>
                        <IsNot EntityVarName="$CurrentEmpire"/>
                    </Where>
                </From>
            </Var>
            <Var VarName="$HomeSystem">
                <Any>
                    <From Source="$Empire.$HomeStarSystem"/>
                </Any>
            </Var>
            <Var VarName="$IAEmpire">
                <From Source="$LesserEmpire"/>
            </Var>
            <DroplistVar VarName="$FleetToSpawn" Droplist="DroplistPirateAttacker01"/>
            <Var VarName="$FleetMissionDefinitionName" StringValue="Roam"/>
            <Var VarName="$FleetGUID"/>
            <Var VarName="$MissionGUID"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <StartActions>
                        <Action_SpawnFleets>
                            <Input_Empire VarName="$IAEmpire"/>
                            <Input_Locations VarName="$HomeSystem"/>
                            <Input_DroppableFleet VarName="$FleetToSpawn"/>
                            <Output_FleetGUIDs VarName="$FleetGUID"/>
                        </Action_SpawnFleets>
                        <Action_CreateFleetMissions>
                            <Input_MissionDefinitionName VarName="$FleetMissionDefinitionName"/>
                            <Input_FleetGUIDs VarName="$FleetGUID"/>
							<Input_TargetEmpires VarName="$CurrentEmpire"/>
							<Input_Targets VarName="$HomeSystem"/>
                            <Output_MissionGUIDs VarName="$MissionGUID"/>
                        </Action_CreateFleetMissions>
                    </StartActions>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestEvent_Instant" Category="Test" SubCategory="" IsInstant="true">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="1"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="1"/>

        <!--============ VARIABLES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestGetFleetFromEvent" Category="Test" SubCategory="Test">

        <!--============ TAGS ============-->
        <Tags>
            <!--EventCuriosityDiscoveredWithFleet-->
        </Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$Fleet">
                <From Source="$GameEvent.$Fleet"/>
            </Var>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestRevealConstellation" Category="Test" SubCategory="Test" IsInstant="true">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>


        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$Systems">
                <From Source="$CurrentEmpire.$HomeStarSystem.$Constellation.$StarSystems"/>
            </Var>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <StartActions>
                        <Action_RevealEntities NewExplorationState="Revealed">
                            <Input_Empires VarName="$CurrentEmpire"/>
                            <Input_TargetSystems VarName="$Systems"/>
                        </Action_RevealEntities>
                    </StartActions>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestSpawnAnomaly" Category="Test" SubCategory="Test" IsInstant="true">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>


        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$Planets">
                <From Source="$CurrentEmpire.$HomeStarSystem.$Planets"/>
            </Var>
            <Var VarName="$AnomalyDefinitionName" StringValue="PlanetAnomaly01"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <StartActions>
                        <Action_SpawnAnomaly>
                            <Input_Planets VarName="$Planets"/>
                            <Input_AnomalyDefinition VarName="$AnomalyDefinitionName"/>
                        </Action_SpawnAnomaly>
                    </StartActions>
                    <Objective Name="Step1_Objective1">
                        <Sequence/>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestConditionFleetDocked" Category="Test" SubCategory="Test">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>


        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$HomeSystem">
                <From Source="$CurrentEmpire.$HomeStarSystem"/>
            </Var>
            <Var VarName="$Fleet">
                <Any>
                    <From Source="$CurrentEmpire.$Fleets"/>
                </Any>
            </Var>
            <Var VarName="$FleetGUID">
                <From Source="$Fleet.$GUID"/>
            </Var>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_IsFleetDockedOnNode>
                                    <Input_FleetGUID VarName="$FleetGUID"/>
                                    <Input_Systems VarName="$HomeSystem"/>
                                </Condition_IsFleetDockedOnNode>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestConditionMinorFactionRelation" Category="Test" SubCategory="Test">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>


        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$NumberOfMinors" IntValue="2"/>
            <Var VarName="$AllowedState1" StringValue="DiplomaticRelationStateMinorFriendly"/>
            <Var VarName="$AllowedState2" StringValue="DiplomaticRelationStateMinorIntegrated"/>
            <Var VarName="$MinimumRelationPoints" IntValue="50"/>
            <Var VarName="$MaximumRelationPoints" IntValue="1000"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_MinorFactionRelationship>
                                    <Input_MajorEmpire VarName="$CurrentEmpire"/>
                                    <Input_NumberOfMinorFactions VarName="$NumberOfMinors"/>
                                    <Input_DiplomaticRelationState VarName="$AllowedState1"/>
                                    <Input_DiplomaticRelationState VarName="$AllowedState2"/>
                                    <Input_MinimumRelationPoints VarName="$MinimumRelationPoints"/>
                                    <Input_MaximumRelationPoints VarName="$MaximumRelationPoints"/>
                                </Condition_MinorFactionRelationship>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestAssignHeroToFleet" Category="Test" SubCategory="Test" IsInstant="true">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>


        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$HomeSystem">
                <From Source="$CurrentEmpire.$HomeStarSystem"/>
            </Var>
            <DroplistVar VarName="$FleetToSpawn" Droplist="TestFleetDroplist"/>
            <Var VarName="$HeroDefinitionName" StringValue="HeroSophons01"/>
            <Var VarName="$FleetGUID"/>
            <Var VarName="$HeroGUID"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <StartActions>
                        <!-- NOTE: Do not do this like this. Include the hero in the Droplist, like in TestEmptyFleetDroplistWithHero! -->
                        <!-- Example of good behaviour for spawning a fleet with a hero is present in TestAssignHeroToFleet2 -->
                        <Action_SpawnFleets>
                            <Input_Empire VarName="$CurrentEmpire"/>
                            <Input_Locations VarName="$HomeSystem"/>
                            <Input_DroppableFleet VarName="$FleetToSpawn"/>
                            <Output_FleetGUIDs VarName="$FleetGUID"/>
                        </Action_SpawnFleets>
                        <Action_SpawnHero>
                            <Input_Empire VarName="$CurrentEmpire"/>
                            <Input_HeroDefinition VarName="$HeroDefinitionName"/>
                            <Output_HeroGUID VarName="$HeroGUID"/>
                        </Action_SpawnHero>
                        <Action_AssignHero>
                            <Input_Empire VarName="$CurrentEmpire"/>
                            <Input_HeroGUID VarName="$HeroGUID"/>
                            <Input_LocationGUID VarName="$FleetGUID"/>
                        </Action_AssignHero>
                    </StartActions>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestAssignHeroToFleet2" Category="Test" SubCategory="Test" IsInstant="true">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>


        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$HomeSystem">
                <From Source="$CurrentEmpire.$HomeStarSystem"/>
            </Var>
            <DroplistVar VarName="$FleetToSpawn" Droplist="TestEmptyFleetDroplistWithHero"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <StartActions>
                        <Action_SpawnFleets>
                            <Input_Empire VarName="$CurrentEmpire"/>
                            <Input_Locations VarName="$HomeSystem"/>
                            <Input_DroppableFleet VarName="$FleetToSpawn"/>
                        </Action_SpawnFleets>
                    </StartActions>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestAssignHeroToSystem" Category="Test" SubCategory="Test" IsInstant="true">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>


        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$HomeColonizedSystem">
                <From Source="$CurrentEmpire.$HomeColonizedStarSystem"/>
            </Var>
            <Var VarName="$HomeColonizedSystemGUID">
                <From Source="$HomeColonizedSystem.$GUID"/>
            </Var>
            <Var VarName="$HeroDefinitionName" StringValue="HeroSophons01"/>
            <Var VarName="$HeroGUID"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <StartActions>
                        <Action_SpawnHero>
                            <Input_Empire VarName="$CurrentEmpire"/>
                            <Input_HeroDefinition VarName="$HeroDefinitionName"/>
                            <Output_HeroGUID VarName="$HeroGUID"/>
                        </Action_SpawnHero>
                        <Action_AssignHero>
                            <Input_Empire VarName="$CurrentEmpire"/>
                            <Input_HeroGUID VarName="$HeroGUID"/>
                            <Input_LocationGUID VarName="$HomeColonizedSystemGUID"/>
                        </Action_AssignHero>
                    </StartActions>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestGovernmentChanged" Category="Test" SubCategory="Test">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>


        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$GovernmentType" StringValue="GovernmentAnarchy"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_GovernmentChanged Initiator="Empire">
                                <!-- redundant check here, just to show how to use condition -->
                                <Condition_GovernmentType>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_GovernmentType VarName="$GovernmentType"/>
                                </Condition_GovernmentType>
                                <Input_GovernmentType VarName="$GovernmentType"/>
                            </Decorator_GovernmentChanged>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestLaw" Category="Test" SubCategory="Test">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>


        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$Politics" StringValue="Politics02"/>
            <Var VarName="$RequiredSupport" IntValue="1"/>
            <Var VarName="$MinimumAmount" IntValue="1"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_LawActivated>
                                <Condition_HasLaws>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_Politics VarName="$Politics"/>
                                    <Input_MinimumAmount VarName="$MinimumAmount"/>
                                </Condition_HasLaws>
                                <Input_Politics VarName="$Politics"/>
                                <Input_RequiredSupport VarName="$RequiredSupport"/>
                            </Decorator_LawActivated>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestSenate" Category="Test" SubCategory="Test">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>


        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$NumberOfSenators" IntValue="1"/>
            <Var VarName="$NumberOfPolitics" IntValue="1"/>
            <Var VarName="$Politics" StringValue="Politics02"/>
            <Var VarName="$MinimumScore" IntValue="0"/>
            <Var VarName="$MaximumScore" IntValue="100"/>
            <Var VarName="$NumberOfRepresentatives" IntValue="1"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_CheckSenateComposition InvertPoliticsCheck="false">
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_NumberOfPolitics VarName="$NumberOfPolitics"/>
                                    <Input_NumberOfSenators VarName="$NumberOfSenators"/>
                                    <Input_Politics VarName="$Politics"/>
                                    <Input_MinimumScore VarName="$MinimumScore"/>
                                    <Input_MaximumScore VarName="$MaximumScore"/>
                                    <Input_NumberOfRepresentatives VarName="$NumberOfRepresentatives"/>
                                </Condition_CheckSenateComposition>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestDiplomaticRelation" Category="Test" SubCategory="Test">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>


        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$OtherEmpire"/>
            <Var VarName="$DiplomaticRelationStateName"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_DiplomaticRelationChanged>
                                <Condition_CheckDiplomaticRelation>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_OtherEmpire VarName="$OtherEmpire"/>
                                    <Input_DiplomaticRelationState VarName="$DiplomaticRelationStateName"/>
                                </Condition_CheckDiplomaticRelation>
                                <Output_OtherEmpire VarName="$OtherEmpire"/>
                                <Output_DiplomaticRelationState VarName="$DiplomaticRelationStateName"/>
                            </Decorator_DiplomaticRelationChanged>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestShipStats" Category="Test" SubCategory="Test">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>


        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$Ships">
                <From Source="$Empire.$Fleets.$Ships"/>
            </Var>
            <Var VarName="$MinimumAmount" IntValue="1"/>
            <Var VarName="$MinimumAttack" IntValue="1"/>
            <Var VarName="$MinimumDefense" IntValue="1"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_ShipStats>
                                    <Input_ShipList VarName="$Ships"/>
                                    <Input_MinimumAmount VarName="$MinimumAmount"/>
                                    <Input_MinimumOffensiveMilitaryPower VarName="$MinimumAttack"/>
                                    <Input_MinimumDefensiveMilitaryPower VarName="$MinimumDefense"/>
                                </Condition_ShipStats>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestConditionHasHeroes" Category="Test" SubCategory="Test">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>


        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$MinimumAmount" IntValue="1"/>
            <Var VarName="$MinimumLevel" IntValue="1"/>
            <Var VarName="$HomeSystem">
                <First>
                    <From Source="$CurrentEmpire.$HomeStarSystem"/>
                </First>
            </Var>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_HasHeroes HeroAssignationFilter="DontCare">
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinimumAmount VarName="$MinimumAmount"/>
                                    <Input_MinimumLevel VarName="$MinimumLevel"/>
                                    <Input_Locations VarName="$HomeSystem"/>
                                </Condition_HasHeroes>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestConditionPressure" Category="Test" SubCategory="Test">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>


        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$OtherEmpires">
                <From Source="$MajorEmpires">
                    <Where>
                        <IsNot EntityVarName="$CurrentEmpire"/>
                    </Where>
                </From>
            </Var>
            <Var VarName="$MinimumAmount" IntValue="1"/>
            <Var VarName="$MinimumPressure" IntValue="0"/>
            <Var VarName="$MaximumPressure" IntValue="100"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_Pressure>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinimumAmount VarName="$MinimumAmount"/>
                                    <Input_MinimumPressureValue VarName="$MinimumPressure"/>
                                    <Input_TargetEmpires VarName="$OtherEmpires"/>
                                    <Input_MaximumPressureValue VarName="$MaximumPressure"/>
                                </Condition_Pressure>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestDiplomaticContract" Category="Test" SubCategory="Test">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>


        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$OtherEmpires">
                <From Source="$MajorEmpires">
                    <Where>
                        <IsNot EntityVarName="$CurrentEmpire"/>
                    </Where>
                </From>
            </Var>
            <Var VarName="$OtherEmpire">
                <First>
                    <From Source="$OtherEmpires"/>
                </First>
            </Var>
            <Var VarName="$MinimumAmount" IntValue="1"/>
            <Var VarName="$Term" StringValue="DeclareWar"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_DiplomaticContractStateChanged ContractState="Signed" Initiator="Empire">
                                <Condition_DiplomaticContracts ContractState="Signed">
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinimumAmount VarName="$MinimumAmount"/>
                                    <Input_TargetEmpires VarName="$OtherEmpires"/>
                                    <Input_SpecificTerm VarName="$Term"/>
                                </Condition_DiplomaticContracts>
                                <Input_Empire VarName="$CurrentEmpire"/>
                                <Input_OtherEmpire VarName="$OtherEmpire"/>
                            </Decorator_DiplomaticContractStateChanged>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestFilterByPoliticsName" Category="Test" SubCategory="Test" IsInstant="true">

        <!--============ TAGS ============-->
        <Tags>
            <!--EventPoliticsUnlocked-->
        </Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$WantedPoliticsName" StringValue="Politics01"/>
            <Var VarName="$PoliticsName">
                <From Source="$GameEvent.$PoliticsName">
                    <Where>
                        <FilterByStringValue StringValueVarName="$WantedPoliticsName"/>
                    </Where>
                </From>
            </Var>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestLuxReward" Category="Test" SubCategory="Test">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
                <Reward Droplist="testLuxDroplist"/>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestNameChanged" Category="Test" SubCategory="Test">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$HomeSystem">
                <From Source="$Empire.$HomeStarSystem"/>
            </Var>
            <LocalizationVar LocalizationKey="$HomeSystemName" Source="$HomeSystem"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_NameChanged>
                                <Input_Entities VarName="$HomeSystem"/>
                            </Decorator_NameChanged>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestManpowerRepartition" Category="Test" SubCategory="Test">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$Minimum" IntValue="10"/>
            <Var VarName="$Maximum" IntValue="100"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_ManpowerDistribution>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinimumInfantryPercent VarName="$Minimum"/>
                                    <Input_MaximumInfantryPercent VarName="$Maximum"/>
                                    <Input_MinimumTankPercent VarName="$Minimum"/>
                                    <Input_MaximumTankPercent VarName="$Maximum"/>
                                    <Input_MinimumPlanePercent VarName="$Minimum"/>
                                    <Input_MaximumPlanePercent VarName="$Maximum"/>
                                </Condition_ManpowerDistribution>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestConditionHasManpower" Category="Test" SubCategory="Test">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$HomeSystem">
                <From Source="$CurrentEmpire.$HomeColonizedStarSystem"/>
            </Var>
            <Var VarName="$Ship">
                <From Source="$Empire.$Fleets.$Ships"/>
            </Var>
            <Var VarName="$Minimum" IntValue="0"/>
            <Var VarName="$Maximum" IntValue="1000"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_HasManpower>
                                    <!-- the location can be an empire, a colonized star system, or a ship -->
                                    <!--<Input_Location VarName="$CurrentEmpire"/>-->
                                    <!--<Input_Location VarName="$HomeSystem"/>-->
                                    <Input_Location VarName="$Ship"/>
                                    <Input_MinimumAmount VarName="$Minimum"/>
                                    <Input_MaximumAmount VarName="$Maximum"/>
                                </Condition_HasManpower>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestSpecialNodes" Category="Test" SubCategory="Test">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$TargetEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$TargetEmpires">
                <From Source="$Empires"/>
            </Var>
            <Var VarName="$DescriptorName" StringValue="CanSeeSpecialNodes"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Action_ApplyDescriptor>
                                <Input_DescriptorName VarName="$DescriptorName"/>
                                <Input_Targets VarName="$TargetEmpires"/>
                            </Action_ApplyDescriptor>
                            <Action_RefreshGameNodesVisibility/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestSpecialNodes2" Category="Test" SubCategory="" MinimumTurn="2">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>


        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$One" IntValue="1"/>
            <Var VarName="$Constellation">
                <First>
                    <From Source="$Constellations"/>
                </First>
            </Var>
            <Var VarName="$SpecialNodes">
                <From Source="$Constellation.$SpecialNodes">
                </From>
            </Var>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">false</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1" StartValue="0" EndValue="$One">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_HasSpecialNodes>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinimumAmount VarName="$One"/>
                                    <Input_Nodes VarName="$SpecialNodes"/>
                                </Condition_HasSpecialNodes>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestSolo" Category="MainQuest" SubCategory="Main">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <!--============ VARIABLES ============-->

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <Choice DefaultChoiceIndex="0" IsVote="false">
                    <ChoiceItem ObjectiveSetIndex="0"/>
                    <ChoiceItem ObjectiveSetIndex="1"/>
                    <ChoiceItem ObjectiveSetIndex="2"/>
                </Choice>
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_TechnologyUnlocked Initiator="Empire"/>
                        </Sequence>
                    </Objective>
                    <Reward Droplist="testDroplist1" Picks="1"/>
                    <Reward LocalizationKey="%Cocolasticot"/>
                </ObjectiveSet>
                <ObjectiveSet>
                    <Objective Name="Step1_Objective2">
                        <Sequence>
                            <Decorator_TechnologyUnlocked Initiator="Empire"/>
                        </Sequence>
                    </Objective>
                    <Reward Droplist="testDroplist5" Picks="1"/>
                </ObjectiveSet>
                <ObjectiveSet>
                    <Objective Name="Step1_Objective3">
                        <Sequence>
                            <Decorator_TechnologyUnlocked Initiator="Empire"/>
                        </Sequence>
                    </Objective>
                    <Reward Droplist="testDroplist0" Picks="1"/>
                </ObjectiveSet>
            </Step>
        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestTeamQuestWithPreSelection" Category="Test" SubCategory="Test">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextMulti ParticipantsVarName="$Players">
            <Distribution Type="Teams">
                <Team Name="LesGentils" MembersVarName="$Team1"/>
                <Team Name="LesMechangs" MembersVarName="$Team2"/>
            </Distribution>
        </QuestContextMulti>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->

        <Vars>
            <Var VarName="$Players">
                <From Source="$MajorEmpires">
                    <Where>
                        <PathPrerequisite>ClassEmpire</PathPrerequisite>
                    </Where>
                </From>
            </Var>
            <Var VarName="$Team1">
                <From Source="$Players">
                    <Where>
                        <PathPrerequisite>ClassEmpire,AffinitySophons</PathPrerequisite>
                    </Where>
                </From>
            </Var>
            <Var VarName="$Team2">
                <From Source="$Players">
                    <Where>
                        <PathPrerequisite>ClassEmpire,!AffinitySophons</PathPrerequisite>
                    </Where>
                </From>
            </Var>

            <Var VarName="$IAEmpire">
                <From Source="$LesserEmpire"/>
            </Var>

            <Var VarName="$RandomSystem">
                <Any>
                    <From Source="$Constellations.$StarSystems"/>
                </Any>
            </Var>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Participants)">
            <PathPrerequisite>ClassEmpire</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <Vars>
                    <DroplistVar VarName="$FleetToSpawn01" Droplist="CraversShip01"/>
                    <Var VarName="$SpawnedFleetGUID"/>
                </Vars>

                <StartActions>
                    <Action_SpawnFleets>
                        <Input_Empire VarName="$IAEmpire"/>
                        <Input_Locations VarName="$RandomSystem"/>
                        <Input_DroppableFleet VarName="$FleetToSpawn01"/>
                        <Output_FleetGUIDs VarName="$SpawnedFleetGUID"/>
                    </Action_SpawnFleets>
                </StartActions>

                <ObjectiveSet TeamName="LesGentils">
                    <Vars>
                        <Var VarName="$Fleets">
                            <From Source="$Team.$Fleets"/>
                        </Var>
                        <Var VarName="$Amount" IntValue="10"/>
                    </Vars>

                    <StartActions>
                        <Action_HealFleets>
                            <Input_Fleets VarName="$Fleets"/>
                            <Input_Amount VarName="$Amount"/>
                        </Action_HealFleets>
                    </StartActions>

                    <Objective Name="Step1_Objective1">
                        <Loop Count="2">
                            <Decorator_BeginTurn/>
                        </Loop>
                    </Objective>

                    <Reward Droplist="DroplistPrestige" Picks="1"/>
                </ObjectiveSet>

                <ObjectiveSet TeamName="LesMechangs">

                    <Objective Name="Step1_Objective2">
                        <Sequence>
                            <Decorator_ShipDestroyed>
                                <Input_ShipGUID VarName="$SpawnedFleetGUID"/>
                            </Decorator_ShipDestroyed>
                        </Sequence>
                    </Objective>

                    <Reward Droplist="DroplistPrestige" Picks="1"/>
                </ObjectiveSet>

                <Reward Droplist="testDroplist1" Picks="1"/>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestTeamQuestWithTeamChoice" Category="Test" SubCategory="Test">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextMulti ParticipantsVarName="$Players">
            <Distribution Type="Teams">
                <Team Name="LesGentils" MembersVarName="$Team1"/>
                <Team Name="LesMechangs" MembersVarName="$Team2"/>
            </Distribution>
        </QuestContextMulti>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->

        <Vars>
            <Var VarName="$Players">
                <From Source="$MajorEmpires">
                    <Where>
                        <PathPrerequisite>...</PathPrerequisite>
                    </Where>
                </From>
            </Var>
            <Var VarName="$Team1"/>
            <Var VarName="$Team2"/>

            <Var VarName="$IAEmpire">
                <From Source="$LesserEmpire"/>
            </Var>

            <Var VarName="$RandomSystem">
                <Any>
                    <From Source="$Constellations.$StarSystems"/>
                </Any>
            </Var>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Participants)">
            <PathPrerequisite>ClassEmpire</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">

                <Choice DefaultChoiceIndex="0" IsVote="false">
                    <ChoiceItem ObjectiveSetIndex="0"/>
                    <ChoiceItem ObjectiveSetIndex="1"/>
                </Choice>

                <Vars>
                    <DroplistVar VarName="$FleetToSpawn01" Droplist="CraversShip01"/>
                    <Var VarName="$SpawnedFleetGUID"/>
                </Vars>

                <StartActions>
                    <Action_SpawnFleets>
                        <Input_Empire VarName="$IAEmpire"/>
                        <Input_Locations VarName="$RandomSystem"/>
                        <Input_DroppableFleet VarName="$FleetToSpawn01"/>
                        <Output_FleetGUIDs VarName="$SpawnedFleetGUID"/>
                    </Action_SpawnFleets>
                </StartActions>

                <ObjectiveSet TeamName="LesGentils">
                    <Vars>
                        <Var VarName="$Fleets">
                            <From Source="$Team.$Fleets"/>
                        </Var>
                        <Var VarName="$Amount" IntValue="10"/>
                    </Vars>

                    <StartActions>
                        <Action_HealFleets>
                            <Input_Fleets VarName="$Fleets"/>
                            <Input_Amount VarName="$Amount"/>
                        </Action_HealFleets>
                    </StartActions>

                    <Objective Name="Step1_Objective1">
                        <Loop Count="2">
                            <Decorator_BeginTurn/>
                        </Loop>
                    </Objective>

                    <Reward Droplist="testDroplist5" Picks="1"/>
                </ObjectiveSet>

                <ObjectiveSet TeamName="LesMechangs">

                    <Objective Name="Step1_Objective2">
                        <Sequence>
                            <Decorator_ShipDestroyed>
                                <Input_ShipGUID VarName="$SpawnedFleetGUID"/>
                            </Decorator_ShipDestroyed>
                        </Sequence>
                    </Objective>

                    <Reward Droplist="testDroplist5" Picks="1"/>
                </ObjectiveSet>

                <Reward Droplist="testDroplist1" Picks="1"/>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestCoopWithVote" Category="Test" SubCategory="Test">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextMulti ParticipantsVarName="$Players"/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$Players">
                <From Source="$MajorEmpires"/>
            </Var>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Participants)">
            <PathPrerequisite>ClassEmpire</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <Choice DefaultChoiceIndex="0" IsVote="true">
                    <ChoiceItem ObjectiveSetIndex="0"/>
                    <ChoiceItem ObjectiveSetIndex="1"/>
                </Choice>

                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Loop Count="2">
                            <Decorator_BeginTurn/>
                        </Loop>
                    </Objective>

                    <Reward Droplist="DroplistPrestige" Picks="1"/>
                </ObjectiveSet>

                <ObjectiveSet>
                    <Objective Name="Step1_Objective2">
                        <Sequence>
                            <Decorator_TechnologyUnlocked Initiator="Team"/>
                        </Sequence>
                    </Objective>
                    <Reward Droplist="testDroplist4" Picks="1"/>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestCompetitive" Category="Test" SubCategory="Test">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextMulti>
            <Distribution Type="FreeForAll"/>
        </QuestContextMulti>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Participants)">
            <PathPrerequisite>ClassEmpire</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_TechnologyUnlocked Initiator="Team"/>
                        </Sequence>
                    </Objective>
                    <Reward Droplist="DroplistPrestige" Picks="1"/>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestPodium" Category="Test" SubCategory="Test">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextMulti/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Participants)">
            <PathPrerequisite>ClassEmpire</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1" StartValue="0" EndValue="6">
                        <Loop Count="6">
                            <Decorator_TechnologyUnlocked Initiator="Team" ProgressionIncrement="1"/>
                        </Loop>
                    </Objective>
                    <PodiumReward MinimumParticipation="0.1">
                        <Reward Droplist="testDroplist5" Picks="1"/>
                        <Reward Droplist="testDroplist4" Picks="1"/>
                        <Reward Droplist="testDroplist1" Picks="1"/>
                    </PodiumReward>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestEventCoop" Category="Event" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextMulti ParticipantsVarName="$Players"/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$Players">
                <From Source="$MajorEmpires"/>
            </Var>
            <Var VarName="$EffectTarget1">
                <From Source="$Players.$HomeStarSystem"/>
            </Var>
            <Var VarName="$EffectTarget2">
                <From Source="$Galaxy"/>
            </Var>
            <Var VarName="$RandomConstellation">
                <Any>
                    <From Source="$Constellations"/>
                </Any>
            </Var>
            <Var VarName="$EffectTarget3">
                <Limit Clamp="true" StartBy="First" LimitMin="0" LimitMax="2">
                    <From Source="$RandomConstellation.$StarSystems"/>
                </Limit>
            </Var>
            <Var VarName="$EffectGUID"/>

            <Var VarName="$EffectName1" StringValue="TestQuestEffect01"/>
            <Var VarName="$EffectName2" StringValue="TestQuestEffect02"/>
            <Var VarName="$EffectName3" StringValue="TestQuestEffect03"/>
            <Var VarName="$EffectName4" StringValue="TestQuestEffect04"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>

                    <Vars>
                        <Var VarName="$EffectTarget4">
                            <From Source="$Players"/>
                        </Var>
                    </Vars>

                    <StartActions>
                        <Action_ApplyQuestEffect LogAction="true">
                            <Input_EffectName VarName="$EffectName1"/>
                            <Input_Target VarName="$EffectTarget1"/>
                            <Output_GUID VarName="$EffectGUID"/>
                        </Action_ApplyQuestEffect>
                        <Action_ApplyQuestEffect LogAction="true" ContextLocalizationKey="%QuestActionDescriptionGalaxyContextTitle">
                            <Input_EffectName VarName="$EffectName2"/>
                            <Input_Target VarName="$EffectTarget2"/>
                        </Action_ApplyQuestEffect>
                        <Action_ApplyQuestEffect LogAction="true">
                            <Input_EffectName VarName="$EffectName3"/>
                            <Input_Target VarName="$EffectTarget3"/>
                        </Action_ApplyQuestEffect>
                        <Action_ApplyQuestEffect LogAction="true" LocalizationKey="%GameMenuQuitGameDescription">
                            <Input_EffectName VarName="$EffectName4"/>
                            <Input_Target VarName="$EffectTarget4"/>
                        </Action_ApplyQuestEffect>
                    </StartActions>

                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_QuestEffectFinished>
                                <Input_GUID VarName="$EffectGUID"/>
                            </Decorator_QuestEffectFinished>
                        </Sequence>
                    </Objective>

                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestDelayedTrigger1" Category="Event" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextMulti ParticipantsVarName="$Parts">
            <Distribution Type="Teams">
                <Team Name="Gentils" MembersVarName="$Gentils"/>
                <Team Name="Mechants" MembersVarName="$Mechants"/>
            </Distribution>
        </QuestContextMulti>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$Parts">
                <From Source="$MajorEmpires"/>
            </Var>
            <Var VarName="$Mechants">
                <Any>
                    <From Source="$Parts"/>
                </Any>
            </Var>
            <Var VarName="$Gentils">
                <From Source="$Parts">
                    <Where>
                        <IsNot EntityVarName="$Mechants"/>
                    </Where>
                </From>
            </Var>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet TeamName="Gentils">
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                            <Action_ChooseOutcome Name="Outcome1"/>
                        </Sequence>
                        <Outcome Name="Outcome1">
                            <Triggers Weight="1">
                                <QuestTrigger Delay="1">
                                    <Tags>DelayedQuest</Tags>
                                    <QuestContextMulti ParticipantsVarName="$Parts">
                                        <Distribution Type="Teams">
                                            <Team Name="Gentils" MembersVarName="$Gentils"/>
                                            <Team Name="Mechants" MembersVarName="$Mechants"/>
                                        </Distribution>
                                    </QuestContextMulti>
                                </QuestTrigger>
                            </Triggers>
                        </Outcome>
                    </Objective>
                </ObjectiveSet>
                <ObjectiveSet TeamName="Mechants">
                    <Objective Name="Step1_Objective2">
                        <Loop Count="2">
                            <Decorator_BeginTurn/>
                        </Loop>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestDelayedTrigger2" Category="Event" SubCategory="">

        <!--============ TAGS ============-->
        <Tags>DelayedQuest</Tags>

        <QuestContextMulti>
            <Distribution Type="Teams">
                <Team Name="Gentils"/>
                <Team Name="Mechants"/>
            </Distribution>
        </QuestContextMulti>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet TeamName="Gentils">
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                    <Reward Droplist="testDroplist5"/>
                </ObjectiveSet>
                <ObjectiveSet TeamName="Mechants">
                    <Objective Name="Step1_Objective2">
                        <Loop Count="2">
                            <Decorator_BeginTurn/>
                        </Loop>
                    </Objective>
                    <Reward Droplist="testDroplist1"/>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestGlobalVariable1" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextMulti ParticipantsVarName="$Players"/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$Players">
                <From Source="$MajorEmpires"/>
            </Var>

            <Var VarName="$GlobalSystem" IsGlobal="true">
                <Any>
                    <From Source="$Constellations.$StarSystems"/>
                </Any>
            </Var>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>

                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_ColonizedSystem Initiator="Participants">
                                <Output_StarSystem VarName="$GlobalSystem"/>
                            </Decorator_ColonizedSystem>
                            <Action_ChooseOutcome Name="Outcome1"/>
                        </Sequence>
                        <Outcome Name="Outcome1">
                            <Triggers Weight="1">
                                <QuestTrigger Delay="1">
                                    <Tags>TestGlobalVariable</Tags>
                                    <QuestContextMulti ParticipantsVarName="$Players"/>
                                </QuestTrigger>
                            </Triggers>
                        </Outcome>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestGlobalVariable2" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags>TestGlobalVariable</Tags>

        <QuestContextMulti/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="0"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$GlobalSystem" IsGlobal="true"/>
            <Var VarName="$Marker"/>
            <Var VarName="$Parts">
                <From Source="$Participants"/>
            </Var>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Action_AddQuestMarkers>
                                <Input_Targets VarName="$GlobalSystem"/>
                                <Input_Empires VarName="$Parts"/>
                                <Output_Markers VarName="$Marker"/>
                            </Action_AddQuestMarkers>
                            <Decorator_BeginTurn/>
                            <Action_RemoveQuestMarkers>
                                <Input_Markers VarName="$Marker"/>
                            </Action_RemoveQuestMarkers>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestInformationMessage" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextMulti ParticipantsVarName="$Parts"/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="0"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$Parts"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Action_Message Message="Cocolasticot">
                                <Input_Empires VarName="$Parts"/>
                            </Action_Message>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestFilterCuriosity" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="0"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$Count" IntValue="1"/>
            <Var VarName="$Parts"/>
            <Var VarName="$Systems">
                <From Source="$Constellations.$StarSystems">
                    <Where>
                        <FilterSystemByCuriosity FilteringOperation="CanBeSearched" EmpireVarName="$CurrentEmpire" CountVarName="$Count" DisplayedTypeVarName="CuriosityTypeAtmospheric"/>
                    </Where>
                </From>
            </Var>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestQueue" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="0"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$ConstructionName" StringValue="StarSystemImprovementStartingFoodIndustry"/>
            <Var VarName="$ResearchName" StringValue="TechnologyDefinitionEmpireDevelopment2Era1"/>
            <Var VarName="$MinimumAmount" IntValue="1"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_ConstructionQueued>
                                <Input_ConstructionName VarName="$ConstructionName"/>
                                <Input_MinimumAmountInQueue VarName="$MinimumAmount"/>
                            </Decorator_ConstructionQueued>
                            <Decorator_ResearchQueued>
                                <Input_ResearchName VarName="$ResearchName"/>
                                <Input_MinimumAmountInQueue VarName="$MinimumAmount"/>
                            </Decorator_ResearchQueued>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestHeroAssigned" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="0"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$HeroName" StringValue="HeroSophons02"/>
            <Var VarName="$HomeSystem">
                <From Source="$CurrentEmpire.$HomeColonizedStarSystem"/>
            </Var>
            <Var VarName="$HomeSystemGUID">
                <From Source="$HomeSystem.$GUID"/>
            </Var>
            <Var VarName="$MinimumLevel" IntValue="1"/>
            <Var VarName="$OutHero"/>
            <Var VarName="$OutGUID"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Action_SpawnHero>
                                <Input_Empire VarName="$CurrentEmpire"/>
                                <Input_HeroDefinition VarName="$HeroName"/>
                                <Input_HeroLevel VarName="$MinimumLevel"/>
                                <Output_HeroGUID VarName="$OutGUID"/>
                            </Action_SpawnHero>
                            <Decorator_EntityCreated>
                                <Input_GUID VarName="$OutGUID"/>
                                <Output_Entity VarName="$OutHero"/>
                            </Decorator_EntityCreated>
                            <Decorator_HeroAssigned>
                                <Input_Hero VarName="$OutHero"/>
                                <Input_HeroName VarName="$HeroName"/>
                                <Input_Locations VarName="$HomeSystem"/>
                                <!--<Input_LocationGUIDs VarName="$HomeSystemGUID"/> you can also provide the location GUID-->
                                <Input_MinimumLevel VarName="$MinimumLevel"/>
                                <Output_Hero VarName="$OutHero"/>
                                <Output_HeroGUID VarName="$OutGUID"/>
                            </Decorator_HeroAssigned>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestFleetMoved" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="0"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$OneRandomFleet">
                <Any>
                    <From Source="$CurrentEmpire.$Fleets"/>
                </Any>
            </Var>
            <Var VarName="$OutFleet"/>
            <Var VarName="$OutGUID"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_FleetMoved>
                                <Input_Fleet VarName="$OneRandomFleet"/>
                                <Output_Fleet VarName="$OutFleet"/>
                                <Output_FleetGUID VarName="$OutGUID"/>
                            </Decorator_FleetMoved>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestConditionVariableEquality" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="0"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$CurrentEmpire2">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$OneRandomFleet">
                <Any>
                    <From Source="$CurrentEmpire.$Fleets"/>
                </Any>
            </Var>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_AreEqual>
                                    <Input_Variable1 VarName="$CurrentEmpire"/>
                                    <Input_Variable2 VarName="$CurrentEmpire2"/>
                                </Condition_AreEqual>
                                <Condition_AreEqual Inverted="true">
                                    <Input_Variable1 VarName="$CurrentEmpire"/>
                                    <Input_Variable2 VarName="$OneRandomFleet"/>
                                </Condition_AreEqual>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestProbeLaunched" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="0"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$OneRandomFleet">
                <Any>
                    <From Source="$CurrentEmpire.$Fleets">
                        <Where>
                            <InterpreterPrerequisite Flags="Prerequisite">Property(Context, @'ClassGarrisonFleet', MaximumShipProbeStock) gt 0</InterpreterPrerequisite>
                        </Where>
                    </From>
                </Any>
            </Var>
            <Var VarName="$OutFleet"/>
            <Var VarName="$OutGUID"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_ProbeLaunched>
                                <Input_Fleet VarName="$OneRandomFleet"/>
                                <Output_Fleet VarName="$OutFleet"/>
                                <Output_FleetGUID VarName="$OutGUID"/>
                            </Decorator_ProbeLaunched>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestTutorialFleetsSelected" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="0"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$OneRandomFleet">
                <Any>
                    <From Source="$CurrentEmpire.$Fleets"/>
                </Any>
            </Var>
            <Var VarName="$GUID">
                <From Source="$OneRandomFleet.$GUID"/>
            </Var>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_Tutorial_FleetsSelected>
                                <Input_Fleet VarName="$OneRandomFleet"/>
                                <Input_FleetGUID VarName="$GUID"/>
                            </Decorator_Tutorial_FleetsSelected>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <TutorialDefinition Name="TestGuiDisabler" Priority="0" Category="Tutorial" SubCategory="Beginner" MinimumTutorialLevel="Beginner" Layer="AboveModalWindows">

        <!--============ TAGS ============-->
        <Tags>Hidden</Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="1"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="1"/>

        <!--============ VARIABLES ============-->
        <Vars>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Action_SetForceGuiDisable Key="ControlBanner_EmpireScreenToggle" ForceDisable="true"/>
                            <Action_SetForceGuiDisable Key="ControlBanner_SenateScreenToggle" ForceDisable="true"/>
                            <Action_SetForceGuiDisable Key="ControlBanner_EconomyScreenToggle" ForceDisable="true"/>
                            <Action_SetForceGuiDisable Key="ControlBanner_TechnologyScreenToggle" ForceDisable="true"/>
                            <Action_SetForceGuiDisable Key="ControlBanner_MilitaryScreenToggle" ForceDisable="true"/>
                            <Action_SetForceGuiDisable Key="ControlBanner_AcademyScreenToggle" ForceDisable="true"/>
                            <Action_SetForceGuiDisable Key="ControlBanner_NarrativeScreenToggle" ForceDisable="true"/>
                            <Action_SetForceGuiDisable Key="ControlBanner_DiplomacyScreenToggle" ForceDisable="true"/>
                            <Action_SetForceGuiDisable Key="EndTurnWindow_EndTurnButton" ForceDisable="true"/>
                            <Action_SetForceGuiDisable Key="SystemRepresentativesSidePanel_PopulationPanelButton" ForceDisable="true"/>
                            <Action_SetForceGuiDisable Key="ColonyHeroSidePanel_AssignButton" ForceDisable="true"/>
                            <Action_SetForceGuiDisable Key="EmpireBanner_CurrentResearchArea" ForceDisable="true"/>

                            <Action_SetNotificationSilent Key="NotificationConstructionQueueEmpty" Silent="true"/>
                            <Action_SetNotificationSilent Key="NotificationTechnologyNeeded" Silent="true"/>

                            <Decorator_BeginTurn/>
                            
                            <Action_ClearForceGuiDisable/>
                            <Action_ClearSilentNotifications/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>

    </TutorialDefinition>

    <QuestDefinition Name="TestLawReward" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="0"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
                <Reward Droplist="testLaw"/>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestNoMove" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="0"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$HomeSystem">
                <From Source="$CurrentEmpire.$HomeStarSystem"/>
            </Var>

            <DroplistVar VarName="$FleetToSpawn" Droplist="TestFleetDroplist"/>
            <Var VarName="$GUID"/>
            <Var VarName="$SpawnedFleet"/>
            <Var VarName="$DescriptorName" StringValue="NoMovement"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Action_SpawnFleets LockShipsInTheFleet="true">
                                <Input_Empire VarName="$CurrentEmpire"/>
                                <Input_Locations VarName="$HomeSystem"/>
                                <Input_DroppableFleet VarName="$FleetToSpawn"/>
                                <Output_FleetGUIDs VarName="$GUID"/>
                            </Action_SpawnFleets>
                            <Decorator_EntityCreated>
                                <Input_GUID VarName="$GUID"/>
                                <Output_Entity VarName="$SpawnedFleet"/>
                            </Decorator_EntityCreated>
                            <Action_ApplyDescriptor>
                                <Input_DescriptorName VarName="$DescriptorName"/>
                                <Input_Targets VarName="$SpawnedFleet"/>
                            </Action_ApplyDescriptor>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestTutorialRecipe" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="0"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$ResourceName" StringValue="Luxury1"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_Tutorial_IngredientSelectedForRecipe Initiator="Empire">
                                <Input_ResourceName VarName="$ResourceName"/>
                            </Decorator_Tutorial_IngredientSelectedForRecipe>
                            <Decorator_RecipeCreated/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestShipDesignCreated" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="0"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$HullName" StringValue="HullSmall03Sophons"/>
            <Var VarName="$ModuleName" StringValue="ModuleWeaponKineticEra1"/>
            <Var VarName="$ModuleType" StringValue="Weapon"/><!-- Defense, Support, Bridge -->
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_ShipDesignCreated Initiator="Empire">
                                <Input_HullName VarName="$HullName"/>
                                <Input_ModuleName VarName="$ModuleName"/>
                                <Input_ModuleType VarName="$ModuleType"/>                                
                            </Decorator_ShipDesignCreated>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>
    

    <QuestDefinition Name="TestElectionActionApplied" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="0"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$ActionName" StringValue="ElectionActionDefault"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_ElectionActionApplied>
                                <Input_ActionName VarName="$ActionName"/>
                            </Decorator_ElectionActionApplied>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestLesserName" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>


        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$HomeSystem">
                <From Source="$CurrentEmpire.$HomeStarSystem"/>
            </Var>
            <Var VarName="$IAEmpire">
                <From Source="$LesserEmpire"/>
            </Var>

            <DroplistVar VarName="$FleetToSpawn" Droplist="TestFleetDroplist"/>
            <Var VarName="$GUID"/>
            <Var VarName="$GUID2"/>
            <Var VarName="$SpawnedFleet"/>
            <Var VarName="$SpawnedFleet2"/>
            <Var VarName="$LesserName" StringValue="Coincoin"/>
            <Var VarName="$LesserName2" StringValue="Cuicui"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Action_SpawnFleets>
                                <Input_Empire VarName="$IAEmpire"/>
                                <Input_Locations VarName="$HomeSystem"/>
                                <Input_DroppableFleet VarName="$FleetToSpawn"/>
                                <Output_FleetGUIDs VarName="$GUID"/>
                            </Action_SpawnFleets>
                            <Decorator_EntityCreated>
                                <Input_GUID VarName="$GUID"/>
                                <Output_Entity VarName="$SpawnedFleet"/>
                            </Decorator_EntityCreated>
                            <Action_SpawnFleets>
                                <Input_Empire VarName="$IAEmpire"/>
                                <Input_Locations VarName="$HomeSystem"/>
                                <Input_DroppableFleet VarName="$FleetToSpawn"/>
                                <Output_FleetGUIDs VarName="$GUID2"/>
                            </Action_SpawnFleets>
                            <Decorator_EntityCreated>
                                <Input_GUID VarName="$GUID2"/>
                                <Output_Entity VarName="$SpawnedFleet2"/>
                            </Decorator_EntityCreated>
                            <Action_RegisterLesserName>
                                <Input_Entities VarName="$SpawnedFleet"/>
                                <Input_Name VarName="$LesserName"/>
                            </Action_RegisterLesserName>
                            <Action_RegisterLesserName>
                                <Input_Entities VarName="$SpawnedFleet2"/>
                                <Input_Name VarName="$LesserName2"/>
                            </Action_RegisterLesserName>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestOutpostActionStarted" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>


        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_OutpostActionStarted Initiator="Empire"/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    
    
   

    <QuestDefinition Name="TestTutorialDisplayedTutorial" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="0"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$TutorialName" StringValue="Tutorial_Battle01"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_Tutorial_DisplayedTutorialChanged>
                                <Input_TutorialName VarName="$TutorialName"/>
                            </Decorator_Tutorial_DisplayedTutorialChanged>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestFleetShipStats" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="0"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$Fleet">
                <First>
                    <From Source="$Empire.$Fleets"/>
                </First>
            </Var>
            <Var VarName="$ModuleName" StringValue="ModuleWeaponKineticEra1"/>
            <Var VarName="$ModuleType" StringValue="Weapon"/>
            <Var VarName="$ShipRole" StringValue="ShipRoleExploration"/>
            <Var VarName="$MinManpower" IntValue="10"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_FleetShipStats>
                                    <Input_Fleets VarName="$Fleet"/>
                                    <Input_ModuleType VarName="$ModuleType"/>
                                    <Input_ModuleName VarName="$ModuleName"/>
                                    <Input_RoleName VarName="$ShipRole"/>
                                    <Input_MinimumManpowerAmount VarName="$MinManpower"/>
                                </Condition_FleetShipStats>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestFleetShipStatsOnNode" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="0"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$HomeNode">
                <From Source="$CurrentEmpire.$HomeStarSystem"/>
            </Var>
            <Var VarName="$ModuleName" StringValue="ModuleWeaponKineticEra1"/>
            <Var VarName="$ModuleType" StringValue="Weapon"/>
            <Var VarName="$ShipRole" StringValue="ShipRoleExploration"/>
            <Var VarName="$MinManpower" IntValue="10"/>
            <Var VarName="$MinAmount" IntValue="1"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_FleetShipStatsOnNode>
                                    <Input_Node VarName="$HomeNode"/>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_ModuleType VarName="$ModuleType"/>
                                    <Input_ModuleName VarName="$ModuleName"/>
                                    <Input_RoleName VarName="$ShipRole"/>
                                    <Input_MinimumManpowerAmount VarName="$MinManpower"/>
                                    <Input_MinimumAmount VarName="$MinAmount"/>
                                </Condition_FleetShipStatsOnNode>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestTrading" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="0"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$TradeRouteAmount" IntValue="2"/>
            <Var VarName="$ExternalAmount" IntValue="1"/>
            <Var VarName="$IncomeAmount" IntValue="10"/>
            <Var VarName="$ResourceName" StringValue="EmpireMoney"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_HasTradeRoutes>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_TradeRouteAmount VarName="$TradeRouteAmount"/>
                                    <Input_ExternalSubsidiariesAmount VarName="$ExternalAmount"/>
                                </Condition_HasTradeRoutes>
                                <Condition_HasTradeIncome SummedAmount="true">
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_ResourceName VarName="$ResourceName"/>
                                    <Input_MinimumAmount VarName="$IncomeAmount"/>
                                </Condition_HasTradeIncome>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestConstructShipWithResourceCost" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="0"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$Ship"/>
            <Var VarName="$ResourceName" StringValue="Strategic1"/>
            <Var VarName="$Cost" IntValue="1"/>
            <Var VarName="$MaxCost" IntValue="1000"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_ShipConstructed Initiator="Empire">
                                <Condition_ShipHasResource>
                                    <Input_Ship VarName="$Ship"/>
                                    <Input_MinimumAmount VarName="$Cost"/>
                                    <Input_MaximumAmount VarName="$MaxCost"/>
                                    <Input_ResourceName VarName="$ResourceName"/>
                                </Condition_ShipHasResource>
                                <Output_Ship VarName="$Ship"/>
                            </Decorator_ShipConstructed>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestConditionHasSystems" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>


        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$Nodes">
                <Any>
                    <From Source="$Empire.$ColonizedStarSystems.$StarSystem"/>
                </Any>
            </Var>

            <Var VarName="$StarSystem"/>
            <Var VarName="$Three" IntValue="3"/>
            <Var VarName="$One" IntValue="1"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">../EmpireTypeMajor,AffinitySophons</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_HasSystems>
                                    <Input_Empires VarName="$CurrentEmpire"/>
                                    <Input_MinimumAmount VarName="$One"/>
                                    <Input_Systems VarName="$Nodes"/>
                                </Condition_HasSystems>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestFilterPlanetCuriosity" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="0"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$Count" IntValue="1"/>
            <Var VarName="$Parts"/>
            <Var VarName="$Planets">
                <From Source="$Constellations.$StarSystems.$Planets">
                    <Where>
                        <FilterPlanetByCuriosity FilteringOperation="CanBeSearched" EmpireVarName="$CurrentEmpire" CountVarName="$Count" DisplayedTypeVarName="CuriosityTypeAtmospheric"/>
                    </Where>
                </From>
            </Var>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestSpawnImprovement" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="0"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$ImprovementName" StringValue="StarSystemImprovementIndustry3"/>
            <Var VarName="$StarSystem">
                <From Source="$CurrentEmpire.$HomeColonizedStarSystem"/>
            </Var>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Action_SpawnImprovement>
                                <Input_ColonizedStarSystem VarName="$StarSystem"/>
                                <Input_StarSystemImprovementDefinition VarName="$ImprovementName"/>
                            </Action_SpawnImprovement>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestGameSettingPrerequisite" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="0"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <GameSettingPrerequisite>GalaxySize,Normal</GameSettingPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestLesserColonization" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$IAEmpire">
                <From Source="$LesserEmpire"/>
            </Var>
            <Var VarName="$AllEmpires">
                <From Source="$MajorEmpires"/>
            </Var>
            <Var VarName="$QuestNode">
                <Any>
                    <From Source="$Constellations.$StarSystems">
                        <Where>
                            <!--<PathPrerequisite>QuestNode</PathPrerequisite>-->
                            <FilterSystemByStatus ColonizationState="NotColonized"/>
                        </Where>
                    </From>
                </Any>
            </Var>
            <Var VarName="$Planet">
                <Any>
                    <From Source="$QuestNode.$Planets"/>
                </Any>
            </Var>
            <Var VarName="$SystemControllerName" StringValue="Des pirates !"/>
            
            <Var VarName="$ImprovementName" StringValue="StarSystemImprovementIndustry3"/>

            <Var VarName="$ColonizedStarSystemGUID"/>
            <Var VarName="$ColonizedStarSystem"/>
            <Var VarName="$ColonizedPlanetGUID"/>
            <Var VarName="$ColonizedPlanet"/>

            <Var VarName="$Two" IntValue="2"/>
            <Var VarName="$PopAffinity" StringValue="AffinitySophons"/>
            <Var VarName="$NewSystemName" StringValue="Cocolasticot"/>
            <Var VarName="$Amount" IntValue="5000"/>
            <Var VarName="$ResourceName" StringValue="EmpireManpower"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Action_Colonize>
                                <Input_Empire VarName="$IAEmpire"/>
                                <Input_Planet VarName="$Planet"/>
                                <Output_ColonizedStarSystemGUID VarName="$ColonizedStarSystemGUID"/>
                                <Output_ColonizedPlanetGUID VarName="$ColonizedPlanetGUID"/>
                            </Action_Colonize>
                            <Parallel CompletionPolicy="All">
                                <Decorator_EntityCreated>
                                    <Input_GUID VarName="$ColonizedStarSystemGUID"/>
                                    <Output_Entity VarName="$ColonizedStarSystem"/>
                                </Decorator_EntityCreated>
                                <Decorator_EntityCreated>
                                    <Input_GUID VarName="$ColonizedPlanetGUID"/>
                                    <Output_Entity VarName="$ColonizedPlanet"/>
                                </Decorator_EntityCreated>
                            </Parallel>
                            <Action_RegisterLesserName>
                                <Input_GUIDs VarName="$ColonizedStarSystemGUID"/>
                                <Input_Name VarName="$SystemControllerName"/>
                            </Action_RegisterLesserName>
                            <Action_RenameSystem>
                                <Input_Empire VarName="$IAEmpire"/>
                                <Input_System VarName="$QuestNode"/>
                                <Input_Name VarName="$NewSystemName"/>
                            </Action_RenameSystem>
                            <Action_SetInvisibility Invisible="false">
                                <Input_Empires VarName="$AllEmpires"/>
                                <Input_TargetEntities VarName="$QuestNode"/>
                            </Action_SetInvisibility>
                            <Action_SpawnImprovement>
                                <Input_ColonizedStarSystem VarName="$ColonizedStarSystem"/>
                                <Input_StarSystemImprovementDefinition VarName="$ImprovementName"/>
                            </Action_SpawnImprovement>
                            <Action_SpawnPopulation>
                                <Input_Empire VarName="$IAEmpire"/>
                                <Input_System VarName="$QuestNode"/>
                                <Input_Amount VarName="$Two"/>
                                <Input_PopulationAffinity VarName="$PopAffinity"/>
                            </Action_SpawnPopulation>
                            <Action_TransferResource>
                                <Input_Location VarName="$IAEmpire"/>
                                <Input_ResourceName VarName="$ResourceName"/>
                                <Input_Amount VarName="$Amount"/>
                            </Action_TransferResource>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestLoopWithCountVariable" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="0"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$Two" IntValue="2"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Loop>
                                <Decorator_BeginTurn/>
                                <Input_Count VarName="$Two"/>
                            </Loop>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestHasDeposits" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="0"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$Two" IntValue="2"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_HasDeposits Input_ResourceType="Strategic">
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinimumAmount VarName="$Two"/>
                                </Condition_HasDeposits>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestStarSystemNodeDefinition" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="0"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$HomeSystem">
                <From Source="$CurrentEmpire.$HomeStarSystem"/>
            </Var>
            <Var VarName="$SystemToShootInTheFace">
                <From Source="$HomeSystem"/>
            </Var>
            <Var VarName="$DefinitionName" StringValue="QuestNode01"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Action_ApplyStarSystemDefinition>
                                <Input_DefinitionName VarName="$DefinitionName"/>
                                <Input_StarSystemNode VarName="$SystemToShootInTheFace"/>
                            </Action_ApplyStarSystemDefinition>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestLockQuestTarget" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="0"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$HomeSystem">
                <From Source="$CurrentEmpire.$HomeStarSystem"/>
            </Var>
            <Var VarName="$Planet" AutoLockTargets="true">
                <First>
                    <From Source="$HomeSystem.$Planets"/>
                </First>
            </Var>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <Vars>
                    <Var VarName="$Planets">
                        <From Source="$HomeSystem.$Planets"/>
                    </Var>
                    <Var VarName="$Planets2" IgnoreLockedTargets="true">
                        <From Source="$HomeSystem.$Planets"/>
                    </Var>
                </Vars>
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Action_LockTargets LockOption="Lock">
                                <Input_Targets VarName="$HomeSystem"/>
                            </Action_LockTargets>
                            <Decorator_BeginTurn />
                            <Action_LockTargets LockOption="Unlock">
                                <Input_Targets VarName="$HomeSystem"/>
                            </Action_LockTargets>
                            <Action_LockTargets LockOption="Unlock">
                                <Input_Targets VarName="$Planet"/>
                            </Action_LockTargets>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestReload" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>


        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$LocationEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$MinimumDust" IntValue="100"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_HasFidsi>
                                    <Input_Location VarName="$LocationEmpire"/>
                                    <Input_Dust VarName="$MinimumDust"/>
                                </Condition_HasFidsi>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>
  

    <QuestDefinition Name="TestOutpostColonization" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$NodeToColonize">
                <Any>
                    <From Source="$CurrentEmpire.$HomeStarSystem.$Constellation.$StarSystems">
                        <Where>
                            <FilterSystemByStatus ColonizationState="NotColonized"/>
                        </Where>
                    </From>
                </Any>
            </Var>
            <Var VarName="$Planet">
                <Any>
                    <From Source="$NodeToColonize.$Planets"/>
                </Any>
            </Var>

            <Var VarName="$ColonizedStarSystemGUID"/>
            <Var VarName="$ColonizedPlanetGUID"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Action_Colonize Outpost="true">
                                <Input_Empire VarName="$CurrentEmpire"/>
                                <Input_Planet VarName="$Planet"/>
                                <Output_ColonizedStarSystemGUID VarName="$ColonizedStarSystemGUID"/>
                                <Output_ColonizedPlanetGUID VarName="$ColonizedPlanetGUID"/>
                            </Action_Colonize>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestCount" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>

            <Var VarName="$NumberOfNodesInConstellation">
                <Count>
                    <From Source="$CurrentEmpire.$HomeStarSystem.$Constellation.$StarSystems"/>
                </Count>
            </Var>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestCheckPath" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$Path" StringValue="ClassEmpire/ClassColonizedStarSystem"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_CheckPath>
                                    <!-- The simulation object on which we check the path -->
                                    <Input_SimulationObject VarName="$CurrentEmpire"/>
                                    <!-- The path we want to check -->
                                    <Input_Path VarName="$Path"/>
                                </Condition_CheckPath>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestCheckInterpreter" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>

            <Var VarName="$Two" IntValue="2"/>
            <InterpretedVar VarName="$TwoPlusSystemCount" Target="$(Empire)">
                <Expression>$(Two) + Property(Context, SystemCount)</Expression>
            </InterpretedVar>
            <Var VarName="$Expression" StringValue="Property(Context, SystemCount) le $(TwoPlusSystemCount)"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_CheckInterpreter>
                                    <!-- Optional context simulation object that will be used in the interpreted expression -->
                                    <Input_Context VarName="$CurrentEmpire"/>
                                    <!-- The expression we want to interpret -->
                                    <Input_Expression VarName="$Expression"/>
                                </Condition_CheckInterpreter>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestCheckProgression" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>

            <Var VarName="$Expression" StringValue="Property(Context, SystemCount)"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1" StartValue="0" EndValue="1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_IsProgressionComplete>
                                    <!-- Optional context simulation object that will be used in the interpreted expression -->
                                    <Input_Context VarName="$CurrentEmpire"/>
                                    <!-- Optional parameter to specify, in case of teams, that we update the progress of a particular empire instead of the global progress-->
                                    <Input_EmpireWhoseProgressToUpdate VarName="$CurrentEmpire"/>
                                    <!-- Optional expression that will be interpreted to recalculate the progress -->
                                    <Input_Expression VarName="$Expression"/>
                                </Condition_IsProgressionComplete>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestHasSystemInSameConstellation" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>

            <Var VarName="$Two" IntValue="2"/>
            <Var VarName="$SystemCount"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <!-- InSameConstellation allows to take into account only the systems in a specific constellation (the one with the most counted systems in it) -->
                                <Condition_HasSystems InSameConstellation="true">
                                    <Input_Empires VarName="$CurrentEmpire"/>
                                    <Input_MinimumAmount VarName="$Two"/>
                                    <Input_MinimumLevel VarName="$Two"/>
                                    <!-- optional output to retrieve the number of systems that was counted. -->
                                    <Output_Count VarName="$SystemCount"/>
                                </Condition_HasSystems>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestSystemGainedFromInfluence" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$StarSystemNode" />
            <Var VarName="$ColonizedStarSystem" />
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_SystemGainedFromInfluence Initiator="Empire">
                                <!-- optional output parameter, to retrieve the star system node that was gained -->
                                <Output_Node VarName="$StarSystemNode"/>
                                <!-- optional output parameter, to retrieve the colonized star system that was gained -->
                                <Output_ColonizedStarSystem VarName="$ColonizedStarSystem"/>
                            </Decorator_SystemGainedFromInfluence>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestCopyVariable" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$One" IntValue="1"/>
            <Var VarName="$Result"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Action_CopyVariable>
                                <!-- variable to copy -->
                                <Input_Variable VarName="$One"/>
                                <!-- variable to copy to -->
                                <Output_Variable VarName="$Result"/>
                            </Action_CopyVariable>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestTransferLocalManpower" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$Fleets">
                <From Source="$CurrentEmpire.$Fleets"/>
            </Var>
            <Var VarName="$Systems">
                <From Source="$CurrentEmpire.$ColonizedStarSystems"/>
            </Var>
            <Var VarName="$Amount" IntValue="8000"/>
            <Var VarName="$Amount2" IntValue="-8000"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Action_TransferLocalManpower>
                                <Input_Location VarName="$Fleets"/>
                                <Input_Amount VarName="$Amount"/>
                            </Action_TransferLocalManpower>
                            <Action_TransferLocalManpower>
                                <Input_Location VarName="$Systems"/>
                                <Input_Amount VarName="$Amount"/>
                            </Action_TransferLocalManpower>
                            <Decorator_BeginTurn/>
                            <Action_TransferLocalManpower>
                                <Input_Location VarName="$Fleets"/>
                                <Input_Amount VarName="$Amount2"/>
                            </Action_TransferLocalManpower>
                            <Action_TransferLocalManpower>
                                <Input_Location VarName="$Systems"/>
                                <Input_Amount VarName="$Amount2"/>
                            </Action_TransferLocalManpower>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestResourceReward" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="1"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="1"/>

        <!--============ VARIABLES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
                <Reward Droplist="testDroplist4"/>
                <Reward Droplist="testLuxDroplist"/>
            </Step>
        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestFleetReward" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="1"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="1"/>

        <Vars>
            <DroplistVar Droplist="TestFleetDroplist" VarName="$FleetDroppable"/>
        </Vars>

        <!--============ VARIABLES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
                <Reward DropVar="$FleetDroppable"/>
            </Step>
        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestHeroReward" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="1"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="1"/>

        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>

            <DroplistVar Droplist="TestHeroDroplist" VarName="$HeroDroppable"/>
            <Var VarName="$HeroName">
                <From Source="$HeroDroppable.$Name"/>
            </Var>
        </Vars>

        <!--============ VARIABLES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                            <Action_SpawnHero>
                                <Input_Empire VarName="$CurrentEmpire"/>
                                <Input_HeroDefinition VarName="$HeroName"/>
                            </Action_SpawnHero>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
                <Reward DropVar="$HeroDroppable"/>
            </Step>
        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestForbidSystemColonization" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <Vars>
            <Var VarName="$Systems">
                <From Source="$Constellations.$StarSystems"/>
            </Var>
            <Var VarName="$DescriptorName" StringValue="CannotBeColonized"/>
        </Vars>

        <!--============ VARIABLES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Action_ApplyDescriptor>
                                <Input_DescriptorName VarName="$DescriptorName"/>
                                <Input_Targets VarName="$Systems"/>
                            </Action_ApplyDescriptor>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestUnlockReward" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                        </Sequence>
                    </Objective>
                    <Reward Droplist="testUnlock"/>
                </ObjectiveSet>
            </Step>
        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestSetHappinessStatusSet" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>

            <Var VarName="$HappinessStatusSetEmpireName" StringValue="HappinessStatusSetEmpireQuestTest"/>
            <Var VarName="$HappinessStatusSetSystemName" StringValue="HappinessStatusSetStarSystemQuestTest"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Action_SetHappinessStatusSet>
                                <Input_Empire VarName="$CurrentEmpire"/>
                                <Input_HappinessStatusSetDefinitionName VarName="$HappinessStatusSetEmpireName"/>
                            </Action_SetHappinessStatusSet>
                            <Action_SetHappinessStatusSet>
                                <Input_Empire VarName="$CurrentEmpire"/>
                                <Input_HappinessStatusSetDefinitionName VarName="$HappinessStatusSetSystemName"/>
                            </Action_SetHappinessStatusSet>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestSpawnHeroReward" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                        </Sequence>
                    </Objective>
                    <Reward Droplist="testSpawnHeroReward"/>
                </ObjectiveSet>
            </Step>
        </Steps>

    </QuestDefinition>


    <QuestDefinition Name="TestEmpireShipStats" Category="Test" SubCategory="Test">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>


        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$MinimumAmount" IntValue="1"/>
            <Var VarName="$MinimumAttack" IntValue="1"/>
            <Var VarName="$MinimumDefense" IntValue="1"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_ShipStats IncludeHeroShips="true">
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinimumAmount VarName="$MinimumAmount"/>
                                    <Input_MinimumOffensiveMilitaryPower VarName="$MinimumAttack"/>
                                    <Input_MinimumDefensiveMilitaryPower VarName="$MinimumDefense"/>
                                </Condition_ShipStats>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestDiplomaticRelation2" Category="Test" SubCategory="Test">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>


        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$OtherEmpire">
                <Any>
                    <From Source="$MinorEmpires"/>
                </Any>
            </Var>
            <Var VarName="$DiplomaticRelationStateName" StringValue="DiplomaticRelationStateMinorAdvancedBrainwashed"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_DiplomaticRelationChanged>
                                <Input_OtherEmpire VarName="$OtherEmpire"/>
                                <Input_DiplomaticRelationState VarName="$DiplomaticRelationStateName"/>
                            </Decorator_DiplomaticRelationChanged>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="TestRefreshEndValue" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <InterpretedVar VarName="$TwoPlusSystemCount">
                <Expression>$(Two) + Property(Context, SystemCount)</Expression>
            </InterpretedVar>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1" StartValue="0" EndValue="$TwoPlusSystemCount" RefreshEndValue="true">
                        <Loop Count="10">
                            <Decorator_BeginTurn/>
                        </Loop>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestDropResourceName" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <DroplistVar Droplist="DroplistLuxuries02" VarName="$DropResource"/>
            <Var VarName="$ResourceName">
                <From Source="$DropResource.$Name"/>
            </Var>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Loop Count="10">
                            <Decorator_BeginTurn/>
                        </Loop>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestMetaplotChapter1" Category="TestMetaplot" SubCategory="Test">

        <Tags></Tags>

        <QuestContextMulti ParticipantsVarName="$Players">
            <Distribution Type="Teams">
                <Team Name="Redeemer" MembersVarName="$TeamA"/>
                <Team Name="Refuser" MembersVarName="$TeamB"/>
            </Distribution>
        </QuestContextMulti>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <Vars>
            <Var VarName="$QuestInProgressDescriptorName" StringValue="MetaplotQuestInProgress"/>
            
            <Var VarName="$TeamA"/>
            <Var VarName="$TeamB"/>

            <Var VarName="$IAEmpire">
                <From Source="$LesserEmpire"/>
            </Var>

            <Var VarName="$Players">
                <From Source="$Empires">
                    <Where>
                        <PathPrerequisite Flags="Prerequisite">ClassEmpire,EmpireTypeMajor,!EmpireEliminated</PathPrerequisite>
                    </Where>
                </From>
            </Var>

            <Var VarName="$PlayersCount">
                <Count>
                    <From Source="$Empires">
                        <Where>
                            <PathPrerequisite Flags="Prerequisite">ClassEmpire,EmpireTypeMajor,!EmpireEliminated</PathPrerequisite>
                        </Where>
                    </From>
                </Count>
            </Var>

            <InterpretedVar VarName="$MetaplotSystemsCount">
                <Expression>$(PlayersCount) + 1 - ($(PlayersCount) % 2)</Expression>
            </InterpretedVar>

            <Var VarName="$AllQuestNodes">
                <From Source="$Constellations.$StarSystems">
                    <Where>
                        <PathPrerequisite Flags="Prerequisite">ClassStarSystem,QuestNode</PathPrerequisite>
                    </Where>
                </From>
            </Var>

            <Var VarName="$MetaplotSystems" IsGlobal="true"/>
            <Var VarName="$DiscoveredSystem"/>

            <Var VarName="$MinigameName" StringValue="ExplorationMinigame"/>
            <Var VarName="$MinigameGUID"/>

            <Var VarName="$MinigameTeamAName" StringValue="MetaplotTeamA"/>
            <Var VarName="$MinigameTeamBName" StringValue="MetaplotTeamB"/>

            <Var VarName="$BaseSystemDefinitionName" StringValue="QuestNodeMetaplotBase"/>

            <Var VarName="$Zero" IntValue="0"/>
        </Vars>

        <Steps>
            <Step Name="Step1">

                <Choice DefaultChoiceIndex="0" IsVote="false">
                    <ChoiceItem ObjectiveSetIndex="0"/>
                    <ChoiceItem ObjectiveSetIndex="1"/>
                </Choice>

                <StartActions>
                    
                    <!-- Block hero recruitment & healing -->
                    <Action_ApplyDescriptor>
                        <Input_DescriptorName VarName="$QuestInProgressDescriptorName"/>
                        <Input_Targets VarName="$Players"/>
                    </Action_ApplyDescriptor>

                    <!-- Refine systems selection -->
                    <Action_TruncateVariable>
                        <Input_Variable VarName="$AllQuestNodes"/>
                        <Input_Count VarName="$MetaplotSystemsCount"/>
                        <Output_Variable VarName="$MetaplotSystems"/>
                    </Action_TruncateVariable>

                    <!-- Apply system definitions -->
                    <Action_ApplyStarSystemDefinition>
                        <Input_DefinitionName VarName="$BaseSystemDefinitionName"/>
                        <Input_StarSystemNode VarName="$MetaplotSystems"/>
                    </Action_ApplyStarSystemDefinition>
                    
                    <!-- Make systems discoverable -->
                    <Action_SetInvisibility Invisible="false">
                        <Input_Empires VarName="$Players"/>
                        <Input_TargetEntities VarName="$MetaplotSystems"/>
                    </Action_SetInvisibility>

                    <!-- Reveal systems to AI -->
                    <Action_SetInvisibility Invisible="false">
                        <Input_Empires VarName="$IAEmpire"/>
                        <Input_TargetEntities VarName="$MetaplotSystems"/>
                    </Action_SetInvisibility>

                    <Action_RevealEntities NewExplorationState="Revealed">
                        <Input_Empires VarName="$IAEmpire"/>
                        <Input_TargetSystems VarName="$MetaplotSystems"/>
                    </Action_RevealEntities>

                    <!-- Add quest markers everywhere -->
                    <Action_AddQuestMarkers>
                        <Input_Targets VarName="$MetaplotSystems"/>
                        <Input_Empires VarName="$Players"/>
                    </Action_AddQuestMarkers>

                    <!-- Start minigame -->
                    <Action_StartMinigame>
                        <Input_MinigameName VarName="$MinigameName"/>
                        <Input_GameNodes VarName="$MetaplotSystems"/>
                        <Output_MinigameGUID VarName="$MinigameGUID"/>
                    </Action_StartMinigame>

                </StartActions>

                <ObjectiveSet TeamName="Redeemer">
                    <Objective Name="Step1_A_Objective1" StartValue="$Zero" EndValue="$MetaplotSystemsCount">
                        <AIHint Category="Metaplot"/>
                        <Parallel CompletionPolicy="First">

                            <Sequence>
                                <!-- Build team A with empires of team A -->
                                <Action_BuildMinigameTeam>
                                    <Input_MinigameGUID VarName="$MinigameGUID"/>
                                    <Input_TeamName VarName="$MinigameTeamAName"/>
                                    <Input_Empires VarName="$TeamA"/>
                                </Action_BuildMinigameTeam>

                                <!-- Wait for the team to win -->
                                <Decorator_MinigameWon>
                                    <Input_MinigameGUID VarName="$MinigameGUID"/>
                                    <Input_TeamName VarName="$MinigameTeamAName"/>
                                </Decorator_MinigameWon>

                                <!-- Clear the markers -->
                                <Action_RemoveQuestMarkers>
                                    <Input_Targets VarName="$MetaplotSystems"/>
                                </Action_RemoveQuestMarkers>

                                <!-- Start second quest -->
                                <Action_ChooseOutcome Name="OutcomeAWins"/>
                            
                            </Sequence>

                            <Loop Count="-1">

                                <!-- Wait for team to secure an objective-->
                                <Decorator_MinigameObjectiveSecured>
                                    <Input_MinigameGUID VarName="$MinigameGUID"/>
                                    <Input_TeamName VarName="$MinigameTeamAName"/>
                                    <Output_System VarName="$DiscoveredSystem"/>
                                </Decorator_MinigameObjectiveSecured>

                                <!-- Remove the quest marker -->
                                <Action_RemoveQuestMarkers>
                                    <Input_Targets VarName="$DiscoveredSystem"/>
                                </Action_RemoveQuestMarkers>

                            </Loop>

                            <Loop Count="-1">

                                <!-- Increment progress by 1 everytime an objective is secured -->
                                <Decorator_MinigameObjectiveSecured ProgressionIncrement="1">
                                    <Input_MinigameGUID VarName="$MinigameGUID"/>
                                </Decorator_MinigameObjectiveSecured>

                            </Loop>

                        </Parallel>
                        
                        <Outcome Name="OutcomeAWins">
                            <Triggers Weight="1">
                                <QuestTrigger>
                                    <Tags>TestMetaplotChapter2</Tags>
                                    <QuestContextMulti ParticipantsVarName="$Players">
                                        <Distribution Type="Teams">
                                            <Team Name="Redeemer" MembersVarName="$TeamA"/>
                                            <Team Name="Refuser" MembersVarName="$TeamB"/>
                                        </Distribution>
                                    </QuestContextMulti>
                                </QuestTrigger>
                            </Triggers>
                        </Outcome>
                    </Objective>

                    <PodiumReward MinimumParticipation="1">
                        <Reward Droplist="testDroplist5" Picks="1"/>
                        <Reward Droplist="testDroplist4" Picks="1"/>
                        <Reward Droplist="testDroplist1" Picks="1"/>
                    </PodiumReward>
                </ObjectiveSet>

                <ObjectiveSet TeamName="Refuser">
                    <Objective Name="Step1_B_Objective1" StartValue="$Zero" EndValue="$MetaplotSystemsCount">
                        <AIHint Category="Metaplot"/>
                        <Parallel CompletionPolicy="First">

                            <Sequence>
                                <!-- Build team B with empires of team B -->
                                <Action_BuildMinigameTeam>
                                    <Input_MinigameGUID VarName="$MinigameGUID"/>
                                    <Input_TeamName VarName="$MinigameTeamBName"/>
                                    <Input_Empires VarName="$TeamB"/>
                                </Action_BuildMinigameTeam>

                                <!-- Wait for the team to win -->
                                <Decorator_MinigameWon>
                                    <Input_MinigameGUID VarName="$MinigameGUID"/>
                                    <Input_TeamName VarName="$MinigameTeamBName"/>
                                </Decorator_MinigameWon>

                                <!-- Clear the markers -->
                                <Action_RemoveQuestMarkers>
                                    <Input_Targets VarName="$MetaplotSystems"/>
                                </Action_RemoveQuestMarkers>

                                <!-- Start second quest -->
                                <Action_ChooseOutcome Name="OutcomeBWins"/>

                            </Sequence>

                            <Loop Count="-1">

                                <!-- Wait for team to secure an objective-->
                                <Decorator_MinigameObjectiveSecured>
                                    <Input_MinigameGUID VarName="$MinigameGUID"/>
                                    <Input_TeamName VarName="$MinigameTeamBName"/>
                                    <Output_System VarName="$DiscoveredSystem"/>
                                </Decorator_MinigameObjectiveSecured>

                                <!-- Remove the quest marker -->
                                <Action_RemoveQuestMarkers>
                                    <Input_Targets VarName="$DiscoveredSystem"/>
                                </Action_RemoveQuestMarkers>

                            </Loop>

                            <Loop Count="-1">

                                <!-- Increment progress by 1 everytime an objective is secured -->
                                <Decorator_MinigameObjectiveSecured ProgressionIncrement="1">
                                    <Input_MinigameGUID VarName="$MinigameGUID"/>
                                </Decorator_MinigameObjectiveSecured>

                            </Loop>

                        </Parallel>

                        <Outcome Name="OutcomeBWins">
                            <Triggers Weight="1">
                                <QuestTrigger>
                                    <Tags>TestMetaplotChapter2</Tags>
                                    <QuestContextMulti ParticipantsVarName="$Players">
                                        <Distribution Type="Teams">
                                            <Team Name="Redeemer" MembersVarName="$TeamA"/>
                                            <Team Name="Refuser" MembersVarName="$TeamB"/>
                                        </Distribution>
                                    </QuestContextMulti>
                                </QuestTrigger>
                            </Triggers>
                        </Outcome>
                    </Objective>

                    <PodiumReward MinimumParticipation="1">
                        <Reward Droplist="testDroplist5" Picks="1"/>
                        <Reward Droplist="testDroplist4" Picks="1"/>
                        <Reward Droplist="testDroplist1" Picks="1"/>
                    </PodiumReward>
                </ObjectiveSet>

            </Step>
        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestMetaplotChapter2" Category="TestMetaplot" SubCategory="Test">

        <Tags>TestMetaplotChapter2,MetaplotFinalQuest</Tags>

        <QuestContextMulti ParticipantsVarName="$Players">
            <Distribution Type="Teams">
                <Team Name="Redeemer" MembersVarName="$TeamA"/>
                <Team Name="Refuser" MembersVarName="$TeamB"/>
            </Distribution>
        </QuestContextMulti>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <Vars>
            <Var VarName="$QuestInProgressDescriptorName" StringValue="MetaplotQuestInProgress"/>
            
            <Var VarName="$TeamA"/>
            <Var VarName="$TeamB"/>

            <Var VarName="$Players">
                <From Source="$Empires">
                    <Where>
                        <PathPrerequisite Flags="Prerequisite">ClassEmpire,EmpireTypeMajor</PathPrerequisite>
                    </Where>
                </From>
            </Var>

            <Var VarName="$MetaplotSystems" IsGlobal="true"/>
            <Var VarName="$SecuredSystem"/>
            
            <Var VarName="$MinigameName" StringValue="KingOfTheHillMinigame"/>
            <Var VarName="$MinigameGUID"/>

            <Var VarName="$MinigameTeamAName" StringValue="MetaplotTeamA"/>
            <Var VarName="$MinigameTeamBName" StringValue="MetaplotTeamB"/>

            <Var VarName="$RestoredSystemDefinitionName" StringValue="QuestNodeMetaplotRestored"/>
            <Var VarName="$DestroyedSystemDefinitionName" StringValue="QuestNodeMetaplotDestroyed"/>

            <Var VarName="$Zero" IntValue="0"/>

            <Var VarName="$MetaplotSystemsCount">
                <Count>
                    <From Source="$MetaplotSystems"/>
                </Count>
            </Var>
        </Vars>

        <Steps>
            <Step Name="Step1">
                
                <StartActions>

                    <!-- Reveal all systems -->
                    <Action_SetInvisibility Invisible="false">
                        <Input_Empires VarName="$Players"/>
                        <Input_TargetEntities VarName="$MetaplotSystems"/>
                    </Action_SetInvisibility>

                    <Action_RevealEntities NewExplorationState="Revealed">
                        <Input_Empires VarName="$Players"/>
                        <Input_TargetSystems VarName="$MetaplotSystems"/>
                    </Action_RevealEntities>

                    <!-- Add quest markers everywhere -->
                    <Action_AddQuestMarkers RevealsLocation="true">
                        <Input_Targets VarName="$MetaplotSystems"/>
                        <Input_Empires VarName="$Players"/>
                    </Action_AddQuestMarkers>

                    <!-- Start minigame -->
                    <Action_StartMinigame>
                        <Input_MinigameName VarName="$MinigameName"/>
                        <Input_GameNodes VarName="$MetaplotSystems"/>
                        <Output_MinigameGUID VarName="$MinigameGUID"/>
                    </Action_StartMinigame>

                </StartActions>
                
                <!-- Team A wants to RESTORE the systems -->
                <ObjectiveSet TeamName="Redeemer">
                    <Objective Name="Step1_A_Objective1" StartValue="$Zero" EndValue="$MetaplotSystemsCount">
                        <AIHint Category="Metaplot"/>
                        <Parallel CompletionPolicy="First">
                            
                            <Sequence>
                                <!-- Build team A with empires of team A -->
                                <Action_BuildMinigameTeam>
                                    <Input_MinigameGUID VarName="$MinigameGUID"/>
                                    <Input_TeamName VarName="$MinigameTeamAName"/>
                                    <Input_Empires VarName="$TeamA"/>
                                </Action_BuildMinigameTeam>

                                <!-- Wait for the team to win -->
                                <Decorator_MinigameWon>
                                    <Input_MinigameGUID VarName="$MinigameGUID"/>
                                    <Input_TeamName VarName="$MinigameTeamAName"/>
                                </Decorator_MinigameWon>

                                <!-- Clear the markers -->
                                <Action_RemoveQuestMarkers>
                                    <Input_Targets VarName="$MetaplotSystems"/>
                                </Action_RemoveQuestMarkers>

                                <!-- Display messages -->
                                <Action_Message Message="MetaplotTeamAWon">
                                    <Input_Empires VarName="$TeamA"/>
                                </Action_Message>
                                <Action_Message Message="MetaplotTeamBLost">
                                    <Input_Empires VarName="$TeamB"/>
                                </Action_Message>

                                <!-- Allow hero recruitment & healing -->
                                <Action_ApplyDescriptor Remove="true">
                                    <Input_DescriptorName VarName="$QuestInProgressDescriptorName"/>
                                    <Input_Targets VarName="$Players"/>
                                </Action_ApplyDescriptor>

                            </Sequence>

                            <Loop Count="-1">

                                <!-- Wait for team to secure an objective-->
                                <Decorator_MinigameObjectiveSecured>
                                    <Input_MinigameGUID VarName="$MinigameGUID"/>
                                    <Input_TeamName VarName="$MinigameTeamAName"/>
                                    <Output_System VarName="$SecuredSystem"/>
                                </Decorator_MinigameObjectiveSecured>

                                <!-- Change definition of the secured objective's system-->
                                <Action_ApplyStarSystemDefinition>
                                    <Input_DefinitionName VarName="$RestoredSystemDefinitionName"/>
                                    <Input_StarSystemNode VarName="$SecuredSystem"/>
                                </Action_ApplyStarSystemDefinition>

                                <!-- Remove the quest marker -->
                                <Action_RemoveQuestMarkers>
                                    <Input_Targets VarName="$SecuredSystem"/>
                                </Action_RemoveQuestMarkers>
                                
                            </Loop>

                            <Loop Count="-1">

                                <!-- Increment progress by 1 everytime an objective is secured -->
                                <Decorator_MinigameObjectiveSecured ProgressionIncrement="1">
                                    <Input_MinigameGUID VarName="$MinigameGUID"/>
                                </Decorator_MinigameObjectiveSecured>

                            </Loop>

                        </Parallel>
                    </Objective>

                    <PodiumReward MinimumParticipation="1">
                        <Reward Droplist="testDroplist5" Picks="1"/>
                        <Reward Droplist="testDroplist4" Picks="1"/>
                        <Reward Droplist="testDroplist1" Picks="1"/>
                    </PodiumReward>
                </ObjectiveSet>
                
                <!-- Team B wants to DESTROY the systems -->
                <ObjectiveSet TeamName="Refuser">
                    <Objective Name="Step1_B_Objective1" StartValue="$Zero" EndValue="$MetaplotSystemsCount">
                        <AIHint Category="Metaplot"/>
                        <Parallel CompletionPolicy="First">

                            <Sequence>
                                <!-- Build team B with empires of team B -->
                                <Action_BuildMinigameTeam>
                                    <Input_MinigameGUID VarName="$MinigameGUID"/>
                                    <Input_TeamName VarName="$MinigameTeamBName"/>
                                    <Input_Empires VarName="$TeamB"/>
                                </Action_BuildMinigameTeam>

                                <!-- Wait for the team to win -->
                                <Decorator_MinigameWon>
                                    <Input_MinigameGUID VarName="$MinigameGUID"/>
                                    <Input_TeamName VarName="$MinigameTeamBName"/>
                                </Decorator_MinigameWon>

                                <!-- Clear the markers -->
                                <Action_RemoveQuestMarkers>
                                    <Input_Targets VarName="$MetaplotSystems"/>
                                </Action_RemoveQuestMarkers>

                                <!-- Display messages -->
                                <Action_Message Message="MetaplotTeamALost">
                                    <Input_Empires VarName="$TeamA"/>
                                </Action_Message>
                                <Action_Message Message="MetaplotTeamBWon">
                                    <Input_Empires VarName="$TeamB"/>
                                </Action_Message>

                                <!-- Allow hero recruitment & healing -->
                                <Action_ApplyDescriptor Remove="true">
                                    <Input_DescriptorName VarName="$QuestInProgressDescriptorName"/>
                                    <Input_Targets VarName="$Players"/>
                                </Action_ApplyDescriptor>
                                
                            </Sequence>

                            <Loop Count="-1">

                                <!-- Wait for team to secure an objective-->
                                <Decorator_MinigameObjectiveSecured>
                                    <Input_MinigameGUID VarName="$MinigameGUID"/>
                                    <Input_TeamName VarName="$MinigameTeamBName"/>
                                    <Output_System VarName="$SecuredSystem"/>
                                </Decorator_MinigameObjectiveSecured>

                                <!-- Change definition of the secured objective's system-->
                                <Action_ApplyStarSystemDefinition>
                                    <Input_DefinitionName VarName="$DestroyedSystemDefinitionName"/>
                                    <Input_StarSystemNode VarName="$SecuredSystem"/>
                                </Action_ApplyStarSystemDefinition>

                                <!-- Remove the quest marker -->
                                <Action_RemoveQuestMarkers>
                                    <Input_Targets VarName="$SecuredSystem"/>
                                </Action_RemoveQuestMarkers>

                            </Loop>

                            <Loop Count="-1">

                                <!-- Increment progress by 1 everytime an objective is secured -->
                                <Decorator_MinigameObjectiveSecured ProgressionIncrement="1">
                                    <Input_MinigameGUID VarName="$MinigameGUID"/>
                                </Decorator_MinigameObjectiveSecured>

                            </Loop>

                        </Parallel>
                    </Objective>

                    <PodiumReward MinimumParticipation="1">
                        <Reward Droplist="testDroplist5" Picks="1"/>
                        <Reward Droplist="testDroplist4" Picks="1"/>
                        <Reward Droplist="testDroplist1" Picks="1"/>
                    </PodiumReward>
                </ObjectiveSet>
                
            </Step>
        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestGuiElementOverride" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <GuiElementOverrides>
            <GuiElementOverride Name="SophonsQuest-Chapter2.1-Science">
                <Prerequisites Target="$(Empire)">
                    <InterpreterPrerequisite>$(Two) lt 2</InterpreterPrerequisite>
                </Prerequisites>
            </GuiElementOverride>
            <GuiElementOverride Name="SophonsQuest-Chapter2.1-Military">
                <Prerequisites Target="$(Empire)">
                    <InterpreterPrerequisite>true</InterpreterPrerequisite>
                </Prerequisites>
            </GuiElementOverride>
        </GuiElementOverrides>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$Two" IntValue="2"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestShipDisbanded" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$Fleet">
                <Any>
                    <From Source="$Empire.$Fleets"/>
                </Any>
            </Var>
            <Var VarName="$FleetGUID">
                <From Source="$Fleet.$GUID"/>
            </Var>
            <Var VarName="$Ship">
                <Any>
                    <From Source="$Fleet.$Ships"/>
                </Any>
            </Var>
            <Var VarName="$ShipGUID">
                <From Source="$Ship.$GUID"/>
            </Var>
            <Var VarName="$Hangars">
                <Any>
                    <From Source="$Empire.$ColonizedStarSystems.$Hangar"/>
                </Any>
            </Var>

            <Var VarName="$One" IntValue="1"/>

            <Var VarName="$ModuleName" StringValue="ModuleEngineBase"/>
            <Var VarName="$ModuleCategory" StringValue="Support"/>

            <Var VarName="$OutShip"/>
            <Var VarName="$OutFleet"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_ShipDisbanded>
                                <Input_Hangars VarName="$Hangars"/>
                                <Input_ShipGUID VarName="$ShipGUID"/>
                                <Input_FleetGUID VarName="$FleetGUID"/>
                                <Input_ShipsInHangarsCount VarName="$One"/>
                                <Input_ModuleName VarName="$ModuleName"/>
                                <Input_ModuleCategory VarName="$ModuleCategory"/>
                                <Output_Ship VarName="$OutShip"/>
                            </Decorator_ShipDisbanded>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestNegativeProgression" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1" StartValue="3" EndValue="0" ProgressionType="Descending">
                        <Sequence>
                            <Loop Count="3">
                                <Decorator_BeginTurn ProgressionIncrement="-1"/>
                            </Loop>

                            <!-- this one is for testing the condition only-->
                            <Decorator_BeginTurn>
                                <Condition_IsProgressionComplete/>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestTimer" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$NbTurns" IntValue="3"/>
            <Var VarName="$Timer"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <StartActions>
                        <Action_StartTimer>
                            <Input_Duration VarName="$NbTurns"/>
                            <Output_Timer VarName="$Timer"/>
                        </Action_StartTimer>
                    </StartActions>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_TimerEnded>
                                    <Input_Timer VarName="$Timer"/>
                                </Condition_TimerEnded>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestComparativeProgression" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextMulti>
            <Distribution Type="FreeForAll"/>
        </QuestContextMulti>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$Players">
                <From Source="$Participants"/>
            </Var>
            <Var VarName="$Expression" StringValue="Property(Context, BankAccount)"/>
            <Var VarName="$Duration" IntValue="2"/>
            <Var VarName="$Timer"/>

        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <StartActions>
                    <Action_StartTimer>
                        <Input_Duration VarName="$Duration"/>
                        <Output_Timer VarName="$Timer"/>
                    </Action_StartTimer>
                </StartActions>
                <ObjectiveSet>
                    <Vars>
                        <Var VarName="$CurrentEmpire">
                            <From Source="$Team"/>
                        </Var>
                    </Vars>
                    <Objective Name="Step1_Objective1">
                        <Parallel CompletionPolicy="Any">
                            
                            <Loop Count="1000000">
                                <Action_SetComparativeProgress SetProgressEndAsBestValue="true">
                                    <Input_Empires VarName="$Players"/>
                                    <Input_Expression VarName="$Expression"/>
                                </Action_SetComparativeProgress>
                                <Decorator_BeginTurn/>
                            </Loop>
                            
                            <Sequence>
                                <Decorator_BeginTurn>
                                    <Condition_TimerEnded>
                                        <Input_Timer VarName="$Timer"/>
                                    </Condition_TimerEnded>
                                    <Condition_IsProgressionComplete/>
                                </Decorator_BeginTurn>
                            </Sequence>
                        </Parallel>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestCountSimObjectsWithTag" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$Path" StringValue="ClassEmpire/ClassColonizedStarSystem"/>
            <Var VarName="$SubPath" StringValue="ClassColonizedStarSystem/ClassPopulationStarSystem"/>
            <Var VarName="$Tag" StringValue="PopulationNonMajor"/>
            <Var VarName="$Count" IntValue="1"/>
            <Var VarName="$SubCount" IntValue="2"/>

        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <!-- ok, this one is a bit obscure. It roughly means "check that X objects have Y subobjects that verify a tag".
                                X and Y are quantities, it can be 0, a certain minimum, or all of the present subobjects.-->
                                <!-- in this exemple, that means "check that this empire has at least 1 system with at least 2 non major pop types"-->
                                <Condition_CountSimulationObjectsWithTag Composition="Minimum" SubComposition="Minimum">
                                    <Input_SimulationObjects VarName="$CurrentEmpire"/>
                                    <Input_Path VarName="$Path"/>
                                    <Input_SubPath VarName="$SubPath"/>
                                    <Input_Tag VarName="$Tag"/>
                                    <Input_Minimum VarName="$Count"/>
                                    <Input_SubMinimum VarName="$SubCount"/>
                                </Condition_CountSimulationObjectsWithTag>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestPlanetTerraformed" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$PlanetType" StringValue="PlanetTypeSteppes"/>
            <Var VarName="$PlanetGameplayType" StringValue="PlanetGameplayTypeTemperate"/>
            <Var VarName="$PlanetGUID">
                <First>
                    <From Source="$Empire.$HomeStarSystem.$Planets.$GUID"/>
                </First>
            </Var>
            <Var VarName="$OutputPlanet"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_PlanetTerraformed>
                                <Input_PlanetType VarName="$PlanetType"/>
                                <Input_PlanetGameplayType VarName="$PlanetGameplayType"/>
                                <Input_PlanetGUID VarName="$PlanetGUID"/>
                                <Output_Planet VarName="$OutputPlanet"/>
                            </Decorator_PlanetTerraformed>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestQuestFinished" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$QuestName" StringValue="TestSWAG"/>
            <Var VarName="$SubCategory" StringValue="!Deed,!Exploration,Chien,Test"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_QuestFinished RequiredState="Completed">
                                <Input_QuestName VarName="$QuestName"/>
                                <Input_Empire VarName="$CurrentEmpire"/>
                                <Input_SubCategory VarName="$SubCategory"/>
                            </Decorator_QuestFinished>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>


    <QuestDefinition Name="TestSpawnMultipleFleets" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>


        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$IAEmpire">
                <From Source="$LesserEmpire"/>
            </Var>
            <Var VarName="$Systems">
                <From Source="$CurrentEmpire.$HomeStarSystem.$Neighbours"/>
            </Var>
            <Var VarName="$Count" IntValue="5"/>
            <Var VarName="$FleetGUIDs"/>

            <Var VarName="$DroplistName" StringValue="TestFleetDroplist"/>
            <Var VarName="$MissionDefinitionName" StringValue="DefendSystem"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">../EmpireTypeMajor,AffinitySophons</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Action_SpawnFleets LockShipsInTheFleet="true">
                                <Input_Empire VarName="$IAEmpire"/>
                                <Input_Locations VarName="$Systems"/>
                                <Input_DroplistName VarName="$DroplistName"/>
                                <Input_Count VarName="$Count"/>
                                <Output_FleetGUIDs VarName="$FleetGUIDs"/>
                            </Action_SpawnFleets>
                            <Action_CreateFleetMissions>
                                <Input_MissionDefinitionName VarName="$MissionDefinitionName"/>
                                <Input_FleetGUIDs VarName="$FleetGUIDs"/>
                            </Action_CreateFleetMissions>
                            <Action_AddQuestMarkers>
                                <Input_TargetGUIDs VarName="$FleetGUIDs"/>
                                <Input_Empires VarName="$CurrentEmpire"/>
                            </Action_AddQuestMarkers>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>


    <QuestDefinition Name="TestDiscoverCuriosityWithHero" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$FleetGUID"/>
            <Var VarName="$MinLevel" IntValue="3"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">../EmpireTypeMajor,AffinitySophons</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_CuriosityDiscovered OnlyAllowDiscoveryByFleet="true" Initiator="Empire">
                                <Condition_FleetHasHero>
                                    <Input_FleetGUID VarName="$FleetGUID"/>
                                    <Input_HeroMinLevel VarName="$MinLevel"/>
                                </Condition_FleetHasHero>
                                <Output_FleetGUID VarName="$FleetGUID"/>
                            </Decorator_CuriosityDiscovered>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestDestroyFleets" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>


        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$Fleets">
                <From Source="$Empire.$Fleets"/>
            </Var>
            <Var VarName="$FleetGUIDs">
                <From Source="$Fleets.$GUID"/>
            </Var>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Action_DestroyFleets>
                                <Input_Fleets VarName="$Fleets"/>
                                <!--<Input_FleetGUIDs VarName="$FleetGUIDs"/> you can also give guids in input instead-->
                            </Action_DestroyFleets>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestAIHint" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>


        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$Fleets">
                <From Source="$Empire.$Fleets"/>
            </Var>
            <Var VarName="$SystemGUIDs">
                <From Source="$Empire.$HomeStarSystem.$GUID"/>
            </Var>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <AIHint Category="Minimal" MinAutoResolutionTurn="0" MaxAutoResolutionTurn="0" Motivation="0.2" AutoResolutionProbability="1">
                            <Input_Var VarName="$Fleets"/>
                            <Input_Var VarName="$SystemGUIDs"/>
                        </AIHint>
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestConditionOnFleetOnHeroAssignment" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>


        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$Expression" StringValue="Property(Context, OffensiveMilitaryPower) ge 200"/>
            <Var VarName="$OutFleet"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_HeroAssigned StopAtFirstFailedCondition="true">
                                <Condition_IsVariableNotEmpty>
                                    <Input_Variable VarName="$OutFleet"/>
                                </Condition_IsVariableNotEmpty>
                                <Condition_CheckInterpreter>
                                    <Input_Context VarName="$OutFleet"/>
                                    <Input_Expression VarName="$Expression"/>
                                </Condition_CheckInterpreter>
                                <Output_Fleet VarName="$OutFleet"/>
                            </Decorator_HeroAssigned>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestPlanetDestruction" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>


        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$PlanetType" StringValue="PlanetTypeJungle"/>
            <Var VarName="$PlanetGameplayType" StringValue="PlanetGameplayTypeTeeming"/>
            <Var VarName="$OutputPlanet"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_PlanetDestroyed>
                                <!--<Input_Planet VarName="$InputPlanet"/> you can also directly filter the planet like this-->
                                <Input_Type VarName="$PlanetType"/>
                                <Input_GameplayType VarName="$PlanetGameplayType"/>
                                <Output_Planet VarName="$OutputPlanet"/>
                            </Decorator_PlanetDestroyed>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestTimeBubble" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>


        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>

            <Var VarName="$Node">
                <From Source="$Empire.$HomeStarSystem"/>
            </Var>

            <Var VarName="$ColonizedStarSystem">
                <From Source="$Empire.$HomeColonizedStarSystem"/>
            </Var>

            <Var VarName="$DefinitionName" StringValue="TimeBubbleAcceleratingTime"/>

            <Var VarName="$OutNode"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_TimeBubbleCreated>
                                <Input_TargetEmpire VarName="$CurrentEmpire"/>
                                <Input_Node VarName="$Node"/>
                                <Input_ColonizedStarSystem VarName="$ColonizedStarSystem"/>
                                <Input_DefinitionName VarName="$DefinitionName"/>
                                <Output_Node VarName="$OutNode"/>
                            </Decorator_TimeBubbleCreated>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestHeroRecruited" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>


        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$HeroName" StringValue="HeroSophons01"/>
            <Var VarName="$OutHero"/>
            <Var VarName="$OutHeroGUID"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_HeroRecruited>
                                <Input_HeroName VarName="$HeroName"/>
                                <Output_Hero VarName="$OutHero"/>
                                <Output_HeroGUID VarName="$OutHeroGUID"/>
                            </Decorator_HeroRecruited>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>
    
    <QuestDefinition Name="TestTutorialShipDesign" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="0"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>

            <Var VarName="$Action1" StringValue="MilitaryScreenClickCreate"/>
            <Var VarName="$Action2" StringValue="MilitaryScreenClickEdit"/>
            <Var VarName="$Action3" StringValue="ShipDesignEditionSelectHull"/>
            <Var VarName="$Action4" StringValue="ShipDesignEditionPlaceModule"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_Tutorial_SimpleActionExecuted>
                                <Input_ActionName VarName="$Action1"/>
                            </Decorator_Tutorial_SimpleActionExecuted>
                            <Action_Message Message="OK">
                                <Input_Empires VarName="$CurrentEmpire"/>
                            </Action_Message>
                            <Decorator_Tutorial_SimpleActionExecuted>
                                <Input_ActionName VarName="$Action2"/>
                            </Decorator_Tutorial_SimpleActionExecuted>
                            <Action_Message Message="OK">
                                <Input_Empires VarName="$CurrentEmpire"/>
                            </Action_Message>
                            <Decorator_Tutorial_SimpleActionExecuted>
                                <Input_ActionName VarName="$Action3"/>
                            </Decorator_Tutorial_SimpleActionExecuted>
                            <Action_Message Message="OK">
                                <Input_Empires VarName="$CurrentEmpire"/>
                            </Action_Message>
                            <Decorator_Tutorial_SimpleActionExecuted>
                                <Input_ActionName VarName="$Action4"/>
                            </Decorator_Tutorial_SimpleActionExecuted>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestPopulationBoost" Category="Test" SubCategory="" TriggeringProbability="0">

        <!--============ TAGS ============-->
        <Tags>EventPopulationBoostAvailable</Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$Affinity">
                <From Source="$GameEvent.$PopulationAffinity"/>
            </Var>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_PopulationBoostApplied>
                                <Input_Affinity VarName="$Affinity"/>
                            </Decorator_PopulationBoostApplied>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestStrategicAcquired" Category="Test" SubCategory="" TriggeringProbability="0">

        <!--============ TAGS ============-->
        <Tags>EventStrategicResourceAcquired</Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="0"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestLuxuryAcquired" Category="Test" SubCategory="" TriggeringProbability="0">

        <!--============ TAGS ============-->
        <Tags>EventLuxuryResourceAcquired</Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="0"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestCannotInvade" Category="Test" SubCategory="" TriggeringProbability="0">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="0"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$Descriptor" StringValue="CannotBeInvaded"/>
            <Var VarName="$HomeSystem">
                <From Source="$Empire.$HomeStarSystem"/>
            </Var>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Action_ApplyDescriptor>
                                <Input_DescriptorName VarName="$Descriptor"/>
                                <Input_Targets VarName="$HomeSystem"/>
                            </Action_ApplyDescriptor>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestContributionFeedback" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextMulti/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$Players">
                <From Source="$Participants"/>
            </Var>

            <Var VarName="$Expression" StringValue="Property(Context, BankAccount)"/>

            <InterpretedVar VarName="$StartAmount" Target="$(Participants)">
                <Expression>Property(Context, BankAccount)</Expression>
            </InterpretedVar>

            <InterpretedVar VarName="$GoalToReach">
                <Expression>$(StartAmount) + 500</Expression>
            </InterpretedVar>

        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1" StartValue="$StartAmount" EndValue="$GoalToReach">
                        <Sequence>

                            <!--Set the progression start value of all participants-->
                            <Action_SetComparativeProgress SetProgressStart="true" ProgressCalculation="Sum">
                                <Input_Empires VarName="$Players"/>
                                <Input_Expression VarName="$Expression"/>
                            </Action_SetComparativeProgress>

                            <Parallel CompletionPolicy="Any">

                                <Loop Count="10000000">
                                    <!--Set the progression of all participants-->
                                    <Action_SetComparativeProgress ProgressCalculation="Sum">
                                        <Input_Empires VarName="$Players"/>
                                        <Input_Expression VarName="$Expression"/>
                                    </Action_SetComparativeProgress>
                                    <Decorator_BeginTurn/>
                                </Loop>

                                <Sequence>
                                    <Decorator_BeginTurn>
                                        <Condition_IsProgressionComplete/>
                                    </Decorator_BeginTurn>
                                </Sequence>

                            </Parallel>

                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestCompetitiveWarning" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextMulti>
            <Distribution Type="FreeForAll"/>
        </QuestContextMulti>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$Players">
                <From Source="$Participants"/>
            </Var>

            <Var VarName="$Expression" StringValue="Property(Context, BankAccount)"/>

            <Var VarName="$Timer"/>
            <Var VarName="$Duration" IntValue="5"/>
            <Var VarName="$DurationBeforeWarning" IntValue="3"/>

        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1" StartValue="0" EndValue="1">
                        <Sequence>

                            <Action_StartTimer>
                                <Input_Duration VarName="$Duration"/>
                                <Output_Timer VarName="$Timer"/>
                            </Action_StartTimer>
                            
                            <Parallel CompletionPolicy="All">

                                <Sequence>
                                    <Loop>
                                        <Decorator_BeginTurn/>
                                        <Input_Count VarName="$DurationBeforeWarning"/>
                                    </Loop>
                                    <Action_CompetitiveQuestWarning>
                                        <Input_Timer VarName="$Timer"/>
                                    </Action_CompetitiveQuestWarning>
                                </Sequence>

                                <Parallel CompletionPolicy="Any">

                                    <Loop Count="10000000">
                                        <Action_SetComparativeProgress SetProgressEndAsBestValue="true">
                                            <Input_Empires VarName="$Players"/>
                                            <Input_Expression VarName="$Expression"/>
                                        </Action_SetComparativeProgress>
                                        <Decorator_BeginTurn/>
                                    </Loop>

                                    <Sequence>
                                        <Decorator_BeginTurn>
                                            <Condition_TimerEnded>
                                                <Input_Timer VarName="$Timer"/>
                                            </Condition_TimerEnded>
                                            <Condition_IsProgressionComplete/>
                                        </Decorator_BeginTurn>
                                    </Sequence>

                                </Parallel>
                            </Parallel>

                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestExplorationCondition" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>


        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$Percentage" IntValue="50"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_ExplorationProgress MinimumState="Revealed">
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_Percentage VarName="$Percentage"/>
                                </Condition_ExplorationProgress>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestHasSystems_IgnoreOutposts" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>


        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$Two" IntValue="2"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_HasSystems IgnoreOutposts="true">
                                    <Input_Empires VarName="$CurrentEmpire"/>
                                    <Input_MinimumAmount VarName="$Two"/>
                                </Condition_HasSystems>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestSpecialNodeRevealed" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags><!--EventSpecialNodeRevealed--></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$TargetCategory" StringValue="CategorySpecialNodeCollapsingStar"/>
            <Var VarName="$SpecialNode">
                <From Source="$GameEvent.$SpecialNode.$Category">
                    <Where>
                        <FilterByStringValue StringValueVarName="$TargetCategory"/>
                    </Where>
                </From>
            </Var>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestExplorationPercentage" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$Percentage">
                <From Source="$Empire.$RevealedNodePercentage"/>
            </Var>
            <Var VarName="$NeededPercentage" IntValue="50"/>
            <Var VarName="$Expression" StringValue="$(Percentage)"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1" StartValue="$Percentage" EndValue="$NeededPercentage">
                        <Sequence>
                            <Decorator_ExploredNode Initiator="Empire" MinimumState="Revealed">
                                <Condition_IsProgressionComplete>
                                    <Input_Expression VarName="$Expression"/>
                                </Condition_IsProgressionComplete>
                                <Output_Percentage VarName="$Percentage"/>
                            </Decorator_ExploredNode>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestMultipleOutcome" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet DynamicRewardPreviewLocalizationKey="maybe additional stuff">
                    <Objective Name="Step1_Objective1">
                        <Parallel CompletionPolicy="First">
                            <Sequence>
                                <Decorator_ColonizedSystem Initiator="Empire"/>
                                <Action_ChooseOutcome Name="Outcome1"/>
                            </Sequence>
                            <Decorator_BeginTurn/>
                        </Parallel>
                        <Outcome Name="Outcome1">
                            <Reward Droplist="testDroplist0" PreviewLocalizationKey="maybe more dust"/>
                        </Outcome>
                    </Objective>
                    <Reward Droplist="testDroplist1"/>
                    <Reward Droplist="testDroplist5" EvaluationMethod="Dynamic" PreviewLocalizationKey="some dust"/>
                </ObjectiveSet>
            </Step>
        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestDiscardedChoice" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <Choice DefaultChoiceIndex="0">
                    <ChoiceItem ObjectiveSetIndex="0">
                        <Prerequisites>
                            <InterpreterPrerequisite>false</InterpreterPrerequisite>
                        </Prerequisites>
                    </ChoiceItem>
                    <ChoiceItem ObjectiveSetIndex="1">
                        <Prerequisites>
                            <InterpreterPrerequisite>true</InterpreterPrerequisite>
                        </Prerequisites>
                    </ChoiceItem>
                    <ChoiceItem ObjectiveSetIndex="2">
                        <Prerequisites>
                            <InterpreterPrerequisite>false</InterpreterPrerequisite>
                        </Prerequisites>
                    </ChoiceItem>
                </Choice>
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
                <ObjectiveSet>
                    <Objective Name="Step1_Objective2">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
                <ObjectiveSet>
                    <Objective Name="Step1_Objective3">
                        <Sequence>
                            <Decorator_BeginTurn/>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
                <Reward Droplist="testDroplist1"/>
            </Step>
        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestDecolonize" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$MySystems">
                <From Source="$Empire.$ColonizedStarSystems.$StarSystem"/>
            </Var>
            <Var VarName="$MyGUIDs">
                <From Source="$MySystems.$GUID"/>
            </Var>
            <Var VarName="$OutputStarSystem"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_SystemDecolonized Initiator="Empire">
                                <!--<Input_Systems VarName="$MySystems"/> it is also possible to provide directly the system -->
                                <Input_SystemGUIDs VarName="$MyGUIDs"/>
                                <Output_StarSystem VarName="$OutputStarSystem"/>
                            </Decorator_SystemDecolonized>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
                <Reward Droplist="testDroplist1"/>
            </Step>
        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestCuriosityMarker" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$AllCuriosities">
                <From Source="$Empire.$ColonizedStarSystems.$StarSystem.$Planets.$Curiosities"/>
            </Var>
            <Var VarName="$Markers"/>
        </Vars>

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Action_AddQuestMarkers>
                                <Input_Targets VarName="$AllCuriosities"/>
                                <Input_Empires VarName="$CurrentEmpire"/>
                                <Output_Markers VarName="$Markers"/>
                            </Action_AddQuestMarkers>
                            <Decorator_BeginTurn/>
                            <Action_RemoveQuestMarkers>
                                <Input_Markers VarName="$Markers"/>
                            </Action_RemoveQuestMarkers>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
                <Reward Droplist="testDroplist1"/>
            </Step>
        </Steps>

    </QuestDefinition>


    <QuestDefinition Name="TestCheckPathPourri" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$One" IntValue="1"/>
            <Var VarName="$Path" StringValue="ClassEmpire/ClassColonizedStarSystem"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_CheckPath AllowFailureIfNoSimObject="true">
                                    <Input_SimulationObject VarName="$One"/>
                                    <Input_Path VarName="$Path"/>
                                </Condition_CheckPath>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>


    <QuestDefinition Name="TestPirateEmpire" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$Pirates">
                <From Source="$PirateEmpire"/>
            </Var>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_BeginTurn>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestAddLevelToHeroes" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$HeroesToLevelUp">
                <From Source="$Empire.$Heroes"/>
            </Var>
            <Var VarName="$GUIDS">
                <From Source="$HeroesToLevelUp.$GUID"/>
            </Var>
            <Var VarName="$Amount" IntValue="5"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Action_AddLevelsToHeroes>
                                <Input_Heroes VarName="$HeroesToLevelUp"/>
                                <!--<Input_HeroGUIDs VarName="$GUIDS"/> you can also directly pass the heroes -->
                                <Input_Amount VarName="$Amount"/>
                            </Action_AddLevelsToHeroes>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestNodeEffect" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$HomeSystem">
                <From Source="$Empire.$HomeStarSystem"/>
            </Var>
            <Var VarName="$HomeSystemGUID">
                <From Source="$HomeSystem.$GUID"/>
            </Var>
            <Var VarName="$DefinitionName" StringValue="MetaplotSystemRestoredEffect"/>
            <Var VarName="$NodeEffectGUID"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Action_ApplyNodeEffect>
                                <Input_Targets VarName="$HomeSystem"/>
                                <!--<Input_TargetGUIDs VarName="$HomeSystemGUID"/> you can also provide the GUIDS instead of the systems directly-->
                                <Input_DefinitionName VarName="$DefinitionName"/>
                                <Output_NodeEffectGUID VarName="$NodeEffectGUID"/>
                            </Action_ApplyNodeEffect>
                            <Decorator_BeginTurn/>
                            <Action_RemoveNodeEffect>
                                <Input_NodeEffectGUID VarName="$NodeEffectGUID"/>
                            </Action_RemoveNodeEffect>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <QuestDefinition Name="TestUsedPortal" Category="Test" SubCategory="">

        <!--============ TAGS ============-->
        <Tags></Tags>

        <QuestContextSolo/>
        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$Fleet"/>
            <Var VarName="$FleetGUID"/>
            <Var VarName="$System"/>
            <Var VarName="$SystemGUID"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->
        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <Sequence>
                            <Decorator_FleetUsedPortal>
                                <Output_Fleet VarName="$Fleet"/>
                                <Output_FleetGUID VarName="$FleetGUID"/>
                                <Output_Node VarName="$System"/>
                                <Output_NodeGUID VarName="$SystemGUID"/>
                            </Decorator_FleetUsedPortal>
                        </Sequence>
                    </Objective>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

</Datatable>

<!-- ################## -->
<!-- AI BEHAVIOURS LIST -->
<!-- ################## -->
<!--

	### INVADE SYSTEM

	<AIHint Category="Invade" Motivation="0.6">
		<Input_Var VarName="$SystemToInvade"/>
	</AIHint>
	
	### SEND FLEET TO ORBIT SYSTEM

	<AIHint Category="Exploration" Motivation="0.6">
		<Input_Var VarName="$SystemToSendFleetToOrbit"/>
	</AIHint>
	
	### INVESTIGATE CURIOSITIES ON SYSTEM
	
	<AIHint Category="Curiosity" Motivation="0.4">
		<Input_Var VarName="$SystemToSendExpeditionsTo"/>
	</AIHint>
	
	### PUT FLEET IN SPECIFIC HANGER
	
	<AIHint Category="ReturnToBase" Motivation="0.5">
		<Input_Var VarName="$FleetToReturn"/>
		<Input_Var VarName="$SystemToReturnTo"/>
	</AIHint>
	
	### PUT FLEET IN ANY HANGER

	<AIHint Category="ReturnToBase" Motivation="0.5">
		<Input_Var VarName="$FleetToReturn"/>
	</AIHint>
	
	### MAXIMIZE RESOURCE ON EMPIRE
	
	<AIHint Category="MaximizeResource" Motivation="0.5">
		<Resource>Dust</Resource>
	</AIHint>
	<AIHint Category="MaximizeResource" Motivation="0.5">
		<Resource>Science</Resource>
	</AIHint>
	<AIHint Category="MaximizeResource" Motivation="0.5">
		<Resource>Food</Resource>
	</AIHint>
	<AIHint Category="MaximizeResource" Motivation="0.5">
		<Resource>Industry</Resource>
	</AIHint>
	<AIHint Category="MaximizeResource" Motivation="0.5">
		<Resource>EmpirePoint</Resource>
	</AIHint>
	</AIHint>
	<AIHint Category="MaximizeResource" Motivation="0.5">
		<Resource>Approval</Resource>
	</AIHint>   
	
	
	### MAXIMIZE RESOURCE ON BEST SYSTEM
	
	<AIHint Category="MaximizeResourceOnSystem" Motivation="0.5">
		<Resource>Dust</Resource>
	</AIHint>
	<AIHint Category="MaximizeResourceOnSystem" Motivation="0.5">
		<Resource>Science</Resource>
	</AIHint>
	<AIHint Category="MaximizeResourceOnSystem" Motivation="0.5">
		<Resource>Food</Resource>
	</AIHint>
	<AIHint Category="MaximizeResourceOnSystem" Motivation="0.5">
		<Resource>Industry</Resource>
	</AIHint>
	<AIHint Category="MaximizeResourceOnSystem" Motivation="0.5">
		<Resource>EmpirePoint</Resource>
	</AIHint>
	</AIHint>
	<AIHint Category="MaximizeResourceOnSystem" Motivation="0.5">
		<Resource>Approval</Resource>
	</AIHint>            
	
	
	### MAXIMIZE RESOURCE ON SPECIFIC SYSTEM
		
	<AIHint Category="MaximizeResourceOnSystem" Motivation="0.5">
		<Resource>Dust</Resource>
		<Input_Var VarName="$SystemToMaximizeResourceOn"/>
	</AIHint>
	<AIHint Category="MaximizeResourceOnSystem" Motivation="0.5">
		<Resource>Science</Resource>
		<Input_Var VarName="$SystemToMaximizeResourceOn"/>
	</AIHint>
	<AIHint Category="MaximizeResourceOnSystem" Motivation="0.5">
		<Resource>Food</Resource>
		<Input_Var VarName="$SystemToMaximizeResourceOn"/>
	</AIHint>
	<AIHint Category="MaximizeResourceOnSystem" Motivation="0.5">
		<Resource>Industry</Resource>
		<Input_Var VarName="$SystemToMaximizeResourceOn"/>
	</AIHint>
	<AIHint Category="MaximizeResourceOnSystem" Motivation="0.5">
		<Resource>EmpirePoint</Resource>
		<Input_Var VarName="$SystemToMaximizeResourceOn"/>
	</AIHint>
	</AIHint>
	<AIHint Category="MaximizeResourceOnSystem" Motivation="0.5">
		<Resource>Approval</Resource>
		<Input_Var VarName="$SystemToMaximizeResourceOn"/>
	</AIHint>            
-->