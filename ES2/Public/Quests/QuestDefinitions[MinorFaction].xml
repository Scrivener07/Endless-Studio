<?xml version="1.0" encoding="utf-8" ?>
<Datatable xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xsi:noNamespaceSchemaLocation="../Schemas/QuestDefinition.xsd">

    
    <QuestDefinition Name="MinorFactionQuest01" Category="MinorFactionQuest" SubCategory="">

        <!--============ TAGS ============-->
         <Tags>MinorFactionQuest</Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="2"
                          NumberOfOccurrencesPerEmpire="1" 
                          NumberOfConcurrentInstances="0"
                          Cooldown="1"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$MinorEmpire">
                <From Source="$Context"/>
            </Var>
            <InterpretedVar VarName="$PopulationAmount" Target="$(Empire)">
                <Expression>SumProperty(Context, @'ClassEmpire/ClassPopulation,PopulationNonMajor', PopulationCount)</Expression>
            </InterpretedVar>
             <InterpretedVar VarName="$TargetAmount" Target="$(Empire)">
                <Expression>$(PopulationAmount)+3</Expression>
            </InterpretedVar>
            <Var VarName="$Expression01" StringValue="SumProperty(Context, @'ClassEmpire/ClassPopulation,PopulationNonMajor', PopulationCount)"/>
            <Var VarName="$ByAtWarWithMinor" StringValue="DiplomaticRelationStateMinorAdvancedWar"/>
            <Var VarName="$DiplomaticRelationStateName" StringValue="DiplomaticRelationStateMinorAdvancedBrainwashed"/>
            
            <LocalizationVar LocalizationKey="$MinorFactionName" Source="$MinorEmpire"/>
            <LocalizationVar LocalizationKey="$CurrentEmpireName" Source="$CurrentEmpire"/>
            <LocalizationVar LocalizationKey="$TargetAmountName" Source="$TargetAmount"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Context)" AnyPrerequisite="true">
            <PathPrerequisite Flags="Prerequisite">EmpireTypeMinor</PathPrerequisite>          
        </Prerequisites>

        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite" Inverted="true">ClassEmpire/ClassPopulationEmpireAffinityVampirilis</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>  
                    <Objective Name="Step1_Objective1" StartValue="$PopulationAmount" EndValue="$TargetAmount">
                        <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="17" MaxAutoResolutionTurn="25" AutoResolutionProbability="0.5" />
                        <Parallel CompletionPolicy="First">
                            <Sequence>
                                <Decorator_BeginTurn>
                                    <Condition_IsProgressionComplete>
                                    <Input_Context VarName="$CurrentEmpire"/>
                                    <Input_EmpireWhoseProgressToUpdate VarName="$CurrentEmpire"/>
                                    <Input_Expression VarName="$Expression01"/>
                                </Condition_IsProgressionComplete>
                                </Decorator_BeginTurn>               
                                <Action_AssimilateMinorEmpire>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinorEmpire VarName="$MinorEmpire"/>                                  
                                </Action_AssimilateMinorEmpire>
                            </Sequence>
                            <Sequence>
                                <Parallel CompletionPolicy="First">
                                    <Sequence>
                                        <Decorator_MinorEmpireIntegrated Initiator="AllEmpires">
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                        </Decorator_MinorEmpireIntegrated>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_DiplomaticRelationChanged Initiator="AllEmpires">
                                            <Input_OtherEmpire VarName="$MinorEmpire"/>
                                            <Input_DiplomaticRelationState VarName="$DiplomaticRelationStateName"/>
                                        </Decorator_DiplomaticRelationChanged>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_MinorFactionRelation>
                                            <Input_PlayerEmpire VarName="$CurrentEmpire"/>
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                            <Input_RelationState VarName="$ByAtWarWithMinor"/>
                                        </Decorator_MinorFactionRelation>
                                    </Sequence>
                                </Parallel>
                                <Action_Fail/>
                            </Sequence>
                        </Parallel>
                    </Objective>
                </ObjectiveSet>
                <Reward Droplist="DroplistMinorRewards" Picks="1"/>
                <Reward  LocalizationKey="%Pacification"/>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="MinorFactionQuest02" Category="MinorFactionQuest" SubCategory="">

        <!--============ TAGS ============-->
         <Tags>MinorFactionQuest</Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="2"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"
                          Cooldown="5"/>

       <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$IAEmpire">
                <From Source="$LesserEmpire"/>
            </Var>
            <Var VarName="$MinorEmpire">
                <From Source="$Context"/>
            </Var>
            <Var VarName="$MinorHomeSystem">
                <From Source="$MinorEmpire.$HomeStarSystem"/>
            </Var>
            <Var VarName="$MinorHomeSystemConstellation">
                <From Source="$MinorHomeSystem.$Constellation"/>
            </Var>
            <Var VarName="$CloseSystem">
                <Any>
                    <From Source="$MinorHomeSystemConstellation.$StarSystems">
                        <Where>
                            <PathPrerequisite Inverted="true" Flags="Prerequisite">ClassStarSystem,HomeSystem</PathPrerequisite>
                            <PathPrerequisite Inverted="true" Flags="Prerequisite">ClassStarSystem,IsolatedNode</PathPrerequisite>
                        </Where>
                        <OrderBy>
                            <SortSystemByDistance OriginVarName="$MinorHomeSystem" SortBy="Farthest" MinimumDistance="1" MaximumDistance="20" MinimumCandidateCount="1"/>
                        </OrderBy>
                    </From>
                </Any>
            </Var>
            
            <DroplistVar VarName="$Fleet01" Droplist="DroplistMinorFleet02"/>
            
            <Var VarName="$Fleet01GUID"/>
            <Var VarName="$Marker01"/>
            <Var VarName="$ByAtWarWithMinor" StringValue="DiplomaticRelationStateMinorAdvancedWar"/>
            <Var VarName="$DiplomaticRelationStateName" StringValue="DiplomaticRelationStateMinorAdvancedBrainwashed"/>
            <Var VarName="$FleetMissionDefinitionName01" StringValue="MinorRoam"/>
            <Var VarName="$FleetMissionDefinitionName01GUID"/>
            <LocalizationVar LocalizationKey="$MinorFactionName" Source="$MinorEmpire"/>
           
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Context)" AnyPrerequisite="true">
            <PathPrerequisite Flags="Prerequisite">EmpireTypeMinor</PathPrerequisite>
        </Prerequisites>

       <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <StartActions>
                        <Action_SpawnFleets>                           
                            <Input_Empire VarName="$IAEmpire"/>
                            <Input_Locations VarName="$CloseSystem"/>
                            <Input_DroppableFleet VarName="$Fleet01"/>
                            <Output_FleetGUIDs VarName="$Fleet01GUID"/>
                        </Action_SpawnFleets>
                        <Action_CreateFleetMissions>
                            <Input_MissionDefinitionName VarName="$FleetMissionDefinitionName01"/>
                            <Input_FleetGUIDs VarName="$Fleet01GUID"/>
                            <Input_TargetEmpires VarName="$CurrentEmpire"/>                            
                            <Output_MissionGUIDs VarName="$FleetMissionDefinitionName01GUID"/>
                        </Action_CreateFleetMissions>
                        <Action_AddQuestMarkers>
                            <Input_TargetGUIDs VarName="$Fleet01GUID"/>
                            <Input_Empires VarName="$CurrentEmpire"/>
                            <Output_Markers VarName="$Marker01"/>
                        </Action_AddQuestMarkers>
                    </StartActions>
                    <Objective Name="Step1_Objective1">
                        <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="17" MaxAutoResolutionTurn="25" AutoResolutionProbability="0.5" />
                        <Parallel CompletionPolicy="First">
                            <Sequence>                               
                                <Decorator_Intercept Initiator="Empire">                                    
                                    <Input_VictimFleetGUID VarName="$Fleet01GUID"/>
                                </Decorator_Intercept>
                                <Action_DestroyFleets>
                                    <Input_FleetGUIDs VarName="$Fleet01GUID"/>
                                </Action_DestroyFleets> 
                                <Action_RemoveQuestMarkers>
                                    <Input_Markers VarName="$Marker01"/>
                                </Action_RemoveQuestMarkers>
                                <Action_AssimilateMinorEmpire>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinorEmpire VarName="$MinorEmpire"/>
                                </Action_AssimilateMinorEmpire>
                            </Sequence>
                            <Sequence>
                                <Parallel CompletionPolicy="First">
                                    <Sequence>
                                        <Decorator_BattleEnded Initiator="AllEmpires">
                                            <Condition_BattleEnded_FleetDestroyed>
                                                <Input_FleetGUIDs VarName="$Fleet01GUID"/>
                                            </Condition_BattleEnded_FleetDestroyed>
                                        </Decorator_BattleEnded>
                                        <Action_RemoveQuestMarkers>
                                            <Input_Markers VarName="$Marker01"/>
                                        </Action_RemoveQuestMarkers>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_MinorEmpireIntegrated Initiator="AllEmpires">
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                        </Decorator_MinorEmpireIntegrated>
                                        <Action_RemoveQuestMarkers>
                                            <Input_Markers VarName="$Marker01"/>
                                        </Action_RemoveQuestMarkers>
                                        <Action_DestroyFleets>
                                            <Input_FleetGUIDs VarName="$Fleet01GUID"/>
                                        </Action_DestroyFleets>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_DiplomaticRelationChanged Initiator="AllEmpires">
                                            <Input_OtherEmpire VarName="$MinorEmpire"/>
                                            <Input_DiplomaticRelationState VarName="$DiplomaticRelationStateName"/>
                                        </Decorator_DiplomaticRelationChanged>
                                        <Action_RemoveQuestMarkers>
                                            <Input_Markers VarName="$Marker01"/>
                                        </Action_RemoveQuestMarkers>
                                        <Action_DestroyFleets>
                                            <Input_FleetGUIDs VarName="$Fleet01GUID"/>
                                        </Action_DestroyFleets>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_MinorFactionRelation>
                                            <Input_PlayerEmpire VarName="$CurrentEmpire"/>
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                            <Input_RelationState VarName="$ByAtWarWithMinor"/>
                                        </Decorator_MinorFactionRelation>
                                        <Action_RemoveQuestMarkers>
                                            <Input_Markers VarName="$Marker01"/>
                                        </Action_RemoveQuestMarkers>
                                        <Action_DestroyFleets>
                                            <Input_FleetGUIDs VarName="$Fleet01GUID"/>
                                        </Action_DestroyFleets>
                                    </Sequence>
                                </Parallel>                               
                                <Action_Fail/>
                            </Sequence>
                        </Parallel>
                    </Objective>
                </ObjectiveSet>
                <Reward Droplist="DroplistMinorRewards" Picks="1"/>
                <Reward  LocalizationKey="%Pacification"/>
            </Step>
        </Steps>
    </QuestDefinition>


    <QuestDefinition Name="MinorFactionQuest03" Category="MinorFactionQuest" SubCategory="">

        <!--============ TAGS ============-->
         <Tags>MinorFactionQuest</Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="2"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"
                          Cooldown="5"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$MinorEmpire">
                <From Source="$Context"/>
            </Var>
            <Var VarName="$ByAtWarWithMinor" StringValue="DiplomaticRelationStateMinorAdvancedWar"/>
            <Var VarName="$DiplomaticRelationStateName" StringValue="DiplomaticRelationStateMinorAdvancedBrainwashed"/>
            <Var VarName="$Timer"/>
            <InterpretedVar VarName="$Amount01" Target="$(Empire)">
                <Expression>MaxProperty(Context, @'ClassEmpire/ClassColonizedStarSystem',NetSystemResearch)+50</Expression>
            </InterpretedVar>
            <InterpretedVar VarName="$Amount02" Target="$(Empire)">
                <Expression>Property(Context, @ClassEmpire, GameSpeedMultiplier, true)*14</Expression>
            </InterpretedVar>
            <Var VarName="$Expression1" StringValue="MaxProperty(Context, @'ClassEmpire/ClassColonizedStarSystem',NetSystemResearch) ge $(Amount01)"/>
            
            <LocalizationVar LocalizationKey="$MinorFactionName" Source="$MinorEmpire"/>
            <LocalizationVar LocalizationKey="$Amount01Name" Source="$Amount01"/>
            <LocalizationVar LocalizationKey="$Amount02Name" Source="$Amount02"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Context)" AnyPrerequisite="true">
            <PathPrerequisite Flags="Prerequisite">EmpireTypeMinor</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <StartActions>
                         <Action_StartTimer>
                            <Input_Duration VarName="$Amount02"/>
                            <Output_Timer VarName="$Timer"/>
                        </Action_StartTimer>
                    </StartActions>
                    <Objective Name="Step1_Objective1">
                        <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="17" MaxAutoResolutionTurn="25" AutoResolutionProbability="0.5" />
                        <Parallel CompletionPolicy="First">
                            <Sequence>
                                <Decorator_BeginTurn>
                                    <Condition_CheckInterpreter>
                                        <Input_Context VarName="$CurrentEmpire"/>
                                        <Input_Expression VarName="$Expression1"/>
                                    </Condition_CheckInterpreter>
                                </Decorator_BeginTurn>
                                <Action_AssimilateMinorEmpire>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinorEmpire VarName="$MinorEmpire"/>
                                </Action_AssimilateMinorEmpire>
                            </Sequence>
                            <Sequence>
                                <Parallel CompletionPolicy="First">
                                    <Sequence>
                                        <Decorator_BeginTurn>
                                            <Condition_TimerEnded>
                                                <Input_Timer VarName="$Timer"/>
                                            </Condition_TimerEnded>
                                    </Decorator_BeginTurn>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_MinorEmpireIntegrated Initiator="AllEmpires">
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                        </Decorator_MinorEmpireIntegrated>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_DiplomaticRelationChanged Initiator="AllEmpires">
                                            <Input_OtherEmpire VarName="$MinorEmpire"/>
                                            <Input_DiplomaticRelationState VarName="$DiplomaticRelationStateName"/>
                                        </Decorator_DiplomaticRelationChanged>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_MinorFactionRelation>
                                            <Input_PlayerEmpire VarName="$CurrentEmpire"/>
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                            <Input_RelationState VarName="$ByAtWarWithMinor"/>
                                        </Decorator_MinorFactionRelation>
                                    </Sequence>
                                </Parallel>
                                <Action_Fail/>
                            </Sequence>
                        </Parallel>
                    </Objective>
                </ObjectiveSet>
                <Reward Droplist="DroplistMinorRewardsEra1" Picks="1"/>
                <Reward  LocalizationKey="%Pacification"/>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="MinorFactionQuest04" Category="MinorFactionQuest" SubCategory="">

        <!--============ TAGS ============-->
       <Tags>MinorFactionQuest</Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="2"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"
                          Cooldown="5"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$MinorEmpire">
                <From Source="$Context"/>
            </Var>

            <DroplistVar VarName="$CuriosityAmount" Droplist="DroplistRandomNumber"/>
            <Var VarName="$CuriosityAmountValue">
                <From Source="$CuriosityAmount.$Value"/>
            </Var>
            <Var VarName="$ByAtWarWithMinor" StringValue="DiplomaticRelationStateMinorAdvancedWar"/>
            <Var VarName="$DiplomaticRelationStateName" StringValue="DiplomaticRelationStateMinorAdvancedBrainwashed"/>
            <LocalizationVar LocalizationKey="$MinorFactionName" Source="$MinorEmpire"/>
           
        </Vars>

       <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Context)" AnyPrerequisite="true">
            <PathPrerequisite Flags="Prerequisite">EmpireTypeMinor</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="17" MaxAutoResolutionTurn="25" AutoResolutionProbability="0.5" />
                        <Parallel CompletionPolicy="First">
                            <Sequence>
                                <Loop>
                                    <Decorator_CuriosityDiscovered Initiator="Empire">                                        
                                    </Decorator_CuriosityDiscovered>
                                    <Input_Count VarName="$CuriosityAmountValue"/>
                                </Loop>
                                <Action_AssimilateMinorEmpire>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinorEmpire VarName="$MinorEmpire"/>
                                </Action_AssimilateMinorEmpire>
                            </Sequence>
                            <Sequence>
                                <Parallel CompletionPolicy="First">
                                    <Sequence>
                                        <Decorator_MinorEmpireIntegrated Initiator="AllEmpires">
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                        </Decorator_MinorEmpireIntegrated>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_DiplomaticRelationChanged Initiator="AllEmpires">
                                            <Input_OtherEmpire VarName="$MinorEmpire"/>
                                            <Input_DiplomaticRelationState VarName="$DiplomaticRelationStateName"/>
                                        </Decorator_DiplomaticRelationChanged>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_MinorFactionRelation>
                                            <Input_PlayerEmpire VarName="$CurrentEmpire"/>
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                            <Input_RelationState VarName="$ByAtWarWithMinor"/>
                                        </Decorator_MinorFactionRelation>
                                    </Sequence>
                                </Parallel>
                                <Action_Fail/>
                            </Sequence>
                        </Parallel>
                    </Objective>
                </ObjectiveSet>
                <Reward Droplist="DroplistMinorRewards" Picks="1"/>
                <Reward  LocalizationKey="%Pacification"/>
            </Step>
        </Steps>
    </QuestDefinition>

   <QuestDefinition Name="MinorFactionQuest05" Category="MinorFactionQuest" SubCategory="">

      <!--============ TAGS ============-->
         <Tags>MinorFactionQuest</Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="2"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"
                          Cooldown="5"/>

       <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$IAEmpire">
                <From Source="$LesserEmpire"/>
            </Var>
            <Var VarName="$MinorEmpireContext">
                <From Source="$Context"/>
            </Var>

            <Var VarName="$MinorHomeSystem">
                <From Source="$MinorEmpireContext.$HomeStarSystem"/>
            </Var>
            <Var VarName="$MinorHomeSystemConstellation">                
                <From Source="$MinorHomeSystem.$Constellation"/>                
            </Var>
            <Var VarName="$CloseSystem">
                <Any>
                    <From Source="$MinorHomeSystemConstellation.$StarSystems">
                        <Where>
                            <PathPrerequisite Inverted="true" Flags="Prerequisite">ClassStarSystem,HomeSystem</PathPrerequisite>
                            <PathPrerequisite Inverted="true" Flags="Prerequisite">ClassStarSystem,IsolatedNode</PathPrerequisite>
                        </Where>
                        <OrderBy>
                            <SortSystemByDistance OriginVarName="$MinorHomeSystem" SortBy="Farthest" MinimumDistance="1" MaximumDistance="20" MinimumCandidateCount="1"/>
                        </OrderBy>
                    </From>
                </Any>
            </Var>

            <Var VarName="$HeroShip" StringValue="ShipRoleHero"/>
            <Var VarName="$ByAtWarWithMinor" StringValue="DiplomaticRelationStateMinorAdvancedWar"/>
            <DroplistVar VarName="$CuriosityAmount" Droplist="DroplistRandomNumber"/>
            
            <InterpretedVar VarName="$TurnAmount01" Target="$(Empire)">
                <Expression>Property(Context, @../ClassEmpire, GameSpeedMultiplier, true)*6</Expression>
            </InterpretedVar>  
            
            <Var VarName="$One" IntValue="1"/>
            <Var VarName="$Marker01"/>
            <Var VarName="$DiplomaticRelationStateName" StringValue="DiplomaticRelationStateMinorAdvancedBrainwashed"/>

            <DroplistVar Droplist="DroplistQuest21" VarName="$PirateFleet01"/>
            <Var VarName="$FleetMissionDefinitionName01" StringValue="GotoAndAttack"/>
            <Var VarName="$PirateFleet01GUID"/>
            <Var VarName="$FleetMissionDefinitionName01GUID"/>
            <LocalizationVar LocalizationKey="$MinorFactionName" Source="$MinorEmpireContext"/>
            <LocalizationVar LocalizationKey="$MinorFactionHomeSystemName" Source="$MinorHomeSystem"/>
            <LocalizationVar LocalizationKey="$AmountName" Source="$TurnAmount01"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Context)" AnyPrerequisite="true">
            <PathPrerequisite Flags="Prerequisite">EmpireTypeMinor</PathPrerequisite>
        </Prerequisites>

      <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <StartActions>
                        <Action_AddQuestMarkers RevealsLocation="true">
                            <Input_Targets VarName="$MinorHomeSystem"/>
                            <Input_Empires VarName="$CurrentEmpire"/>
                            <Output_Markers VarName="$Marker01"/>
                        </Action_AddQuestMarkers>                       
                    </StartActions>
                    <Objective Name="Step1_Objective1" StartValue="0" EndValue="$TurnAmount01">
                        <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="17" MaxAutoResolutionTurn="25" AutoResolutionProbability="0.5" />
                        <Parallel CompletionPolicy="First">
                            <Sequence>
                                <Sequence>
                                    <Decorator_BeginTurn>
                                        <Condition_FleetShipStatsOnNode>
                                            <Input_Node VarName="$MinorHomeSystem"/>
                                            <Input_Empire VarName="$CurrentEmpire"/>
                                            <Input_RoleName VarName="$HeroShip"/>
                                            <Input_MinimumAmount VarName="$One"/>
                                        </Condition_FleetShipStatsOnNode>
                                    </Decorator_BeginTurn>
                                    <Action_SpawnFleets>
                                        <Input_Empire VarName="$IAEmpire"/>
                                        <Input_Locations VarName="$CloseSystem"/>
                                        <Input_DroppableFleet VarName="$PirateFleet01"/>
                                        <Output_FleetGUIDs VarName="$PirateFleet01GUID"/>
                                    </Action_SpawnFleets>
                                    <Action_CreateFleetMissions>
                                        <Input_MissionDefinitionName VarName="$FleetMissionDefinitionName01"/>
                                        <Input_FleetGUIDs VarName="$PirateFleet01GUID"/>
                                        <Input_TargetEmpires VarName="$CurrentEmpire"/>
                                        <Input_Targets VarName="$MinorHomeSystem"/>
                                        <Output_MissionGUIDs VarName="$FleetMissionDefinitionName01GUID"/>
                                    </Action_CreateFleetMissions>
                                    <Loop>
                                        <Decorator_BeginTurn ProgressionIncrement="1">                                      
                                            <Condition_FleetShipStatsOnNode>                                            
                                                <Input_Node VarName="$MinorHomeSystem"/>
                                                <Input_Empire VarName="$CurrentEmpire"/>                                            
                                                <Input_RoleName VarName="$HeroShip"/>
                                                <Input_MinimumAmount VarName="$One"/>                                            
                                            </Condition_FleetShipStatsOnNode>                                       
                                        </Decorator_BeginTurn>
                                        <Input_Count VarName="$TurnAmount01"/>
                                    </Loop>
                                    <Action_AssimilateMinorEmpire>
                                        <Input_Empire VarName="$CurrentEmpire"/>
                                        <Input_MinorEmpire VarName="$MinorEmpireContext"/>
                                    </Action_AssimilateMinorEmpire>
                                    <Action_RemoveQuestMarkers>
                                        <Input_Markers VarName="$Marker01"/>
                                    </Action_RemoveQuestMarkers>
                                </Sequence>
                            </Sequence>
                            <Sequence>
                                <Parallel CompletionPolicy="First">
                                    <Sequence>
                                        <Decorator_MinorEmpireIntegrated Initiator="AllEmpires">
                                            <Input_MinorEmpire VarName="$MinorEmpireContext"/>
                                        </Decorator_MinorEmpireIntegrated> 
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_DiplomaticRelationChanged Initiator="AllEmpires">
                                            <Input_OtherEmpire VarName="$MinorEmpireContext"/>
                                            <Input_DiplomaticRelationState VarName="$DiplomaticRelationStateName"/>                                        
                                        </Decorator_DiplomaticRelationChanged>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_MinorFactionRelation>                                          
                                            <Input_PlayerEmpire VarName="$CurrentEmpire"/>
                                            <Input_MinorEmpire VarName="$MinorEmpireContext"/>
                                            <Input_RelationState VarName="$ByAtWarWithMinor"/>
                                        </Decorator_MinorFactionRelation>                                       
                                    </Sequence>
                                </Parallel>
                                <Action_RemoveQuestMarkers>
                                    <Input_Markers VarName="$Marker01"/>
                                </Action_RemoveQuestMarkers>
                                <Action_Fail/>
                            </Sequence>
                        </Parallel>
                    </Objective>
                </ObjectiveSet>
                <Reward Droplist="DroplistMinorRewards" Picks="1"/>
                <Reward  LocalizationKey="%Pacification"/>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="MinorFactionQuest06" Category="MinorFactionQuest" SubCategory="">

        <!--============ TAGS ============-->
         <Tags>MinorFactionQuest</Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="2"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"
                          Cooldown="5"/>

       <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$IAEmpire">
                <From Source="$LesserEmpire"/>
            </Var>
            <Var VarName="$MinorEmpire">
                <From Source="$Context"/>
            </Var>
            <Var VarName="$MinorHomeSystem">
                <From Source="$MinorEmpire.$HomeStarSystem"/>
            </Var>
         
            <Var VarName="$NeighboursSystem">
                <Any>
                    <From Source="$MinorHomeSystem.$Neighbours">                        
                    </From>
                </Any>
            </Var>
            <Var VarName="$NeighboursSystemPlanet">
                <Any>
                    <From Source="$NeighboursSystem.$Planets"/>
                </Any>
            </Var>

            <DroplistVar VarName="$CuriosityAmount" Droplist="DroplistRandomNumber02"/>
            <Var VarName="$CuriosityAmountValue">
                <From Source="$CuriosityAmount.$Value"/>
            </Var>
            
            <Var VarName="$DiplomaticRelationStateName" StringValue="DiplomaticRelationStateMinorAdvancedBrainwashed"/>
            <Var VarName="$CuriosityGUID1"/>
            <Var VarName="$Marker01"/>
            <Var VarName="$RuinsCuriosity" StringValue="CuriosityTypeRuins"/>
            <Var VarName="$CuriosityToSpawn" StringValue="Curiosity_Loot_Ruins_Era1"/>
            <Var VarName="$ByAtWarWithMinor" StringValue="DiplomaticRelationStateMinorAdvancedWar"/>
            <LocalizationVar LocalizationKey="$MinorFactionName" Source="$MinorEmpire"/>

        </Vars>

       <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Context)" AnyPrerequisite="true">
            <PathPrerequisite Flags="Prerequisite">EmpireTypeMinor</PathPrerequisite>
        </Prerequisites>

      <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <StartActions>                       
                    <Action_SpawnCuriosity>                            
                            <Input_Empires VarName="$CurrentEmpire"/>
                            <Input_Planets VarName="$NeighboursSystemPlanet"/>
                            <Input_CuriosityDefinition VarName="$CuriosityToSpawn"/>
                             <Output_CuriosityGUIDs VarName="$CuriosityGUID1"/>
                        </Action_SpawnCuriosity>
                    </StartActions>
                    <Objective Name="Step1_Objective1">
                     <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="17" MaxAutoResolutionTurn="25" AutoResolutionProbability="0.5" />
                        <Parallel CompletionPolicy="First">
                            <Sequence>
                                <Loop>
                                    <Decorator_CuriosityDiscovered Initiator="Empire">
                                         <Input_DisplayedType VarName="$RuinsCuriosity"/>
                                    </Decorator_CuriosityDiscovered>     
                                <Input_Count VarName="$CuriosityAmountValue"/>
                                </Loop>                                                           
                                <Action_AssimilateMinorEmpire>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinorEmpire VarName="$MinorEmpire"/>
                                </Action_AssimilateMinorEmpire>
                            </Sequence>
                            <Sequence>
                                <Parallel CompletionPolicy="First">
                                    <Sequence>
                                        <Decorator_MinorEmpireIntegrated Initiator="AllEmpires">
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                        </Decorator_MinorEmpireIntegrated>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_DiplomaticRelationChanged Initiator="AllEmpires">
                                            <Input_OtherEmpire VarName="$MinorEmpire"/>
                                            <Input_DiplomaticRelationState VarName="$DiplomaticRelationStateName"/>
                                        </Decorator_DiplomaticRelationChanged>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_MinorFactionRelation>
                                            <Input_PlayerEmpire VarName="$CurrentEmpire"/>
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                            <Input_RelationState VarName="$ByAtWarWithMinor"/>
                                        </Decorator_MinorFactionRelation>
                                    </Sequence>
                                </Parallel>
                                <Action_Fail/>
                            </Sequence>
                        </Parallel>
                    </Objective>
                </ObjectiveSet>
                <Reward Droplist="DroplistMinorRewards" Picks="1"/>
                <Reward  LocalizationKey="%Pacification"/>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="MinorFactionQuest07" Category="MinorFactionQuest" SubCategory="">

       <!--============ TAGS ============-->
       <Tags>MinorFactionQuest</Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="2"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"
                          Cooldown="5"/>

       <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$IAEmpire">
                <From Source="$LesserEmpire"/>
            </Var>
            <Var VarName="$MinorEmpire">
                <From Source="$Context"/>
            </Var>

            <Var VarName="$MinorHomeSystem">
                <From Source="$MinorEmpire.$HomeStarSystem"/>
            </Var>

            <Var VarName="$MinorFactionConstellation">
                <From Source="$MinorHomeSystem.$Constellation"/>
            </Var>
            <Var VarName="$CloseSystem">
                <Any>
                <From Source="$MinorFactionConstellation.$StarSystems">
                    <Where>
                        <PathPrerequisite Inverted="true" Flags="Prerequisite">ClassStarSystem,HomeSystem</PathPrerequisite>
                        <PathPrerequisite Inverted="true" Flags="Prerequisite">ClassStarSystem,IsolatedNode</PathPrerequisite>
                    </Where>
                    <OrderBy>
                        <SortSystemByDistance OriginVarName="$MinorHomeSystem" SortBy="Nearest" MinimumDistance="1" MaximumDistance="30" MinimumCandidateCount="1"/>
                    </OrderBy>
                </From>
                </Any>
            </Var>
            <Var VarName="$ByAtWarWithMinor" StringValue="DiplomaticRelationStateMinorAdvancedWar"/>
            <Var VarName="$DiplomaticRelationStateName" StringValue="DiplomaticRelationStateMinorAdvancedBrainwashed"/>
            <LocalizationVar LocalizationKey="$MinorFactionName" Source="$MinorEmpire"/>
            <DroplistVar VarName="$PirateShip" Droplist="DroplistMinorFleet"/>
            <Var VarName="$FleetMissionDefinitionName01" StringValue="RoamAndAttack"/>
            <Var VarName="$GUIDSpawn01"/>
            <Var VarName="$MissionGUID"/>         
            <LocalizationVar LocalizationKey="$SystemName" Source="$CloseSystem"/>
            <Var VarName="$Marker01"/>
        </Vars>

       <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Context)" AnyPrerequisite="true">
            <PathPrerequisite Flags="Prerequisite">EmpireTypeMinor</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <StartActions>                  
                    <Action_SpawnFleets>
                        <Input_Empire VarName="$IAEmpire"/>
                        <Input_Locations VarName="$CloseSystem"/>
                        <Input_DroppableFleet VarName="$PirateShip"/>
                        <Output_FleetGUIDs VarName="$GUIDSpawn01"/>
                    </Action_SpawnFleets>
                    <Action_CreateFleetMissions>                          
                        <Input_MissionDefinitionName VarName="$FleetMissionDefinitionName01"/>                    
                        <Input_FleetGUIDs VarName="$GUIDSpawn01"/>
                        <Input_TargetEmpires VarName="$CurrentEmpire"/>
                        <Output_MissionGUIDs VarName="$MissionGUID"/>
                    </Action_CreateFleetMissions>
                        <Action_AddQuestMarkers>
                            <Input_TargetGUIDs VarName="$GUIDSpawn01"/>
                            <Input_Empires VarName="$CurrentEmpire"/>
                            <Output_Markers VarName="$Marker01"/>
                        </Action_AddQuestMarkers>
                    </StartActions>
                    <Objective Name="Step1_Objective1">
                        <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="17" MaxAutoResolutionTurn="25" AutoResolutionProbability="0.5" />
                        <Parallel CompletionPolicy="First">
                            <Sequence>
                                <Decorator_BattleEnded Initiator="AllEmpires">
                                    <Condition_BattleEnded_FleetDestroyed>
                                        <Input_FleetGUIDs VarName="$GUIDSpawn01"/>
                                    </Condition_BattleEnded_FleetDestroyed>
                                </Decorator_BattleEnded>
                                <Action_AssimilateMinorEmpire>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinorEmpire VarName="$MinorEmpire"/>
                                </Action_AssimilateMinorEmpire>
                                <Action_RemoveQuestMarkers>
                                    <Input_Markers VarName="$Marker01"/>
                                </Action_RemoveQuestMarkers>
                            </Sequence>
                            <Sequence>
                                <Parallel CompletionPolicy="First">
                                    <Sequence>
                                        <Decorator_MinorEmpireIntegrated Initiator="AllEmpires">
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                        </Decorator_MinorEmpireIntegrated>                                     
                                    </Sequence>                                
                                    <Sequence>
                                        <Decorator_DiplomaticRelationChanged Initiator="AllEmpires">
                                            <Input_OtherEmpire VarName="$MinorEmpire"/>
                                            <Input_DiplomaticRelationState VarName="$DiplomaticRelationStateName"/>
                                        </Decorator_DiplomaticRelationChanged>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_MinorFactionRelation>
                                            <Input_PlayerEmpire VarName="$CurrentEmpire"/>
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                            <Input_RelationState VarName="$ByAtWarWithMinor"/>
                                        </Decorator_MinorFactionRelation>                                       
                                    </Sequence>
                                </Parallel>
                                <Action_RemoveQuestMarkers>
                                    <Input_Markers VarName="$Marker01"/>
                                </Action_RemoveQuestMarkers>
                                <Action_Fail/>
                            </Sequence>
                        </Parallel>
                    </Objective>
                </ObjectiveSet>
                <Reward Droplist="DroplistMinorRewards" Picks="1"/>
                <Reward  LocalizationKey="%Pacification"/>
            </Step>
        </Steps>
    </QuestDefinition>

  <QuestDefinition Name="MinorFactionQuest08" Category="MinorFactionQuest" SubCategory="">



        <!--============ TAGS ============-->
         <Tags>MinorFactionQuest</Tags>
        
        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="2"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"
                          Cooldown="5"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$MinorEmpire">
                <From Source="$Context"/>
            </Var>            
            
            <InterpretedVar VarName="$Amount01" Target="$(Empire)">
                <Expression>Min(3,(Count(Context, @'ClassEmpire/ClassSenate/ClassLaw')+1))</Expression>
            </InterpretedVar>

            <Var VarName="$ByAtWarWithMinor" StringValue="DiplomaticRelationStateMinorAdvancedWar"/>
            <Var VarName="$DiplomaticRelationStateName" StringValue="DiplomaticRelationStateMinorAdvancedBrainwashed"/>
            
            <LocalizationVar LocalizationKey="$MinorFactionName" Source="$MinorEmpire"/>
            <LocalizationVar LocalizationKey="$Amount01Name" Source="$Amount01"/>

        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Context)" AnyPrerequisite="true">
            <PathPrerequisite Flags="Prerequisite">EmpireTypeMinor</PathPrerequisite>
        </Prerequisites>
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Inverted="true" Flags="Prerequisite">ClassEmpire/ClassSenate,GovernmentDictatorshipCommon</PathPrerequisite>
            <InterpreterPrerequisite>Count(Context, @'ClassEmpire/ClassSenate/ClassLaw') lt 3</InterpreterPrerequisite>
        </Prerequisites>


        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="17" MaxAutoResolutionTurn="25" AutoResolutionProbability="0.5" />
                        <Parallel CompletionPolicy="First">
                            <Sequence>
                            <Parallel CompletionPolicy="Any">
                                <Sequence>
                                    <Decorator_LawActivated>
                                        <Condition_HasLaws>
                                            <Input_Empire VarName="$CurrentEmpire"/>
                                            <Input_MinimumAmount VarName="$Amount01"/>
                                        </Condition_HasLaws>
                                    </Decorator_LawActivated>
                                </Sequence>
                                <Sequence>
                                    <Decorator_BeginTurn>
                                        <Condition_HasLaws>
                                            <Input_Empire VarName="$CurrentEmpire"/>
                                            <Input_MinimumAmount VarName="$Amount01"/>
                                        </Condition_HasLaws>
                                    </Decorator_BeginTurn>
                                </Sequence>
                            </Parallel>
                                <Action_AssimilateMinorEmpire>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinorEmpire VarName="$MinorEmpire"/>
                                </Action_AssimilateMinorEmpire>
                            </Sequence>
                            <Sequence>
                                <Parallel CompletionPolicy="First">
                                    <Sequence>
                                        <Decorator_MinorEmpireIntegrated Initiator="AllEmpires">
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                        </Decorator_MinorEmpireIntegrated>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_DiplomaticRelationChanged Initiator="AllEmpires">
                                            <Input_OtherEmpire VarName="$MinorEmpire"/>
                                            <Input_DiplomaticRelationState VarName="$DiplomaticRelationStateName"/>
                                        </Decorator_DiplomaticRelationChanged>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_MinorFactionRelation>
                                            <Input_PlayerEmpire VarName="$CurrentEmpire"/>
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                            <Input_RelationState VarName="$ByAtWarWithMinor"/>
                                        </Decorator_MinorFactionRelation>
                                    </Sequence>
                                </Parallel>
                                <Action_Fail/>
                            </Sequence>
                        </Parallel>
                    </Objective>
                </ObjectiveSet>
                <Reward Droplist="DroplistMinorRewards" Picks="1"/>
                <Reward  LocalizationKey="%Pacification"/>
            </Step>
        </Steps>
    </QuestDefinition>
    
     <QuestDefinition Name="MinorFactionQuest09" Category="MinorFactionQuest" SubCategory="">
   

        <!--============ TAGS ============-->
         <Tags>MinorFactionQuest</Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="2"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"
                          Cooldown="5"/>

       <!--============ VARIABLES ============-->
        <Vars>
              <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$IAEmpire">
                <From Source="$LesserEmpire"/>
            </Var>
            <Var VarName="$MinorEmpire">
                <From Source="$Context"/>
            </Var>

            <Var VarName="$MinorHomeSystem">
                <From Source="$MinorEmpire.$HomeStarSystem"/>
            </Var>

            <Var VarName="$MinorFactionConstellation">
                <From Source="$MinorHomeSystem.$Constellation"/>
            </Var>
            <Var VarName="$CloseSystems">             
                    <From Source="$MinorFactionConstellation.$StarSystems">
                        <Where>                           
                            <PathPrerequisite Inverted="true" Flags="Prerequisite">ClassStarSystem,IsolatedNode</PathPrerequisite>
                            <PathPrerequisite Inverted="true" Flags="Prerequisite">ClassStarSystem,HomeSystem</PathPrerequisite>
                        </Where>
                        <OrderBy>
                            <SortSystemByDistance OriginVarName="$MinorHomeSystem" SortBy="Farthest" MinimumDistance="1" MaximumDistance="20" MinimumCandidateCount="2"/>
                        </OrderBy>
                    </From>               
            </Var>  
            <Var VarName="$CloseSystem01">
                <Any>
                    <From Source="$CloseSystems"/> 
                </Any>
            </Var>
            <Var VarName="$ClosePlanet01">
                <Any>
                    <From Source="$CloseSystem01.$Planets"/>
                </Any>
            </Var>    
                 <Var VarName="$CloseSystem02">
                <Any>
                    <From Source="$CloseSystems">
                        <Where>
                            <IsNot EntityVarName="$CloseSystem01"/>
                        </Where>
                    </From>
                </Any>
            </Var>
            <Var VarName="$ClosePlanet02">
                <Any>
                    <From Source="$CloseSystem02.$Planets"/>   
                </Any>
            </Var>  
            
            <Var VarName="$Amount01" IntValue="5"/>
            <Var VarName="$Curiosity01" StringValue="Curiosity_Quest_MinorFaction09"/> 
            <Var VarName="$Curiosity02" StringValue="Curiosity_Quest_MinorFaction09"/>  
            <Var VarName="$Curiosity01GUID"/>
            <Var VarName="$Curiosity02GUID"/>
            <Var VarName="$Marker01"/>
            <Var VarName="$Marker02"/>
            <Var VarName="$ByAtWarWithMinor" StringValue="DiplomaticRelationStateMinorAdvancedWar"/>
            <Var VarName="$DiplomaticRelationStateName" StringValue="DiplomaticRelationStateMinorAdvancedBrainwashed"/>
            
            <LocalizationVar LocalizationKey="$MinorFactionName" Source="$MinorEmpire"/>
            <LocalizationVar LocalizationKey="$Amount01Name" Source="$Amount01"/>
            <LocalizationVar LocalizationKey="$CloseSystem01Name" Source="$CloseSystem01"/>
            <LocalizationVar LocalizationKey="$CloseSystem02Name" Source="$CloseSystem02"/>

        </Vars>

        <!--============ PREREQUISITES ============-->
         
        <Prerequisites Target="$(Context)" AnyPrerequisite="true">
            <PathPrerequisite Flags="Prerequisite">EmpireTypeMinor</PathPrerequisite>
        </Prerequisites>
         <Prerequisites Target="$(Empire)">
             <InterpreterPrerequisite Inverted="true" Flags="Prerequisite">Property(Context,@'ClassEmpire/ClassEducation', HeroLevelCount, true) ge 5 </InterpreterPrerequisite>            
         </Prerequisites>
        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>       
                    <StartActions>
                        <Action_SpawnCuriosity>
                            <Input_Empires VarName="$CurrentEmpire"/>
                            <Input_Planets VarName="$ClosePlanet01"/>
                            <Input_CuriosityDefinition VarName="$Curiosity01"/>
                            <Output_CuriosityGUIDs VarName="$Curiosity01GUID"/>
                        </Action_SpawnCuriosity>
                        <Action_AddQuestMarkers>
                            <Input_Targets VarName="$ClosePlanet01"/>
                            <Input_Empires VarName="$CurrentEmpire"/>
                            <Output_Markers VarName="$Marker01"/>
                        </Action_AddQuestMarkers>
                    <Action_SpawnCuriosity>
                            <Input_Empires VarName="$CurrentEmpire"/>
                            <Input_Planets VarName="$ClosePlanet02"/>
                            <Input_CuriosityDefinition VarName="$Curiosity02"/>
                            <Output_CuriosityGUIDs VarName="$Curiosity02GUID"/>
                        </Action_SpawnCuriosity>
                        <Action_AddQuestMarkers>
                            <Input_Targets VarName="$ClosePlanet02"/>
                            <Input_Empires VarName="$CurrentEmpire"/>
                            <Output_Markers VarName="$Marker02"/>
                        </Action_AddQuestMarkers>
                    </StartActions>
                    <Objective Name="Step1_Objective1">
                        <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="17" MaxAutoResolutionTurn="25" AutoResolutionProbability="0.5" />
                        <Parallel CompletionPolicy="First">
                            <Sequence>
                                <Parallel CompletionPolicy="All">
                                    <Sequence>
                                        <Decorator_CuriosityDiscovered Initiator="Empire">
                                            <Input_CuriosityGUIDs VarName="$Curiosity01GUID"/>
                                        </Decorator_CuriosityDiscovered>
                                        <Action_RemoveQuestMarkers>
                                            <Input_Markers VarName="$Marker01"/>
                                        </Action_RemoveQuestMarkers>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_CuriosityDiscovered Initiator="Empire">
                                            <Input_CuriosityGUIDs VarName="$Curiosity02GUID"/>
                                        </Decorator_CuriosityDiscovered>
                                        <Action_RemoveQuestMarkers>
                                                <Input_Markers VarName="$Marker02"/>
                                        </Action_RemoveQuestMarkers>
                                    </Sequence>
                                </Parallel>
                                <Action_AssimilateMinorEmpire>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinorEmpire VarName="$MinorEmpire"/>
                                </Action_AssimilateMinorEmpire>
                            </Sequence>
                            <Sequence>
                                <Parallel CompletionPolicy="First">                               
                                    <Sequence>
                                        <Decorator_MinorEmpireIntegrated Initiator="AllEmpires">
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                        </Decorator_MinorEmpireIntegrated>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_DiplomaticRelationChanged Initiator="AllEmpires">
                                            <Input_OtherEmpire VarName="$MinorEmpire"/>
                                            <Input_DiplomaticRelationState VarName="$DiplomaticRelationStateName"/>
                                        </Decorator_DiplomaticRelationChanged>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_MinorFactionRelation>
                                            <Input_PlayerEmpire VarName="$CurrentEmpire"/>
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                            <Input_RelationState VarName="$ByAtWarWithMinor"/>
                                        </Decorator_MinorFactionRelation>
                                    </Sequence>
                                </Parallel>
                                  <Action_RemoveQuestMarkers>
                                    <Input_Markers VarName="$Marker01"/>
                                </Action_RemoveQuestMarkers>
                                <Action_Fail/>
                            </Sequence>
                        <Sequence>
                             <Decorator_CuriosityDiscovered Initiator="Empire">
                                    <Input_CuriosityGUIDs VarName="$Curiosity01GUID"/>
                                </Decorator_CuriosityDiscovered>
                             <Action_RemoveQuestMarkers>
                                    <Input_Markers VarName="$Marker01"/>
                                </Action_RemoveQuestMarkers>
                                <Parallel CompletionPolicy="First">                               
                                    <Sequence>
                                        <Decorator_MinorEmpireIntegrated Initiator="AllEmpires">
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                        </Decorator_MinorEmpireIntegrated>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_DiplomaticRelationChanged Initiator="AllEmpires">
                                            <Input_OtherEmpire VarName="$MinorEmpire"/>
                                            <Input_DiplomaticRelationState VarName="$DiplomaticRelationStateName"/>
                                        </Decorator_DiplomaticRelationChanged>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_MinorFactionRelation>
                                            <Input_PlayerEmpire VarName="$CurrentEmpire"/>
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                            <Input_RelationState VarName="$ByAtWarWithMinor"/>
                                        </Decorator_MinorFactionRelation>
                                    </Sequence>
                                </Parallel>
                                <Action_RemoveCuriosity>
                                    <Input_CuriosityGUID VarName="$Curiosity02GUID"/>
                                </Action_RemoveCuriosity>
                                  <Action_RemoveQuestMarkers>
                                    <Input_Markers VarName="$Marker02"/>
                                </Action_RemoveQuestMarkers>
                                <Action_Fail/>
                            </Sequence>
                        <Sequence>
                             <Decorator_CuriosityDiscovered Initiator="Empire">
                                    <Input_CuriosityGUIDs VarName="$Curiosity02GUID"/>
                                </Decorator_CuriosityDiscovered>
                             <Action_RemoveQuestMarkers>
                                    <Input_Markers VarName="$Marker02"/>
                                </Action_RemoveQuestMarkers>
                                <Parallel CompletionPolicy="First">                               
                                    <Sequence>
                                        <Decorator_MinorEmpireIntegrated Initiator="AllEmpires">
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                        </Decorator_MinorEmpireIntegrated>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_DiplomaticRelationChanged Initiator="AllEmpires">
                                            <Input_OtherEmpire VarName="$MinorEmpire"/>
                                            <Input_DiplomaticRelationState VarName="$DiplomaticRelationStateName"/>
                                        </Decorator_DiplomaticRelationChanged>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_MinorFactionRelation>
                                            <Input_PlayerEmpire VarName="$CurrentEmpire"/>
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                            <Input_RelationState VarName="$ByAtWarWithMinor"/>
                                        </Decorator_MinorFactionRelation>
                                    </Sequence>
                                </Parallel>
                                <Action_RemoveCuriosity>
                                    <Input_CuriosityGUID VarName="$Curiosity01GUID"/>
                                </Action_RemoveCuriosity>
                                  <Action_RemoveQuestMarkers>
                                    <Input_Markers VarName="$Marker01"/>
                                </Action_RemoveQuestMarkers>
                                <Action_Fail/>
                            </Sequence>
                        </Parallel>                    
                    </Objective>
                </ObjectiveSet>
                <Reward Droplist="DroplistMinorRewards" Picks="1"/>
                <Reward  LocalizationKey="%Pacification"/>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="MinorFactionQuest10" Category="MinorFactionQuest" SubCategory="">  

        <!--============ TAGS ============-->
         <Tags>MinorFactionQuest</Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="2"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"
                          Cooldown="5"/>

        <!--============ VARIABLES ============-->
        <Vars>
              <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>          
            <Var VarName="$MinorEmpire">
                <From Source="$Context"/>
            </Var>

            <Var VarName="$MinorHomeSystem">
                <From Source="$MinorEmpire.$HomeStarSystem"/>
            </Var>

            <Var VarName="$MinorFactionConstellation">
                <From Source="$MinorHomeSystem.$Constellation"/>
            </Var>
            <Var VarName="$CloseSystems">             
                    <From Source="$MinorFactionConstellation.$StarSystems">
                        <Where>                           
                            <PathPrerequisite Inverted="true" Flags="Prerequisite">ClassStarSystem,IsolatedNode</PathPrerequisite>
                            <PathPrerequisite Inverted="true" Flags="Prerequisite">ClassStarSystem,HomeSystem</PathPrerequisite>
                        </Where>
                        <OrderBy>
                            <SortSystemByDistance OriginVarName="$MinorHomeSystem" SortBy="Farthest" MinimumDistance="1" MaximumDistance="25" MinimumCandidateCount="4"/>
                        </OrderBy>
                    </From>               
            </Var>  
            <Var VarName="$CloseSystem">
                <Any>
                    <From Source="$CloseSystems"/>
                </Any>
            </Var>
            <Var VarName="$ClosePlanet">
                <Any>
                    <From Source="$CloseSystem.$Planets"/>
                </Any>
            </Var>         
            
            <Var VarName="$Amount01" IntValue="100"/>
            <Var VarName="$Curiosity01" StringValue="Curiosity_Quest_MinorFaction10"/>   
            <Var VarName="$Curiosity01GUID"/>
            <Var VarName="$Marker01"/>
            <Var VarName="$ByAtWarWithMinor" StringValue="DiplomaticRelationStateMinorAdvancedWar"/>
            <Var VarName="$DiplomaticRelationStateName" StringValue="DiplomaticRelationStateMinorAdvancedBrainwashed"/>
            <Var VarName="$Amount02" IntValue="-100"/>
            <Var VarName="$ResourceName" StringValue="EmpireMoney"/>
            
            <LocalizationVar LocalizationKey="$MinorFactionName" Source="$MinorEmpire"/>
            <LocalizationVar LocalizationKey="$Amount01Name" Source="$Amount01"/>
            <LocalizationVar LocalizationKey="$CloseSystemName" Source="$CloseSystem"/>

        </Vars>

        <!--============ PREREQUISITES ============-->
         
        <Prerequisites Target="$(Context)" AnyPrerequisite="true">
            <PathPrerequisite Flags="Prerequisite">EmpireTypeMinor</PathPrerequisite>
        </Prerequisites>     

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>       
                    <StartActions>
                        <Action_SpawnCuriosity>
                            <Input_Empires VarName="$CurrentEmpire"/>
                            <Input_Planets VarName="$ClosePlanet"/>
                            <Input_CuriosityDefinition VarName="$Curiosity01"/>
                            <Output_CuriosityGUIDs VarName="$Curiosity01GUID"/>
                        </Action_SpawnCuriosity>
                        <Action_AddQuestMarkers>
                            <Input_Targets VarName="$ClosePlanet"/>
                            <Input_Empires VarName="$CurrentEmpire"/>
                            <Output_Markers VarName="$Marker01"/>
                        </Action_AddQuestMarkers>
                    </StartActions>
                    <Objective Name="Step1_Objective1">
                        <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="17" MaxAutoResolutionTurn="25" AutoResolutionProbability="0.5" />
                        <Parallel CompletionPolicy="First">
                            <Sequence>
                                <Decorator_CuriosityDiscovered Initiator="Empire">
                                    <Input_CuriosityGUIDs VarName="$Curiosity01GUID"/>
                                </Decorator_CuriosityDiscovered>
                                <Action_RemoveQuestMarkers>
                                    <Input_Markers VarName="$Marker01"/>
                                </Action_RemoveQuestMarkers>
                                 <Action_TransferResource>
                                    <Input_Location VarName="$CurrentEmpire"/>
                                     <Input_ResourceName VarName="$ResourceName"/>
                                     <Input_Amount VarName="$Amount02"/>
                                </Action_TransferResource>
                                <Action_AssimilateMinorEmpire>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinorEmpire VarName="$MinorEmpire"/>
                                </Action_AssimilateMinorEmpire>
                            </Sequence>
                            <Sequence>
                                <Parallel CompletionPolicy="First">
                                    <Sequence>
                                        <Decorator_MinorEmpireIntegrated Initiator="AllEmpires">
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                        </Decorator_MinorEmpireIntegrated>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_DiplomaticRelationChanged Initiator="AllEmpires">
                                            <Input_OtherEmpire VarName="$MinorEmpire"/>
                                            <Input_DiplomaticRelationState VarName="$DiplomaticRelationStateName"/>
                                        </Decorator_DiplomaticRelationChanged>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_MinorFactionRelation>
                                            <Input_PlayerEmpire VarName="$CurrentEmpire"/>
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                            <Input_RelationState VarName="$ByAtWarWithMinor"/>
                                        </Decorator_MinorFactionRelation>
                                    </Sequence>
                                </Parallel>
                                  <Action_RemoveQuestMarkers>
                                    <Input_Markers VarName="$Marker01"/>
                                </Action_RemoveQuestMarkers>
                                <Action_Fail/>
                            </Sequence>
                        </Parallel>
                    </Objective>
                </ObjectiveSet>
                <Reward Droplist="DroplistLuxuries" Picks="1"/>
                <Reward  LocalizationKey="%Pacification"/>
            </Step>
        </Steps>
    </QuestDefinition>

   <QuestDefinition Name="MinorFactionQuest11" Category="MinorFactionQuest" SubCategory=""> 


        <!--============ TAGS ============-->
         <Tags>MinorFactionQuest</Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="2"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"
                          Cooldown="5"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$IAEmpire">
                <From Source="$LesserEmpire"/>
            </Var>
            <Var VarName="$MinorEmpire">
                <From Source="$Context"/>
            </Var>

            <Var VarName="$MinorHomeSystem">
                <From Source="$MinorEmpire.$HomeStarSystem"/>
            </Var>

            <Var VarName="$MinorFactionConstellation">
                <From Source="$MinorHomeSystem.$Constellation"/>
            </Var>
            <Var VarName="$CloseSystems">             
                    <From Source="$MinorFactionConstellation.$StarSystems">
                        <Where>                           
                            <PathPrerequisite Inverted="true" Flags="Prerequisite">ClassStarSystem,IsolatedNode</PathPrerequisite>
                            <PathPrerequisite Inverted="true" Flags="Prerequisite">ClassStarSystem,HomeSystem</PathPrerequisite>
                        </Where>
                        <OrderBy>
                            <SortSystemByDistance OriginVarName="$MinorHomeSystem" SortBy="Nearest" MinimumDistance="1" MaximumDistance="30" MinimumCandidateCount="1"/>
                        </OrderBy>
                    </From>               
            </Var>
            <Var VarName="$CloseSystem">
                <Any>
                    <From Source="$CloseSystems"/>
                </Any>
            </Var>
            <Var VarName="$ByAtWarWithMinor" StringValue="DiplomaticRelationStateMinorAdvancedWar"/>
            <LocalizationVar LocalizationKey="$MinorFactionName" Source="$MinorEmpire"/>
            <Var VarName="$CloseSystemPlanet">
                <Any>
                    <From Source="$CloseSystem.$Planets"/>
                </Any>
            </Var>
            <Var VarName="$QuestCuriosity" StringValue="Curiosity_Quest_MinorFaction11"/>
            <Var VarName="$Marker01"/>
            <Var VarName="$QuestCuriosityGUID"/>
            <Var VarName="$Amount" IntValue="7"/>
            <Var VarName="$DiplomaticRelationStateName" StringValue="DiplomaticRelationStateMinorAdvancedBrainwashed"/>
            <Var VarName="$Amount02" IntValue="-7"/>
            <Var VarName="$ResourceName" StringValue="Strategic1"/>
            <LocalizationVar LocalizationKey="$AmountName" Source="$Amount"/>
            <LocalizationVar LocalizationKey="$CloseSystemPlanetName" Source="$CloseSystemPlanet"/>

        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Context)" AnyPrerequisite="true">
            <PathPrerequisite Flags="Prerequisite">EmpireTypeMinor</PathPrerequisite>
        </Prerequisites>

      <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <StartActions>
                        <Action_AddQuestMarkers RevealsLocation="true">
                            <Input_Targets VarName="$CloseSystem"/>
                            <Input_Empires VarName="$CurrentEmpire"/>
                            <Output_Markers VarName="$Marker01"/>
                        </Action_AddQuestMarkers>
                        <Action_SpawnCuriosity>
                            <Input_Empires VarName="$CurrentEmpire"/>
                            <Input_Planets VarName="$CloseSystemPlanet"/>                           
                            <Input_CuriosityDefinition VarName="$QuestCuriosity"/>                                   
                            <Output_CuriosityGUIDs VarName="$QuestCuriosityGUID"/>
                        </Action_SpawnCuriosity>
                    </StartActions>
                    <Objective Name="Step1_Objective1">
                       <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="17" MaxAutoResolutionTurn="25" AutoResolutionProbability="0.5" />
                        <Parallel CompletionPolicy="First">
                            <Sequence>
                               <Decorator_CuriosityDiscovered Initiator="Empire">                                   
                                   <Input_CuriosityGUIDs VarName="$QuestCuriosityGUID"/>
                               </Decorator_CuriosityDiscovered>
                                <Action_TransferResource>
                                    <Input_Location VarName="$CurrentEmpire"/>
                                    <Input_ResourceName VarName="$ResourceName"/>
                                    <Input_Amount VarName="$Amount02"/>
                                </Action_TransferResource>
                                <Action_AssimilateMinorEmpire>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinorEmpire VarName="$MinorEmpire"/>
                                </Action_AssimilateMinorEmpire>
                                <Action_RemoveQuestMarkers>
                                    <Input_Markers VarName="$Marker01"/>
                                </Action_RemoveQuestMarkers>
                            </Sequence>
                            <Sequence>
                                <Parallel CompletionPolicy="First">
                                    <Sequence>
                                        <Decorator_MinorEmpireIntegrated Initiator="AllEmpires">
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                        </Decorator_MinorEmpireIntegrated>                                      
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_DiplomaticRelationChanged Initiator="AllEmpires">
                                            <Input_OtherEmpire VarName="$MinorEmpire"/>
                                            <Input_DiplomaticRelationState VarName="$DiplomaticRelationStateName"/>
                                        </Decorator_DiplomaticRelationChanged>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_MinorFactionRelation>
                                            <Input_PlayerEmpire VarName="$CurrentEmpire"/>
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                            <Input_RelationState VarName="$ByAtWarWithMinor"/>
                                        </Decorator_MinorFactionRelation>                                       
                                    </Sequence>                                    
                                </Parallel>
                                <Action_RemoveQuestMarkers>
                                    <Input_Markers VarName="$Marker01"/>
                                </Action_RemoveQuestMarkers>
                                <Action_Fail/>
                            </Sequence>
                        </Parallel>
                    </Objective>
                </ObjectiveSet>
                <Reward Droplist="DroplistMoney" Picks="1"/>
                <Reward  LocalizationKey="%Pacification"/>
            </Step>
        </Steps>
    </QuestDefinition>


    <QuestDefinition Name="MinorFactionQuest12" Category="MinorFactionQuest" SubCategory="">   

        <!--============ TAGS ============-->
       <Tags>MinorFactionQuest</Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="2"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"
                          Cooldown="5"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$IAEmpire">
                <From Source="$LesserEmpire"/>
            </Var>
            <Var VarName="$MinorEmpire">
                <From Source="$Context"/>
            </Var>

            <Var VarName="$MinorHomeSystem">
                <From Source="$MinorEmpire.$HomeStarSystem"/>
            </Var>
            
            <InterpretedVar VarName="$Amount01" Target="$(Empire)">
                <Expression>Count(Context, @../ClassEmpire/ColonizedStarSystemStateColony)*3</Expression>                
            </InterpretedVar>

            <Var VarName="$Timer"/>

            <InterpretedVar VarName="$Amount02" Target="$(Empire)">
                <Expression>Property(Context, @../ClassEmpire, GameSpeedMultiplier, true)*15</Expression>
            </InterpretedVar>

           
            <Var VarName="$ByAtWarWithMinor" StringValue="DiplomaticRelationStateMinorAdvancedWar"/>
            <LocalizationVar LocalizationKey="$MinorFactionName" Source="$MinorEmpire"/>
           
            <Var VarName="$DiplomaticRelationStateName" StringValue="DiplomaticRelationStateMinorAdvancedBrainwashed"/>
            <LocalizationVar LocalizationKey="$Amount01Name" Source="$Amount01"/>
            <LocalizationVar LocalizationKey="$Amount02Name" Source="$Amount02"/>           

        </Vars>

       <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Context)" AnyPrerequisite="true">
            <PathPrerequisite Flags="Prerequisite">EmpireTypeMinor</PathPrerequisite>
        </Prerequisites>

       <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <StartActions>
                        <Action_StartTimer>
                            <Input_Duration VarName="$Amount02"/>
                            <Output_Timer VarName="$Timer"/>
                        </Action_StartTimer>
                    </StartActions>
                    <Objective Name="Step1_Objective1" StartValue="0" EndValue="$Amount01">
                        <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="17" MaxAutoResolutionTurn="25" AutoResolutionProbability="0.5" />
                        <Parallel CompletionPolicy="First">
                            <Sequence>
                                <Loop>
                                    <Decorator_ConstructionCompleted Initiator="Empire" ProgressionIncrement="1">
                                        <Input_ValidType>Building</Input_ValidType>
                                    </Decorator_ConstructionCompleted>
                                <Input_Count VarName="$Amount01"/>
                                </Loop>
                                <Action_AssimilateMinorEmpire>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinorEmpire VarName="$MinorEmpire"/>
                                </Action_AssimilateMinorEmpire>                                
                            </Sequence>
                            <Sequence>
                                <Parallel CompletionPolicy="First">
                                    <Sequence>
                                        <Decorator_BeginTurn>
                                            <Condition_TimerEnded>
                                                <Input_Timer VarName="$Timer"/>
                                            </Condition_TimerEnded>
                                        </Decorator_BeginTurn>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_MinorEmpireIntegrated Initiator="AllEmpires">
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                        </Decorator_MinorEmpireIntegrated>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_DiplomaticRelationChanged Initiator="AllEmpires">
                                            <Input_OtherEmpire VarName="$MinorEmpire"/>
                                            <Input_DiplomaticRelationState VarName="$DiplomaticRelationStateName"/>
                                        </Decorator_DiplomaticRelationChanged>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_MinorFactionRelation>
                                            <Input_PlayerEmpire VarName="$CurrentEmpire"/>
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                            <Input_RelationState VarName="$ByAtWarWithMinor"/>
                                        </Decorator_MinorFactionRelation>
                                    </Sequence>
                                </Parallel>                               
                                <Action_Fail/>
                            </Sequence>
                        </Parallel>
                    </Objective>
                </ObjectiveSet>
                <Reward Droplist="DroplistMinorRewards" Picks="1"/>
                <Reward  LocalizationKey="%Pacification"/>
            </Step>
        </Steps>
    </QuestDefinition>


    <QuestDefinition Name="MinorFactionQuest13" Category="MinorFactionQuest" SubCategory="">

        <!--============ TAGS ============-->
       <Tags>MinorFactionQuest</Tags>
        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="2"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"
                          Cooldown="5"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$MinorEmpire">
                <From Source="$Context"/>
            </Var>
            <Var VarName="$MinorHomeSystem">
                <From Source="$MinorEmpire.$HomeStarSystem"/>
            </Var>
            <Var VarName="$ByAtWarWithMinor" StringValue="DiplomaticRelationStateMinorAdvancedWar"/>
            <Var VarName="$DiplomaticRelationStateName" StringValue="DiplomaticRelationStateMinorAdvancedBrainwashed"/>
            <Var VarName="$Module01" StringValue="ModuleEngineQuestMF01"/>

            <Var VarName="$Expression01" StringValue="ClassEmpire/ClassGarrison/ClassShip/ClassSection/ClassModule,ClassModuleSupportEngineQuestMF01"/>
            
            <DroplistVar VarName="$Fleet01" Droplist="ShipToProtect"/>
            <Var VarName="$Fleet01GUID"/>
            <InterpretedVar VarName="$Amount01" Target="$(Empire)">
                <Expression>Property(Context, @../ClassEmpire, GameSpeedMultiplier, true)*16</Expression>
            </InterpretedVar>
            
            <Var VarName="$Path" StringValue="ClassEmpire/ClassGarrison"/>
            <Var VarName="$SubPath" StringValue="ClassGarrison/ClassShip/ClassSection/ClassModule"/>
            <Var VarName="$Tag" StringValue="ClassModuleSupportEngineQuestMF01"/>
            <Var VarName="$MinAmount" IntValue="1" />
            <Var VarName="$Marker01"/>            
            
            <LocalizationVar LocalizationKey="$MinorFactionName" Source="$MinorEmpire"/>
            <LocalizationVar LocalizationKey="$Amount01Name" Source="$Amount01"/>       
            
        </Vars>

       <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Context)" AnyPrerequisite="true">
            <PathPrerequisite Flags="Prerequisite">EmpireTypeMinor, FamilyInsectoids</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <StartActions>
                        <Action_SpawnFleets>                         
                            <Input_Empire VarName="$CurrentEmpire"/>
                            <Input_Locations VarName="$MinorHomeSystem"/>
                            <Input_DroppableFleet VarName="$Fleet01"/>                            
                            <Output_FleetGUIDs VarName="$Fleet01GUID"/>
                        </Action_SpawnFleets>
                        <Action_AddQuestMarkers>
                            <Input_TargetGUIDs VarName="$Fleet01GUID"/>
                            <Input_Empires VarName="$CurrentEmpire"/>
                            <Output_Markers VarName="$Marker01"/>
                        </Action_AddQuestMarkers>                       
                    </StartActions>
                    <Objective Name="Step1_Objective1" StartValue="0" EndValue="$Amount01">
                        <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="17" MaxAutoResolutionTurn="25" AutoResolutionProbability="0.5" />
                        <Parallel CompletionPolicy="First">
                            <Sequence>
                                <Loop>
                                    <Decorator_BeginTurn ProgressionIncrement="1">
                                        <Condition_CheckPath>
                                            <Input_SimulationObject VarName="$CurrentEmpire"/>
                                            <Input_Path VarName="$Expression01"/>
                                        </Condition_CheckPath>
                                    </Decorator_BeginTurn>
                                    <Input_Count VarName="$Amount01"/>
                                </Loop>
                                <Action_AssimilateMinorEmpire>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinorEmpire VarName="$MinorEmpire"/>  
                                </Action_AssimilateMinorEmpire>
                            </Sequence>
                            <Sequence>
                                <Parallel CompletionPolicy="First">
                                   <Sequence>
                                        <Decorator_BeginTurn>
                                            <Condition_CountSimulationObjectsWithTag Composition="None"   SubComposition="Minimum">
                                                <Input_SimulationObjects VarName="$CurrentEmpire"/>
                                                <Input_Path VarName="$Path"/>
                                                <Input_SubPath VarName="$SubPath"/>
                                                <Input_Tag VarName="$Tag"/>  
                                            </Condition_CountSimulationObjectsWithTag>
                                        </Decorator_BeginTurn>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_MinorEmpireIntegrated Initiator="AllEmpires">
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                        </Decorator_MinorEmpireIntegrated>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_DiplomaticRelationChanged Initiator="AllEmpires">
                                            <Input_OtherEmpire VarName="$MinorEmpire"/>
                                            <Input_DiplomaticRelationState VarName="$DiplomaticRelationStateName"/>
                                        </Decorator_DiplomaticRelationChanged>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_MinorFactionRelation>
                                            <Input_PlayerEmpire VarName="$CurrentEmpire"/>
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                            <Input_RelationState VarName="$ByAtWarWithMinor"/>
                                        </Decorator_MinorFactionRelation>
                                    </Sequence>
                                </Parallel>
                                <Action_RemoveQuestMarkers>
                                    <Input_Markers VarName="$Marker01"/>
                                </Action_RemoveQuestMarkers>
                                <Action_Fail/>
                            </Sequence>
                        </Parallel>
                    </Objective>
                </ObjectiveSet>
                <Reward Droplist="DroplistMinorRewards" Picks="1"/>
                <Reward  LocalizationKey="%Pacification"/>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="MinorFactionQuest14" Category="MinorFactionQuest" SubCategory="">

        <!--============ TAGS ============-->
        <Tags>MinorFactionQuest</Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="2"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"
                          Cooldown="5"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$MinorEmpire">
                <From Source="$Context"/>
            </Var>
            <Var VarName="$MinorHomeSystem">
                <From Source="$MinorEmpire.$HomeStarSystem"/>
            </Var>
            <Var VarName="$ByAtWarWithMinor" StringValue="DiplomaticRelationStateMinorAdvancedWar"/>
            <Var VarName="$DiplomaticRelationStateName" StringValue="DiplomaticRelationStateMinorAdvancedBrainwashed"/>
            <Var VarName="$Marker01"/>
            <Var VarName="$Amount00" IntValue="54"/>
            <Var VarName="$Amount01" IntValue="55"/>
            <Var VarName="$Amount02" IntValue="1"/>

            <Var VarName="$OneFleet"/>
            <Var VarName="$Expression01"      StringValue="Property(Context, @'ClassGarrisonFleet/ClassShip', OffensiveMilitaryPower) ge $(Amount00)"/>

            <LocalizationVar LocalizationKey="$MinorFactionName" Source="$MinorEmpire"/>
            <LocalizationVar LocalizationKey="$Amount01Name" Source="$Amount01"/>
            <LocalizationVar LocalizationKey="$MinorHomeSystemName" Source="$MinorHomeSystem"/>

        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Context)" AnyPrerequisite="true">
            <PathPrerequisite Flags="Prerequisite">EmpireTypeMinor</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <StartActions>
                        <Action_AddQuestMarkers>
                            <Input_Targets VarName="$MinorHomeSystem"/>
                            <Input_Empires VarName="$CurrentEmpire"/>
                            <Output_Markers VarName="$Marker01"/>
                        </Action_AddQuestMarkers>
                    </StartActions>
                    <Objective Name="Step1_Objective1">

                        <AIHint Category="Minimal" MinAutoResolutionTurn="17" MaxAutoResolutionTurn="25" AutoResolutionProbability="0.5" />
                        <Parallel CompletionPolicy="First">
                            <Sequence>
                                <Parallel CompletionPolicy="Any">
                                    <Sequence>
                                        <Decorator_FleetDocked Initiator="Empire">
                                            <Condition_CheckInterpreter>
                                                <Input_Context VarName="$OneFleet"/>
                                                <Input_Expression VarName="$Expression01"/>
                                            </Condition_CheckInterpreter>
                                            <Input_System VarName="$MinorHomeSystem"/>
                                            <Output_Fleet VarName="$OneFleet"/>
                                        </Decorator_FleetDocked>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_BeginTurn>
                                            <Condition_FleetShipStatsOnNode>
                                                <Input_Node VarName="$MinorHomeSystem"/>
                                                <Input_Empire VarName="$CurrentEmpire"/>
                                                <Input_MinimumOffensiveMilitaryPower VarName="$Amount00"/>
                                                <Input_MinimumAmount VarName="$Amount02"/>
                                            </Condition_FleetShipStatsOnNode>
                                        </Decorator_BeginTurn>
                                    </Sequence>
                                </Parallel>
                                <Action_AssimilateMinorEmpire>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinorEmpire VarName="$MinorEmpire"/>
                                </Action_AssimilateMinorEmpire>
                                <Action_RemoveQuestMarkers>
                                    <Input_Markers VarName="$Marker01"/>
                                </Action_RemoveQuestMarkers>
                            </Sequence>
                            <Sequence>
                                <Parallel CompletionPolicy="First">
                                    <Sequence>
                                        <Decorator_MinorEmpireIntegrated Initiator="AllEmpires">
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                        </Decorator_MinorEmpireIntegrated>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_DiplomaticRelationChanged Initiator="AllEmpires">
                                            <Input_OtherEmpire VarName="$MinorEmpire"/>
                                            <Input_DiplomaticRelationState VarName="$DiplomaticRelationStateName"/>
                                        </Decorator_DiplomaticRelationChanged>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_MinorFactionRelation>
                                            <Input_PlayerEmpire VarName="$CurrentEmpire"/>
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                            <Input_RelationState VarName="$ByAtWarWithMinor"/>
                                        </Decorator_MinorFactionRelation>
                                    </Sequence>
                                </Parallel>
                                <Action_RemoveQuestMarkers>
                                    <Input_Markers VarName="$Marker01"/>
                                </Action_RemoveQuestMarkers>
                                <Action_Fail/>
                            </Sequence>
                        </Parallel>
                    </Objective>
                </ObjectiveSet>
                <Reward Droplist="DroplistMinorRewards" Picks="1"/>
                <Reward  LocalizationKey="%Pacification"/>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="MinorFactionQuest15" Category="MinorFactionQuest" SubCategory="">
   
      <!--============ TAGS ============-->
        <Tags>MinorFactionQuest</Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="2"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"
                          Cooldown="5"/>

     <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
        
            <Var VarName="$MinorEmpire">
                <From Source="$Context"/>
            </Var>
            <Var VarName="$MinorHomeSystem">
                <From Source="$MinorEmpire.$HomeStarSystem"/>
            </Var>
            <Var VarName="$NeighboursList">
                <From Source="$MinorHomeSystem.$Neighbours">
                    <Where>
                        <FilterSystemByStatus NonOwnerVarName="$CurrentEmpire"/>
                        <IsNot EntityVarName="$MinorHomeSystem"/>
                    </Where>
                </From>
            </Var>     
            <Var VarName="$Planet01">
                <Any>
                    <From Source="$NeighboursList.$Planets">
                        <Where>
                            <PathPrerequisite Inverted="true">ClassPlanet, PlanetGameplayTypeGas</PathPrerequisite>
                            <PathPrerequisite Inverted="true">ClassPlanet, PlanetTypeBarren</PathPrerequisite>
                            <PathPrerequisite Inverted="true">ClassPlanet, PlanetTypeLava</PathPrerequisite>
                            <PathPrerequisite Inverted="true">ClassPlanet, PlanetTypeAsh</PathPrerequisite>
                            <PathPrerequisite Inverted="true">ClassPlanet, PlanetTypeIce</PathPrerequisite>
                            <PathPrerequisite Inverted="true">ClassPlanet, PlanetTypeSnow</PathPrerequisite>
                            <PathPrerequisite Inverted="true">ClassPlanet, PlanetTypeArctic</PathPrerequisite>
                            <PathPrerequisite Inverted="true">ClassPlanet, PlanetTypeArid</PathPrerequisite>
                            <PathPrerequisite Inverted="true">ClassPlanet, PlanetTypeDesert</PathPrerequisite>
                            <PathPrerequisite Inverted="true">ClassPlanet, UniquePlanetAcademy</PathPrerequisite>
                        </Where>
                    </From>
                </Any>
            </Var>
           
            <Var VarName="$Amount01" IntValue="1"/>
         
            <Var VarName="$ByAtWarWithMinor" StringValue="DiplomaticRelationStateMinorAdvancedWar"/>
            <Var VarName="$DiplomaticRelationStateName" StringValue="DiplomaticRelationStateMinorAdvancedBrainwashed"/>          
            
            <LocalizationVar LocalizationKey="$MinorFactionName" Source="$MinorEmpire"/>
            <LocalizationVar LocalizationKey="$Amount01Name" Source="$Amount01"/>
            <LocalizationVar LocalizationKey="$MinorHomeSystemName" Source="$MinorHomeSystem"/>

        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Context)" AnyPrerequisite="true">
            <PathPrerequisite Flags="Prerequisite">EmpireTypeMinor</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>      
                    <Objective Name="Step1_Objective1">     
                     <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="17" MaxAutoResolutionTurn="25" AutoResolutionProbability="0.5" />            
                        <Parallel CompletionPolicy="First">
                            <Sequence>
                                <Parallel CompletionPolicy="Any"> 
                                    <Sequence>
                                        <Decorator_ColonizedSystem>                                            
                                            <Condition_HasSystems>                                               
                                                <Input_Empires VarName="$CurrentEmpire"/>
                                                <Input_MinimumAmount VarName="$Amount01"/>
                                                <Input_Systems VarName="$NeighboursList"/>                                                
                                            </Condition_HasSystems>  
                                        </Decorator_ColonizedSystem> 
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_ColonizedPlanet>
                                            <Input_Planet VarName="$Planet01"/>
                                        </Decorator_ColonizedPlanet>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_BeginTurn>
                                            <Condition_HasSystems>
                                                <Input_Empires VarName="$CurrentEmpire"/>
                                                <Input_MinimumAmount VarName="$Amount01"/>
                                                <Input_Systems VarName="$NeighboursList"/>
                                            </Condition_HasSystems>
                                        </Decorator_BeginTurn>
                                    </Sequence>
                                </Parallel>
                                <Action_AssimilateMinorEmpire>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinorEmpire VarName="$MinorEmpire"/>
                                </Action_AssimilateMinorEmpire>                               
                            </Sequence>
                            <Sequence>
                                <Parallel CompletionPolicy="First">
                                    <Sequence>
                                        <Decorator_MinorEmpireIntegrated Initiator="AllEmpires">
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                        </Decorator_MinorEmpireIntegrated>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_DiplomaticRelationChanged Initiator="AllEmpires">
                                            <Input_OtherEmpire VarName="$MinorEmpire"/>
                                            <Input_DiplomaticRelationState VarName="$DiplomaticRelationStateName"/>
                                        </Decorator_DiplomaticRelationChanged>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_MinorFactionRelation>
                                            <Input_PlayerEmpire VarName="$CurrentEmpire"/>
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                            <Input_RelationState VarName="$ByAtWarWithMinor"/>
                                        </Decorator_MinorFactionRelation>
                                    </Sequence>
                                </Parallel>                                
                                <Action_Fail/>
                            </Sequence>
                        </Parallel>
                    </Objective>
                </ObjectiveSet>
                <Reward Droplist="DroplistMinorRewards" Picks="1"/>
                <Reward  LocalizationKey="%Pacification"/>
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="MinorFactionQuest16" Category="MinorFactionQuest" SubCategory="">
        
        <!--============ TAGS ============-->
        <Tags>MinorFactionQuest</Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="2"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"
                          Cooldown="5"/>

       <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$MinorEmpire">
                <From Source="$Context"/>
            </Var>
            <Var VarName="$MinorHomeSystem">
                <From Source="$MinorEmpire.$HomeStarSystem"/>
            </Var>
            <Var VarName="$Amount01" IntValue="2"/>
            <Var VarName="$ByAtWarWithMinor" StringValue="DiplomaticRelationStateMinorAdvancedWar"/>
            <Var VarName="$DiplomaticRelationStateName" StringValue="DiplomaticRelationStateMinorAdvancedBrainwashed"/>

            <!--Military Politic-->
            <Var VarName="$PoliticsName" StringValue="Politics06"/>
            <!--Percentage = 30% -->
            <Var VarName="$MinimumPercentage" IntValue="30"/>
            <!--In X Systems -->
            <Var VarName="$MinimumSystemAmount" IntValue="2"/>
            
            <LocalizationVar LocalizationKey="$MinorFactionName" Source="$MinorEmpire"/>
            <LocalizationVar LocalizationKey="$Amount01Name" Source="$Amount01"/>
            <LocalizationVar LocalizationKey="$MinorHomeSystemName" Source="$MinorHomeSystem"/>

        </Vars>

       <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Context)" AnyPrerequisite="true">
            <PathPrerequisite Flags="Prerequisite">EmpireTypeMinor</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                      <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="17" MaxAutoResolutionTurn="25" AutoResolutionProbability="0.5" />
                        <Parallel CompletionPolicy="First">
                            <Sequence>
                                <Decorator_BeginTurn>
                                <Condition_HasPoliticsScore>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_PoliticsName VarName="$PoliticsName"/>
                                    <Input_MinimumPercentage VarName="$MinimumPercentage"/>
                                    <Input_MinimumSystemAmount VarName="$MinimumSystemAmount"/>
                                </Condition_HasPoliticsScore>
                            </Decorator_BeginTurn>
                                <Action_AssimilateMinorEmpire>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinorEmpire VarName="$MinorEmpire"/>
                                </Action_AssimilateMinorEmpire>
                            </Sequence>
                            <Sequence>
                                <Parallel CompletionPolicy="First">
                                    <Sequence>
                                        <Decorator_MinorEmpireIntegrated Initiator="AllEmpires">
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                        </Decorator_MinorEmpireIntegrated>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_DiplomaticRelationChanged Initiator="AllEmpires">
                                            <Input_OtherEmpire VarName="$MinorEmpire"/>
                                            <Input_DiplomaticRelationState VarName="$DiplomaticRelationStateName"/>
                                        </Decorator_DiplomaticRelationChanged>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_MinorFactionRelation>
                                            <Input_PlayerEmpire VarName="$CurrentEmpire"/>
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                            <Input_RelationState VarName="$ByAtWarWithMinor"/>
                                        </Decorator_MinorFactionRelation>
                                    </Sequence>
                                </Parallel>
                                <Action_Fail/>
                            </Sequence>
                        </Parallel>
                    </Objective>
                </ObjectiveSet>
                <Reward Droplist="DroplistMinorRewards" Picks="1"/>
                <Reward  LocalizationKey="%Pacification"/>
            </Step>
        </Steps>
    </QuestDefinition>
    
    <QuestDefinition Name="MinorFactionQuest17" Category="MinorFactionQuest" SubCategory="">

       <!--============ TAGS ============-->
         <Tags>MinorFactionQuest</Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="2"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"
                          Cooldown="5"/>

       <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$MinorEmpire">
                <From Source="$Context"/>
            </Var>
            
            <Var VarName="$ByAtWarWithMinor" StringValue="DiplomaticRelationStateMinorAdvancedWar"/>
            <Var VarName="$DiplomaticRelationStateName" StringValue="DiplomaticRelationStateMinorAdvancedBrainwashed"/>
          
            <InterpretedVar VarName="$Amount01" Target="$(Empire)">
                <Expression>Min(70, Property(Context, @../ClassEmpire, Happiness)+10)</Expression>
            </InterpretedVar>

            <InterpretedVar VarName="$Amount02" Target="$(Empire)">
                <Expression>Property(Context, @../ClassEmpire, GameSpeedMultiplier, true)*10</Expression>
            </InterpretedVar>
            
            <LocalizationVar LocalizationKey="$MinorFactionName" Source="$MinorEmpire"/>
            <LocalizationVar LocalizationKey="$Amount01Name" Source="$Amount01"/>
            <LocalizationVar LocalizationKey="$Amount02Name" Source="$Amount02"/>
        </Vars>

       <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Context)" AnyPrerequisite="true">
            <PathPrerequisite Flags="Prerequisite">EmpireTypeMinor</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1" StartValue="0" EndValue="$Amount02">
                        <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="17" MaxAutoResolutionTurn="25" AutoResolutionProbability="0.5" />
                        <Parallel CompletionPolicy="First">
                            <Sequence>
                                <Loop>
                                    <Decorator_BeginTurn ProgressionIncrement="1">
                                        <Condition_HasHappiness>                                        
                                            <Input_Empire VarName="$CurrentEmpire"/>                                       
                                            <Input_MinimumAmount VarName="$Amount01"/>
                                        </Condition_HasHappiness>
                                    </Decorator_BeginTurn>
                                    <Input_Count VarName="$Amount02"/>
                                </Loop>
                                <Action_AssimilateMinorEmpire>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinorEmpire VarName="$MinorEmpire"/>
                                </Action_AssimilateMinorEmpire>
                            </Sequence>
                            <Sequence>
                                <Parallel CompletionPolicy="First">                                    
                                    <Sequence>
                                        <Decorator_MinorEmpireIntegrated Initiator="AllEmpires">
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                        </Decorator_MinorEmpireIntegrated>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_DiplomaticRelationChanged Initiator="AllEmpires">
                                            <Input_OtherEmpire VarName="$MinorEmpire"/>
                                            <Input_DiplomaticRelationState VarName="$DiplomaticRelationStateName"/>
                                        </Decorator_DiplomaticRelationChanged>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_MinorFactionRelation>
                                            <Input_PlayerEmpire VarName="$CurrentEmpire"/>
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                            <Input_RelationState VarName="$ByAtWarWithMinor"/>
                                        </Decorator_MinorFactionRelation>
                                    </Sequence>
                                </Parallel>
                                <Action_Fail/>
                            </Sequence>
                        </Parallel>
                    </Objective>
                </ObjectiveSet>
                <Reward Droplist="DroplistMinorRewards" Picks="1"/>
                <Reward  LocalizationKey="%Pacification"/>
            </Step>
        </Steps>
    </QuestDefinition>
    
 <QuestDefinition Name="MinorFactionQuest18" Category="MinorFactionQuest" SubCategory="">

          <!--============ TAGS ============-->
         <Tags>MinorFactionQuest</Tags>

        <QuestContextSolo/>

        <RepetitionRules  NumberOfOccurrencesPerGame="2"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"
                          Cooldown="5"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$MinorEmpire">
                <From Source="$Context"/>
            </Var>

            <DroplistVar VarName="$CuriosityAmount" Droplist="DroplistRandomNumber"/>
            <Var VarName="$CuriosityAmountValue">
                <From Source="$CuriosityAmount.$Value"/>
            </Var>
            <Var VarName="$ByAtWarWithMinor" StringValue="DiplomaticRelationStateMinorAdvancedWar"/>
            <Var VarName="$DiplomaticRelationStateName" StringValue="DiplomaticRelationStateMinorAdvancedBrainwashed"/>
            <LocalizationVar LocalizationKey="$MinorFactionName" Source="$MinorEmpire"/>
           
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Context)" AnyPrerequisite="true">
            <PathPrerequisite Flags="Prerequisite">EmpireTypeMinor</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                       <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="17" MaxAutoResolutionTurn="25" AutoResolutionProbability="0.5" />
                        <Parallel CompletionPolicy="First">
                            <Sequence>
                                <Loop>
                                    <Decorator_CuriosityDiscovered Initiator="Empire">                                        
                                    </Decorator_CuriosityDiscovered>
                                    <Input_Count VarName="$CuriosityAmountValue"/>
                                </Loop>
                                <Action_AssimilateMinorEmpire>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinorEmpire VarName="$MinorEmpire"/>
                                </Action_AssimilateMinorEmpire>
                            </Sequence>
                            <Sequence>
                                <Parallel CompletionPolicy="First">
                                    <Sequence>
                                        <Decorator_MinorEmpireIntegrated Initiator="AllEmpires">
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                        </Decorator_MinorEmpireIntegrated>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_DiplomaticRelationChanged Initiator="AllEmpires">
                                            <Input_OtherEmpire VarName="$MinorEmpire"/>
                                            <Input_DiplomaticRelationState VarName="$DiplomaticRelationStateName"/>
                                        </Decorator_DiplomaticRelationChanged>
                                    </Sequence>
                                    <Sequence>
                                        <Decorator_MinorFactionRelation>
                                            <Input_PlayerEmpire VarName="$CurrentEmpire"/>
                                            <Input_MinorEmpire VarName="$MinorEmpire"/>
                                            <Input_RelationState VarName="$ByAtWarWithMinor"/>
                                        </Decorator_MinorFactionRelation>
                                    </Sequence>
                                </Parallel>
                                <Action_Fail/>
                            </Sequence>
                        </Parallel>
                    </Objective>
                </ObjectiveSet>
                <Reward Droplist="DroplistMinorRewards" Picks="1"/>
                <Reward  LocalizationKey="%Pacification"/>
            </Step>
        </Steps>
    </QuestDefinition>


</Datatable>