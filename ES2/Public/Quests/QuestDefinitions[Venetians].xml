<?xml version="1.0" encoding="utf-8" ?>
<Datatable xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xsi:noNamespaceSchemaLocation="../Schemas/QuestDefinition.xsd">
    
    <!-- ####################################### -->
    <!--               Venetians QUEST            -->
    <!-- ####################################### -->

    <QuestDefinition Name="VenetiansQuest-Chapter1" Category="MajorQuest" SubCategory="Venetians" MinimumTurn="5">

        <!--============ TAGS ============-->
        <Tags>BeginTurn</Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <!--Step2_2: MinNumber of Minor I want to see assimilated-->
            <Var VarName="$NumberOfMinors" IntValue="1"/>
            <!--Step2_2: Minors should be Assimilated by the Major-->
            <Var VarName="$RelationStateAlly" StringValue="DiplomaticRelationStateMinorIntegrated"/>

            <Var VarName="$PercentageAmount" IntValue="50"/>
            <Var VarName="$Five" IntValue="4"/>
            <InterpretedVar VarName="$StartCount" Target="$(Empire)">
                <Expression>Count(Context, @ClassEmpire/ClassColonizedStarSystem/ClassColonizedPlanet)</Expression>
            </InterpretedVar>
            <Var VarName="$Expression1" StringValue="Count(Context, @ClassEmpire/ClassColonizedStarSystem/ClassColonizedPlanet)"/>
            <!--Localization Var-->
            <Var VarName="$OutpostAmount" IntValue="3"/>
            <LocalizationVar LocalizationKey="$Amount01" Source="$Five"/>
            <LocalizationVar LocalizationKey="$Amount02" Source="$NumberOfMinors"/>
            <LocalizationVar LocalizationKey="$Percentage" Source="$PercentageAmount"/>
            
        </Vars>
        
        <!--============ PREREQUISITE ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">EmpireTypeMajor/ClassPopulation,ClassPopulationEmpireAffinityVenetians,PopulationMajor</PathPrerequisite>
            <PathPrerequisite Flags="Prerequisite">EmpireTypeMajor/ClassStarSystem,HomeSystem</PathPrerequisite>
        </Prerequisites>
        
        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <!--============ STEP 0 - Choose ============-->
                <Choice DefaultChoiceIndex="0">
                    <ChoiceItem ObjectiveSetIndex="0"/>
                    <ChoiceItem ObjectiveSetIndex="1"/>
                    <ChoiceItem ObjectiveSetIndex="2"/>
                </Choice>
                <!--============ STEP 1 ============-->
                <ObjectiveSet>
                    <Objective Name="Step2_1_Objective1">
                        <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="25" MaxAutoResolutionTurn="35" AutoResolutionProbability="1" />
                        <Sequence>  
                            <Decorator_BeginTurn>
                                <Condition_MinorFactionRelationship>
                                    <Input_MajorEmpire VarName="$CurrentEmpire"/>
                                    <Input_NumberOfMinorFactions VarName="$NumberOfMinors"/>
                                    <Input_DiplomaticRelationState VarName="$RelationStateAlly"/>
                                </Condition_MinorFactionRelationship>
                            </Decorator_BeginTurn>
                            <Action_ChooseOutcome Name="Outcome1"/>
                        </Sequence>
                        <Outcome Name="Outcome1">
                            <Triggers Weight="1">
                                <QuestTrigger>
                                    <Tags>VenetiansQuest-Chapter1.2-Industry</Tags>
                                    <QuestContextSolo ParticipantsVarName="$CurrentEmpire"/>
                                </QuestTrigger>
                            </Triggers>
                        </Outcome>
                    </Objective>
                    <Reward Droplist="DroplistLuxuriesEra1" Picks="1"/>
                </ObjectiveSet>
                <ObjectiveSet>
                    <Objective Name="Step2_2_Objective1" StartValue="$StartCount" EndValue="$Five">
                        <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="25" MaxAutoResolutionTurn="35" AutoResolutionProbability="1" />
                        <Sequence>                            
                            <Decorator_BeginTurn>
                                <Condition_IsProgressionComplete>
                                    <Input_Context VarName="$CurrentEmpire"/>
                                    <Input_EmpireWhoseProgressToUpdate VarName="$CurrentEmpire"/>
                                    <Input_Expression VarName="$Expression1"/>
                                </Condition_IsProgressionComplete>
                            </Decorator_BeginTurn>
                            <Action_ChooseOutcome Name="Outcome1"/>
                        </Sequence>
                        <Outcome Name="Outcome1">
                            <Triggers Weight="1">
                                <QuestTrigger>
                                    <Tags>VenetiansQuest-Chapter1.2-Pacifism</Tags>
                                    <QuestContextSolo ParticipantsVarName="$CurrentEmpire"/>
                                </QuestTrigger>
                            </Triggers>
                        </Outcome>
                    </Objective>
                    <Reward Droplist="DroplistMoneyEra2" Picks="1"/>
                </ObjectiveSet>
                <ObjectiveSet>
                    <Objective Name="Step2_3_Objective1">
                        <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="25" MaxAutoResolutionTurn="35" AutoResolutionProbability="1" /> 
                        <Parallel CompletionPolicy="First">
                            
                            <Sequence>
                                    <Decorator_ExploredNode MinimumState="Revealed" Initiator="Empire">
                                        <Input_MinimumPercentage VarName="$PercentageAmount"/>                                  
                                    </Decorator_ExploredNode>
                                <Action_ChooseOutcome Name="Outcome1"/>
                            </Sequence>
                        
                            <Sequence>
                                <Decorator_BeginTurn>
                                    <Condition_ExplorationProgress MinimumState="Revealed">
                                        <Input_Empire VarName="$CurrentEmpire"/>
                                        <Input_Percentage VarName="$PercentageAmount"/>
                                    </Condition_ExplorationProgress>
                                </Decorator_BeginTurn>
                                <Action_ChooseOutcome Name="Outcome1"/>
                            </Sequence>
                            
                        </Parallel>
                        <Outcome Name="Outcome1">
                            <Triggers Weight="1">
                                <QuestTrigger>
                                    <Tags>VenetiansQuest-Chapter1.2-Military</Tags>
                                    <QuestContextSolo ParticipantsVarName="$CurrentEmpire"/>
                                </QuestTrigger>
                            </Triggers>
                        </Outcome>
                    </Objective>
                    <Reward Droplist="DroplistStrategicsEra2" Picks="1"/>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <!-- ############################################## -->
    <!--       Venetians QUEST Chapter 1.2 INDUSTRY       -->
    <!-- ############################################## -->

    <QuestDefinition Name="VenetiansQuest-Chapter1.2-Industry" Category="MajorQuest" SubCategory="Venetians">

        <!--============ TAGS ============-->
        <Tags>VenetiansQuest-Chapter1.2-Industry</Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>

            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$MinAmount" IntValue="1"/>
            <Var VarName="$MinLevel" IntValue="6"/>
            <LocalizationVar Source="$MinLevel" LocalizationKey="$MinLevelName"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
        <Prerequisites Target="$(Empire)">
            <PathPrerequisite Flags="Prerequisite">EmpireTypeMajor/ClassPopulation,ClassPopulationEmpireAffinityVenetians,PopulationMajor</PathPrerequisite>
        </Prerequisites>

        <!--============ STEPS ============-->

        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="25" MaxAutoResolutionTurn="35" AutoResolutionProbability="1" />
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_HasHeroes HeroAssignationFilter="System">
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinimumAmount VarName="$MinAmount"/>
                                    <Input_MinimumLevel VarName="$MinLevel"/>
                                </Condition_HasHeroes>
                            </Decorator_BeginTurn>
                            <Action_ChooseOutcome Name="Outcome1"/>
                        </Sequence>
                        <Outcome Name="Outcome1">
                            <Triggers Weight="1">
                                <QuestTrigger>
                                    <Tags>VenetiansQuest-Chapter2</Tags>
                                    <QuestContextSolo ParticipantsVarName="$CurrentEmpire"/>
                                </QuestTrigger>
                            </Triggers>
                        </Outcome>
                    </Objective>
                    <Reward Droplist="DroplistVenetians01" Picks="1"/>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <!-- ############################################## -->
    <!--       Venetians QUEST Chapter 1.2 PACIFISM       -->
    <!-- ############################################## -->

    <QuestDefinition Name="VenetiansQuest-Chapter1.2-Pacifism" Category="MajorQuest" SubCategory="Venetians">

        <!--============ TAGS ============-->
        <Tags>VenetiansQuest-Chapter1.2-Pacifism</Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>

            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$SystemAmount" IntValue="1"/>
            <Var VarName="$DustAmount" IntValue="150"/>
            
            <LocalizationVar LocalizationKey="$DustAmountLoc" Source="$DustAmount"/>

        </Vars> 

        <!--============ PREREQUISITES ============-->
       
        <!--============ STEPS ============-->

        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                       <!-- TODO -->
                        <AIHint Category="MaximizeResource" Motivation="0.5">
                            <Resource>Dust</Resource>
                        </AIHint>
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_SystemsHaveFidsi>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_SystemCount VarName="$SystemAmount"/>
                                    <Input_NetMoney VarName="$DustAmount"/>
                                </Condition_SystemsHaveFidsi>
                            </Decorator_BeginTurn>
                            <Action_ChooseOutcome Name="Outcome1"/>
                        </Sequence>
                        <Outcome Name="Outcome1">
                            <Triggers Weight="1">
                                <QuestTrigger>
                                    <Tags>VenetiansQuest-Chapter2</Tags>
                                    <QuestContextSolo ParticipantsVarName="$CurrentEmpire"/>
                                </QuestTrigger>
                            </Triggers>
                        </Outcome>
                    </Objective>
                    <Reward Droplist="DroplistVenetians02" Picks="1"/>
                </ObjectiveSet>
            </Step>

        </Steps>

    </QuestDefinition>

    <!-- ############################################## -->
    <!--       VENETIANS QUEST Chapter 1.2 MILITARY       -->
    <!-- ############################################## -->

    <QuestDefinition Name="VenetiansQuest-Chapter1.2-Military" Category="MajorQuest" SubCategory="Venetians">

        <!--============ TAGS ============-->
        <Tags>VenetiansQuest-Chapter1.2-Military</Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <!--Step2_3: MinNumber of Ships built-->
            <Var VarName="$MinAmount" IntValue="4"/>
            <Var VarName="$MinAmountReal" IntValue="1"/>
            <!--Step2_3: MinOffensivePower-->
            <Var VarName="$OffensivePowerMin" IntValue="40"/>
            <Var VarName="$Ship"/>
            <LocalizationVar LocalizationKey="$Amount03" Source="$MinAmount"/>
            <LocalizationVar LocalizationKey="$Amount04" Source="$OffensivePowerMin"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
     
        <!--============ STEPS ============-->

        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1" StartValue="0" EndValue="4">
                        <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="25" MaxAutoResolutionTurn="35" AutoResolutionProbability="1" />
                        <Sequence>
                            <Loop Count="4">
                                <Decorator_ShipConstructed Initiator="Empire" ProgressionIncrement="1">
                                    <Condition_ShipStats>
                                        <Input_ShipList VarName="$Ship"/>
                                        <Input_MinimumAmount VarName="$MinAmountReal"/>
                                        <Input_MinimumOffensiveMilitaryPower VarName="$OffensivePowerMin"/>
                                    </Condition_ShipStats>
                                    <Output_Ship VarName="$Ship"/>
                                </Decorator_ShipConstructed>
                               </Loop>
                            <Action_ChooseOutcome Name="Outcome1"/>
                        </Sequence>
                        <Outcome Name="Outcome1">
                            <Triggers Weight="1">
                                <QuestTrigger>
                                    <Tags>VenetiansQuest-Chapter2</Tags>
                                    <QuestContextSolo ParticipantsVarName="$CurrentEmpire"/>
                                </QuestTrigger>
                            </Triggers>
                        </Outcome>
                    </Objective>
                    <Reward Droplist="DroplistVenetians03" Picks="1"/>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <!-- ####################################### -->
    <!--       VENETIANS QUEST CHAPTER 2           -->
    <!-- ####################################### -->

    <QuestDefinition Name="VenetiansQuest-Chapter2" Category="MajorQuest" SubCategory="Venetians">

        <!--============ TAGS ============-->
        <Tags>VenetiansQuest-Chapter2</Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <!--Meos Lancellum Branch-->
            <Var VarName="$EcologistPolitic" StringValue="Politics04"/>           
            <!--Omokor Arrakyo Branch-->            
            <Var VarName="$IndustrialPolitic" StringValue="Politics01"/>

            <Var VarName="$MinimumScore" IntValue="20"/>

            <InterpretedVar VarName="$Amount01" Target="$(Empire)">
                <Expression>Ceil(Max(2,(Count(Context, @'ClassEmpire/ClassColonizedStarSystem')/3)))</Expression>
            </InterpretedVar>

            <LocalizationVar LocalizationKey="$MinimumScoreName" Source="$MinimumScore"/>
            <LocalizationVar LocalizationKey="$Amount01Name" Source="$Amount01"/>

        </Vars> 

        <!--============ PREREQUISITE ============-->
   
        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <!--============ STEP 0 - Choose ============-->
                <Choice DefaultChoiceIndex="0">
                    <ChoiceItem ObjectiveSetIndex="0"/>
                    <ChoiceItem ObjectiveSetIndex="1"/>                   
                </Choice>                
                <ObjectiveSet>
                    <Objective Name="Step2_1_Objective1">
                        <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="25" MaxAutoResolutionTurn="35" AutoResolutionProbability="1" />
                        <!--Omokor Arrakyo-->
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_HasPoliticsScore>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_PoliticsName VarName="$IndustrialPolitic"/>
                                    <Input_MinimumPercentage VarName="$MinimumScore"/>
                                    <Input_MinimumSystemAmount VarName="$Amount01"/>
                                </Condition_HasPoliticsScore>
                            </Decorator_BeginTurn>
                            <Action_ChooseOutcome Name="Outcome1"/>
                        </Sequence>
                        <Outcome Name="Outcome1">
                            <Triggers Weight="1">
                                <QuestTrigger>
                                    <Tags>VenetiansQuest-Chapter2.2-Industry</Tags>
                                    <QuestContextSolo ParticipantsVarName="$CurrentEmpire"/>
                                </QuestTrigger>
                            </Triggers>
                        </Outcome>
                    </Objective>
                    <Reward Droplist="DroplistVenetians05" Picks="1"/>
                </ObjectiveSet>
                <ObjectiveSet>
                    <Objective Name="Step2_2_Objective1">
                        <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="25" MaxAutoResolutionTurn="35" AutoResolutionProbability="1" />
                        <!--MEOS LANCELLUM-->
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_HasPoliticsScore>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_PoliticsName VarName="$EcologistPolitic"/>
                                    <Input_MinimumPercentage VarName="$MinimumScore"/>
                                    <Input_MinimumSystemAmount VarName="$Amount01"/>
                                </Condition_HasPoliticsScore>
                            </Decorator_BeginTurn>
                            <Action_ChooseOutcome Name="Outcome1"/>
                        </Sequence>
                        <Outcome Name="Outcome1">
                            <Triggers Weight="1">
                                <QuestTrigger>
                                    <Tags>VenetiansQuest-Chapter2.2-Ecologist</Tags>
                                    <QuestContextSolo ParticipantsVarName="$CurrentEmpire"/>
                                </QuestTrigger>
                            </Triggers>
                        </Outcome>
                    </Objective>
                    <Reward Droplist="DroplistVenetians04" Picks="1"/>
                </ObjectiveSet>
            </Step>
           
        </Steps>
    </QuestDefinition>


    <!-- ############################################## -->
    <!--        VENETIANS QUEST Chapter 2.2 OMOKOR ARRAKYO   -->
    <!-- ############################################## -->

    <QuestDefinition Name="VenetiansQuest-Chapter2.2-Industry" Category="MajorQuest" SubCategory="Venetians">

        <!--============ TAGS ============-->
        <Tags>VenetiansQuest-Chapter2.2-Industry</Tags>

        <QuestContextSolo/>
        

        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>

            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$IndustryPolitic" StringValue="Politics01"/>
            <Var VarName="$Amount" IntValue="2"/>
            <LocalizationVar LocalizationKey="$AmountLoc" Source="$Amount"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
      
        <!--============ STEPS ============-->

        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="25" MaxAutoResolutionTurn="35" AutoResolutionProbability="1" />
                        <Sequence>      
                            <Decorator_BeginTurn>
                                <Condition_HasLaws>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_Politics VarName="$IndustryPolitic"/>
                                    <Input_MinimumAmount VarName="$Amount"/>                                    
                                </Condition_HasLaws>
                            </Decorator_BeginTurn>
                            <Action_ChooseOutcome Name="Outcome1"/>
                        </Sequence>
                        <Outcome Name="Outcome1">
                            <Triggers Weight="1">
                                <QuestTrigger>
                                    <Tags>VenetiansQuest-Chapter3-Step1</Tags>
                                    <QuestContextSolo ParticipantsVarName="$CurrentEmpire"/>
                                </QuestTrigger>
                            </Triggers>
                        </Outcome>
                    </Objective>
                </ObjectiveSet>
                <Reward Droplist="DroplistVenetians07" Picks="1"/>
            </Step>
        </Steps>
    </QuestDefinition>

    <!-- ############################################## -->
    <!--       Venetians QUEST Chapter 2.2 MEOS LANCELLUM    -->
    <!-- ############################################## -->

    <QuestDefinition Name="VenetiansQuest-Chapter2.2-Ecologist" Category="MajorQuest" SubCategory="Venetians">

        <!--============ TAGS ============-->
        <Tags>VenetiansQuest-Chapter2.2-Ecologist</Tags>

        <QuestContextSolo/>


        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>

            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$MinimumAmount" IntValue="3"/>
            <LocalizationVar LocalizationKey="$LawAmount" Source="$MinimumAmount"/>

        </Vars>

        <!--============ PREREQUISITES ============-->
   
        <!--============ STEPS ============-->

        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="25" MaxAutoResolutionTurn="35" AutoResolutionProbability="1" />
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_HasLaws>
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinimumAmount VarName="$MinimumAmount"/>
                                </Condition_HasLaws>
                            </Decorator_BeginTurn>
                            <Action_ChooseOutcome Name="Outcome1"/>
                        </Sequence>
                        <Outcome Name="Outcome1">
                            <Triggers Weight="1">
                                <QuestTrigger>
                                    <Tags>VenetiansQuest-Chapter3-Step2</Tags>
                                    <QuestContextSolo ParticipantsVarName="$CurrentEmpire"/>
                                </QuestTrigger>
                            </Triggers>
                        </Outcome>
                    </Objective>
                </ObjectiveSet>
                <Reward Droplist="DroplistVenetians06" Picks="1"/>
            </Step>
        </Steps>
    </QuestDefinition>

    <!-- ############################################## -->
    <!--       VENETIANS QUEST Chapter 3 OMOKOR AND ARRAKYO       -->
    <!-- ############################################## -->

    <QuestDefinition Name="VenetiansQuest-Chapter3-Step1" Category="MajorQuest" SubCategory="Venetians">

        <!--============ TAGS ============-->
        <Tags>VenetiansQuest-Chapter3-Step1</Tags>

        <QuestContextSolo/>


        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>

            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$MinAmount" IntValue="3"/>
            <Var VarName="$MinLevel" IntValue="5"/>
            <Var VarName="$PlanetSize" StringValue="PlanetSizeHuge"/>
            <LocalizationVar LocalizationKey="$MinAmountName" Source="$MinAmount"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
   
        <!--============ STEPS ============-->

        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="25" MaxAutoResolutionTurn="35" AutoResolutionProbability="1" />
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_HasPlanets>                                    
                                    <Input_EmpireOrSystem VarName="$CurrentEmpire"/>
                                    <Input_MinimumAmount VarName="$MinAmount"/>
                                    <Input_PlanetSize VarName="$PlanetSize"/>                              
                                </Condition_HasPlanets>
                            </Decorator_BeginTurn>
                            <Action_ChooseOutcome Name="Outcome1"/>
                        </Sequence>
                        <Outcome Name="Outcome1">
                            <Triggers Weight="1">
                                <QuestTrigger>
                                    <Tags>VenetiansQuest-Chapter3-Step1.2</Tags>
                                    <QuestContextSolo ParticipantsVarName="$CurrentEmpire"/>
                                </QuestTrigger>
                            </Triggers>
                        </Outcome>
                    </Objective>
                    <Reward Droplist="DroplistVenetians08" Picks="1"/>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>


    <!-- ############################################## -->
    <!-- Venetians QUEST Chapter 3 Step 2 OMOKOR AND ARRAKYO  -->
    <!-- ############################################## -->

    <QuestDefinition Name="VenetiansQuest-Chapter3-Step1.2" Category="MajorQuest" SubCategory="Venetians">

        <!--============ TAGS ============-->
        <Tags>VenetiansQuest-Chapter3-Step1.2</Tags>

        <QuestContextSolo/>


        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$MinAmount" IntValue="3"/>
            <Var VarName="$MinLevel" IntValue="3"/>  
        <LocalizationVar Source="$MinLevel" LocalizationKey="$MinLevelName"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
  
        <!--============ STEPS ============-->

        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="25" MaxAutoResolutionTurn="35" AutoResolutionProbability="1" />
                        <Sequence>                           
                            <Decorator_SystemLevelChanged Initiator="Empire">
                                <Input_MinimumLevel VarName="$MinLevel"/>
                            </Decorator_SystemLevelChanged>
                            <Action_ChooseOutcome Name="Outcome1"/>
                        </Sequence>
                        <Outcome Name="Outcome1">
                            <Triggers Weight="1">
                                <QuestTrigger>
                                    <Tags>VenetiansQuest-Chapter4</Tags>
                                    <QuestContextSolo ParticipantsVarName="$CurrentEmpire"/>
                                </QuestTrigger>
                            </Triggers>
                        </Outcome>
                    </Objective>
                    <Reward Droplist="DroplistVenetians09" Picks="1"/>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <!-- ############################################## -->
    <!--       Venetians QUEST Chapter 3 MEOS LANCELLUM       -->
    <!-- ############################################## -->

    <QuestDefinition Name="VenetiansQuest-Chapter3-Step2" Category="MajorQuest" SubCategory="Venetians">

        <!--============ TAGS ============-->
        <Tags>VenetiansQuest-Chapter3-Step2</Tags>

        <QuestContextSolo/>


        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>

            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$MinAmount" IntValue="3"/>
            <Var VarName="$HomeSystems">
                <From Source="$Constellations.$StarSystems">
                    <Where>                        
                        <PathPrerequisite Flags="Prerequisite">ClassStarSystem,HomeSystem</PathPrerequisite>
                    </Where>
                </From>
            </Var>
            <LocalizationVar Source="$MinAmount" LocalizationKey="$MinAmountName"/>
        </Vars>

        <!--============ PREREQUISITES ============-->
       
        <!--============ STEPS ============-->

        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="25" MaxAutoResolutionTurn="35" AutoResolutionProbability="1" />
                        <Sequence>
                            <Decorator_BeginTurn>
                                <!--SHOULD BE: SYSTEM WITH WONDERS-->
                                <Condition_HasSystems>                                    
                                    <Input_Empires VarName="$CurrentEmpire"/>
                                    <Input_MinimumAmount VarName="$MinAmount"/>
                                    <Input_Systems VarName="$HomeSystems"/>
                                </Condition_HasSystems>
                            </Decorator_BeginTurn>
                            <Action_ChooseOutcome Name="Outcome1"/>
                        </Sequence>
                        <Outcome Name="Outcome1">
                            <Triggers Weight="1">
                                <QuestTrigger>
                                    <Tags>VenetiansQuest-Chapter3-Step2.2</Tags>
                                    <QuestContextSolo ParticipantsVarName="$CurrentEmpire"/>
                                </QuestTrigger>
                            </Triggers>
                        </Outcome>
                    </Objective>
                    <Reward Droplist="DroplistVenetians08" Picks="1"/>
                </ObjectiveSet>                
            </Step>
        </Steps>
    </QuestDefinition>

    <QuestDefinition Name="VenetiansQuest-Chapter3-Step2.2" Category="MajorQuest" SubCategory="Venetians">

        <!--============ TAGS ============-->
        <Tags>VenetiansQuest-Chapter3-Step2.2</Tags>

        <QuestContextSolo/>


        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <!--============ VARIABLES ============-->
        <Vars>

            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$TradeRouteAmount" IntValue="4"/>
            <LocalizationVar LocalizationKey="$TradeRouteAmountName" Source="$TradeRouteAmount"/>
        </Vars>

        <!--============ PREREQUISITES ============-->

        <!--============ STEPS ============-->

        <Steps>
            <!--============ STEP 1 ============-->
            <Step Name="Step1">
                <ObjectiveSet>
                    <Objective Name="Step1_Objective1">
                        <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="25" MaxAutoResolutionTurn="35" AutoResolutionProbability="1" />
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_HasTradeRoutes>                                    
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_TradeRouteAmount VarName="$TradeRouteAmount"/>                                  
                                </Condition_HasTradeRoutes>
                            </Decorator_BeginTurn>
                            <Action_ChooseOutcome Name="Outcome1"/>
                        </Sequence>
                        <Outcome Name="Outcome1">
                            <Triggers Weight="1">
                                <QuestTrigger>
                                    <Tags>VenetiansQuest-Chapter4-Bis</Tags>
                                    <QuestContextSolo ParticipantsVarName="$CurrentEmpire"/>
                                </QuestTrigger>
                            </Triggers>
                        </Outcome>
                    </Objective>
                    <Reward Droplist="DroplistVenetians09" Picks="1"/>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <!-- ####################################### -->
    <!--  Venetians QUEST CHAPTER 4 OMOKOR ARRAKYO -->
    <!-- ####################################### -->

    <QuestDefinition Name="VenetiansQuest-Chapter4" Category="MajorQuest" SubCategory="Venetians">

        <!--============ TAGS ============-->
        <Tags>VenetiansQuest-Chapter4, FactionFinalQuest,FactionQuestVenetians</Tags>

        <QuestContextSolo/>


        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$IncomeAmount" IntValue="250"/>
            <Var VarName="$ResourceName00" StringValue="EmpireResearch"/>
            <Var VarName="$ResourceName01" StringValue="EmpireMoney"/>           
            <InterpretedVar VarName="$MinAmount" Target="$(Empire)">
                <Expression>Property(Context, @'ClassEmpire/ClassColonizedStarSystems/ClassColonizedPlanet', PlanetTypeDesert, true) + 2</Expression>
            </InterpretedVar>
            <Var VarName="$PlanetType" StringValue="PlanetTypeDesert"/>

            <Var VarName="$Ship"/>
            <Var VarName="$Six" IntValue="6"/>
            <LocalizationVar LocalizationKey="$MinAmountName" Source="$MinAmount"/>
            <LocalizationVar LocalizationKey="$IncomeAmountName" Source="$IncomeAmount"/>
            <LocalizationVar LocalizationKey="$SixName" Source="$Six"/>
        </Vars>

        <!--============ PREREQUISITE ============-->
    
      <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
          <!--============ STEP 0 - Choose ============-->
                <Choice DefaultChoiceIndex="0">
                    <ChoiceItem ObjectiveSetIndex="0"/>
                    <ChoiceItem ObjectiveSetIndex="1"/>
                    <ChoiceItem ObjectiveSetIndex="2"/>
                    <ChoiceItem ObjectiveSetIndex="3"/>
                </Choice>
                <ObjectiveSet>
                    <Objective Name="Step2_1_Objective1">
                        <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="45" MaxAutoResolutionTurn="60" AutoResolutionProbability="1" />
                    <!--OMOKOR-->
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_HasPlanets>
                                    <Input_EmpireOrSystem VarName="$CurrentEmpire"/>
                                    <Input_MinimumAmount VarName="$MinAmount"/>
                                    <Input_PlanetType VarName="$PlanetType"/>
                                </Condition_HasPlanets>
                            </Decorator_BeginTurn>                     
                        </Sequence>                        
                    </Objective>
                    <Reward Droplist="DroplistVenetians10" Picks="1"/>
                </ObjectiveSet>
                <ObjectiveSet>
                    <Objective Name="Step2_2_Objective1">
                        <!-- TODO -->
                        <AIHint Category="MaximizeTradeCompagny" Motivation="0.5">
                            <Resource>Science</Resource>
                        </AIHint>
                    <!--ARRAKYO-->
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_HasTradeIncome SummedAmount="true">
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_ResourceName VarName="$ResourceName00"/>
                                    <Input_MinimumAmount VarName="$IncomeAmount"/>
                                </Condition_HasTradeIncome>
                            </Decorator_BeginTurn>                           
                        </Sequence>                        
                    </Objective>
                    <Reward Droplist="DroplistVenetians11" Picks="1"/>
                </ObjectiveSet>
                <ObjectiveSet>
                    <Objective Name="Step2_3_Objective1">
                        <!-- TODO -->
                        <AIHint Category="MaximizeTradeCompagny" Motivation="0.5">
                            <Resource>Dust</Resource>
                        </AIHint>
                      <!--LANCELLUM-->                       
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_HasTradeIncome SummedAmount="true">
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_ResourceName VarName="$ResourceName01"/>
                                    <Input_MinimumAmount VarName="$IncomeAmount"/>
                                </Condition_HasTradeIncome>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                    <Reward Droplist="DroplistVenetians12" Picks="1"/>
                </ObjectiveSet>
                <ObjectiveSet>
                    <Objective Name="Step2_4_Objective1">
                        <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="45" MaxAutoResolutionTurn="60" AutoResolutionProbability="1" />
                        <!--MEOS-->
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_HasDeposits Input_ResourceType="Luxury">
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinimumAmount VarName="$Six"/>
                                </Condition_HasDeposits>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                    <Reward Droplist="DroplistVenetians13" Picks="1"/>
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

    <!-- ####################################### -->
    <!--  Venetians QUEST CHAPTER 4 MEOS LANCELLUM -->
    <!-- ####################################### -->

    <QuestDefinition Name="VenetiansQuest-Chapter4-Bis" Category="MajorQuest" SubCategory="Venetians">

        <!--============ TAGS ============-->
        <Tags>VenetiansQuest-Chapter4-Bis, FactionFinalQuest,FactionQuestVenetians</Tags>

        <QuestContextSolo/>


        <RepetitionRules  NumberOfOccurrencesPerGame="0"
                          NumberOfOccurrencesPerEmpire="1"
                          NumberOfConcurrentInstances="0"/>

        <Vars>
            <Var VarName="$CurrentEmpire">
                <From Source="$Empire"/>
            </Var>
            <Var VarName="$IncomeAmount" IntValue="250"/>
            <Var VarName="$ResourceName00" StringValue="EmpireResearch"/>
            <Var VarName="$ResourceName01" StringValue="Strategic1"/>
            <Var VarName="$ResourceName02" StringValue="Strategic2"/>
            <Var VarName="$ResourceName03" StringValue="Strategic3"/>
            <Var VarName="$ResourceName04" StringValue="Strategic4"/>
            <Var VarName="$ResourceName05" StringValue="Strategic5"/>
            <Var VarName="$ResourceName06" StringValue="Strategic6"/>
            <Var VarName="$MinAmount"  IntValue="5"/>
            <InterpretedVar VarName="$MinAmountPlanet" Target="$(Empire)">
                <Expression>Property(Context, @'ClassEmpire/ClassColonizedStarSystems/ClassColonizedPlanet', PlanetTypeDesert, true) + 2</Expression>
            </InterpretedVar>
            <Var VarName="$ResourceName07" StringValue="EmpireMoney"/>
            <Var VarName="$IncomeAmount01" IntValue="250"/>
            <Var VarName="$Ship"/>
            <Var VarName="$PlanetType" StringValue="PlanetTypeDesert"/>     
            <LocalizationVar LocalizationKey="$MinAmountName" Source="$MinAmountPlanet"/>
            <Var VarName="$Six" IntValue="6"/>           
            <LocalizationVar LocalizationKey="$IncomeAmountName" Source="$IncomeAmount"/>
            <LocalizationVar LocalizationKey="$SixName" Source="$Six"/>
            <LocalizationVar LocalizationKey="$FiveName" Source="$MinAmount"/>
        </Vars>

        <!--============ PREREQUISITE ============-->
     
        <!--============ STEPS ============-->
        <Steps>
            <Step Name="Step1">
                <!--============ STEP 0 - Choose ============-->
                <Choice DefaultChoiceIndex="0">
                    <ChoiceItem ObjectiveSetIndex="0"/>
                    <ChoiceItem ObjectiveSetIndex="1"/>
                    <ChoiceItem ObjectiveSetIndex="2"/>
                    <ChoiceItem ObjectiveSetIndex="3"/>
                </Choice>
                <ObjectiveSet>
                    <Objective Name="Step2_1_Objective1">
                        <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="45" MaxAutoResolutionTurn="60" AutoResolutionProbability="1" />
                        <!--OMOKOR-->
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_HasPlanets>
                                    <Input_EmpireOrSystem VarName="$CurrentEmpire"/>
                                    <Input_MinimumAmount VarName="$MinAmountPlanet"/>
                                    <Input_PlanetType VarName="$PlanetType"/>                                    
                                </Condition_HasPlanets>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                    <Reward Droplist="DroplistVenetians10" Picks="1"/>
                </ObjectiveSet>
                <ObjectiveSet>
                    <Objective Name="Step2_2_Objective1">
                        <!-- TODO -->
                        <AIHint Category="MaximizeTradeCompagny" Motivation="0.5">
                            <Resource>Science</Resource>
                        </AIHint>
                        <!--ARRAKYO-->
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_HasTradeIncome SummedAmount="true">
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_ResourceName VarName="$ResourceName00"/>
                                    <Input_MinimumAmount VarName="$IncomeAmount"/>
                                </Condition_HasTradeIncome>
                            </Decorator_BeginTurn>
                        </Sequence>
                    </Objective>
                    <Reward Droplist="DroplistVenetians11" Picks="1"/>
                </ObjectiveSet>
                <ObjectiveSet>
                    <Objective Name="Step2_3_Objective1">
                        <!-- TODO -->
                        <AIHint Category="Minimal" MinAutoResolutionTurn="45" MaxAutoResolutionTurn="60" AutoResolutionProbability="1" />
                        <!--LANCELLUM-->
                        <Sequence>
                            <Decorator_ShipConstructed Initiator="Empire">
                                <Condition_ShipHasResource>
                                    <Input_Ship VarName="$Ship"/>
                                    <Input_MinimumAmount VarName="$MinAmount"/>
                                    <Input_ResourceName VarName="$ResourceName01"/>
                                </Condition_ShipHasResource>
                                <Condition_ShipHasResource>
                                    <Input_Ship VarName="$Ship"/>
                                    <Input_MinimumAmount VarName="$MinAmount"/>
                                    <Input_ResourceName VarName="$ResourceName02"/>
                                </Condition_ShipHasResource>
                                <Condition_ShipHasResource>
                                    <Input_Ship VarName="$Ship"/>
                                    <Input_MinimumAmount VarName="$MinAmount"/>
                                    <Input_ResourceName VarName="$ResourceName03"/>
                                </Condition_ShipHasResource>
                                <Condition_ShipHasResource>
                                    <Input_Ship VarName="$Ship"/>
                                    <Input_MinimumAmount VarName="$MinAmount"/>
                                    <Input_ResourceName VarName="$ResourceName04"/>
                                </Condition_ShipHasResource>
                                <Condition_ShipHasResource>
                                    <Input_Ship VarName="$Ship"/>
                                    <Input_MinimumAmount VarName="$MinAmount"/>
                                    <Input_ResourceName VarName="$ResourceName05"/>
                                </Condition_ShipHasResource>
                                <Condition_ShipHasResource>
                                    <Input_Ship VarName="$Ship"/>
                                    <Input_MinimumAmount VarName="$MinAmount"/>
                                    <Input_ResourceName VarName="$ResourceName06"/>
                                </Condition_ShipHasResource>
                                <Output_Ship VarName="$Ship"/>
                            </Decorator_ShipConstructed>
                        </Sequence>
                    </Objective>
                    <Reward Droplist="DroplistVenetians12" Picks="1"/>
                </ObjectiveSet>
                <ObjectiveSet>
                    <Objective Name="Step2_4_Objective1">
                        <!--MEOS LANCELLUM-->
                        <Sequence>
                            <Decorator_BeginTurn>
                                <Condition_HasDeposits Input_ResourceType="Luxury">
                                    <Input_Empire VarName="$CurrentEmpire"/>
                                    <Input_MinimumAmount VarName="$Six"/>
                                </Condition_HasDeposits>
                            </Decorator_BeginTurn>                  
                        </Sequence>
                    </Objective>
                    <Reward Droplist="DroplistVenetians13" Picks="1"/>              
                </ObjectiveSet>
            </Step>
        </Steps>
    </QuestDefinition>

</Datatable>